(()=>{var e={258:e=>{!function(t){e.exports=t;var r="listeners",n={on:function(e,t){return a(this,e).push(t),this},once:function(e,t){var r=this;return n.originalListener=t,a(r,e).push(n),r;function n(){i.call(r,e,n),t.apply(this,arguments)}},off:i,emit:function(e,t){var r=this,n=a(r,e,!0);if(!n)return!1;var o=arguments.length;if(1===o)n.forEach((function(e){e.call(r)}));else if(2===o)n.forEach((function(e){e.call(r,t)}));else{var i=Array.prototype.slice.call(arguments,1);n.forEach((function(e){e.apply(r,i)}))}return!!n.length}};function o(e){for(var t in n)e[t]=n[t];return e}function i(e,t){var n,o=this;if(arguments.length){if(t){if(n=a(o,e,!0)){if(!(n=n.filter((function(e){return e!==t&&e.originalListener!==t}))).length)return i.call(o,e);o[r][e]=n}}else if((n=o[r])&&(delete n[e],!Object.keys(n).length))return i.call(o)}else delete o[r];return o}function a(e,t,n){if(!n||e[r]){var o=e[r]||(e[r]={});return o[t]||(o[t]=[])}}o(t.prototype),t.mixin=o}((function e(){if(!(this instanceof e))return new e}))}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e={VK:"vk",OK:"ok",YANDEX:"yandex",CRAZY_GAMES:"crazy_games",ABSOLUTE_GAMES:"absolute_games",GAME_DISTRIBUTION:"game_distribution",PLAYGAMA:"playgama",PLAYDECK:"playdeck",TELEGRAM:"telegram",Y8:"y8",LAGGED:"lagged",FACEBOOK:"facebook",POKI:"poki",MOCK:"mock",QA_TOOL:"qa_tool",MSN:"msn",BITQUEST:"bitquest",GAMEPUSH:"gamepush",DISCORD:"discord",JIO_GAMES:"jio_games",YOUTUBE:"youtube"},t={PLATFORM:"platform",PLAYER:"player",GAME:"game",STORAGE:"storage",ADVERTISEMENT:"advertisement",SOCIAL:"social",DEVICE:"device",LEADERBOARDS:"leaderboards",PAYMENTS:"payments",REMOTE_CONFIG:"remote_config",CLIPBOARD:"clipboard",ACHIEVEMENTS:"achievements"},n={INTERSTITIAL_STATE_CHANGED:"interstitial_state_changed",REWARDED_STATE_CHANGED:"rewarded_state_changed",BANNER_STATE_CHANGED:"banner_state_changed",VISIBILITY_STATE_CHANGED:"visibility_state_changed",AUDIO_STATE_CHANGED:"audio_state_changed",PAUSE_STATE_CHANGED:"pause_state_changed"},o={VISIBLE:"visible",HIDDEN:"hidden"},i={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed"},a={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed",REWARDED:"rewarded"},s={LOADING:"loading",SHOWN:"shown",HIDDEN:"hidden",FAILED:"failed"},u="banner-container",c="interstitial-container",l="rewarded-container",f={LOCAL_STORAGE:"local_storage",PLATFORM_INTERNAL:"platform_internal"},p={DESKTOP:"desktop",MOBILE:"mobile",TABLET:"tablet",TV:"tv"},d={GAME_READY:"game_ready",IN_GAME_LOADING_STARTED:"in_game_loading_started",IN_GAME_LOADING_STOPPED:"in_game_loading_stopped",GAMEPLAY_STARTED:"gameplay_started",GAMEPLAY_STOPPED:"gameplay_stopped",PLAYER_GOT_ACHIEVEMENT:"player_got_achievement",GAME_OVER:"game_over"},h="not_available",y="in_game",m="native",v={INITIALIZE:"initialize",AUTHORIZE_PLAYER:"authorize_player",SHARE:"share",INVITE_FRIENDS:"invite_friends",JOIN_COMMUNITY:"join_community",CREATE_POST:"create_post",ADD_TO_HOME_SCREEN:"add_to_home_screen",ADD_TO_FAVORITES:"add_to_favorites",RATE:"rate",LEADERBOARDS_SET_SCORE:"leaderboards_set_score",LEADERBOARDS_GET_ENTRIES:"leaderboards_get_entries",LEADERBOARDS_SHOW_NATIVE_POPUP:"leaderboards_show_native_popup",GET_PURCHASES:"get_purchases",GET_CATALOG:"get_catalog",PURCHASE:"purchase",CONSUME_PURCHASE:"consume_purchase",GET_REMOTE_CONFIG:"get_remote_config",GET_STORAGE_DATA:"get_storage_data",CLIPBOARD_WRITE:"clipboard_write",ADBLOCK_DETECT:"adblock_detect"},_={message:"Before using the SDK you must initialize it"},g={message:"Storage not supported"},b={message:"Storage not available"},S={message:"GameDistribution Game ID is undefined"},E={message:"Y8 Game params are not found"},P={message:"OK Game params are not found"},w={message:"Lagged Game params are not found"},A={message:"GamePush Game params are not found"},O={message:"Message is too long"},k={message:"Discord Game params are not found"},D={message:"JioGames Game params are not found"};function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R(n.key),n)}}function R(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==I(t)?t:String(t)}function L(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function j(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,C(e,t,"set"),r),r}function N(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,C(e,t,"get"))}function C(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var B=new WeakMap,G=new WeakMap,M=new WeakMap;const F=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),L(this,B,{writable:!0,value:void 0}),L(this,G,{writable:!0,value:void 0}),L(this,M,{writable:!0,value:void 0}),j(this,B,new Promise((function(e,r){j(t,G,e),j(t,M,r)})))}var t,r;return t=e,(r=[{key:"promise",get:function(){return N(this,B)}},{key:"resolve",value:function(e){N(this,G).call(this,e)}},{key:"reject",value:function(e){N(this,M).call(this,e)}}])&&T(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();var x=r(258),H=r.n(x);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,W(n.key),n)}}function V(e,t,r){return t&&z(e.prototype,t),r&&z(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function W(e){var t=function(e,t){if("object"!=U(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==U(t)?t:String(t)}const Y=V((function e(t){var r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=void 0,(n=W(n="_platformBridge"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._platformBridge=t}));function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,K(n.key),n)}}function K(e){var t=function(e,t){if("object"!=Z(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Z(t)?t:String(t)}function q(e,t){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q(e,t)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}function $(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var ee=new WeakMap,te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}(s,e);var t,r,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Q(o);if(i){var r=Q(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return X(e)}(this,e)});function s(e){var t,r,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r=X(t=a.call(this,e)),i={writable:!0,value:!1},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r,o=ee),o.set(r,i),t._platformBridge.on(n.AUDIO_STATE_CHANGED,(function(e){return t.emit(n.AUDIO_STATE_CHANGED,e)})),t._platformBridge.on(n.PAUSE_STATE_CHANGED,(function(e){return t.emit(n.PAUSE_STATE_CHANGED,e)})),t}return t=s,(r=[{key:"id",get:function(){return this._platformBridge.platformId}},{key:"sdk",get:function(){return this._platformBridge.platformSdk}},{key:"language",get:function(){return this._platformBridge.platformLanguage}},{key:"payload",get:function(){return this._platformBridge.platformPayload}},{key:"tld",get:function(){return this._platformBridge.platformTld}},{key:"isGetAllGamesSupported",get:function(){return this._platformBridge.isPlatformGetAllGamesSupported}},{key:"isGetGameByIdSupported",get:function(){return this._platformBridge.isPlatformGetGameByIdSupported}},{key:"isAudioEnabled",get:function(){return this._platformBridge.isPlatformAudioEnabled}},{key:"isPaused",get:function(){return this._platformBridge.isPlatformPaused}},{key:"sendMessage",value:function(e){if(e===d.GAME_READY){if(function(e,t){return t.get?t.get.call(e):t.value}(this,$(this,ee,"get")))return Promise.reject();!function(e,t,r){(function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}})(e,$(e,t,"set"),r)}(this,ee,!0)}return this._platformBridge.sendMessage(e)}},{key:"getServerTime",value:function(){return this._platformBridge.getServerTime()}},{key:"getAllGames",value:function(){return this._platformBridge.getAllGames()}},{key:"getGameById",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getGameById(t)}return this._platformBridge.getGameById(e)}}])&&J(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(Y);H().mixin(te.prototype);const re=te;function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ie(n.key),n)}}function ie(e){var t=function(e,t){if("object"!=ne(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ne(t)?t:String(t)}function ae(e,t){return ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ae(e,t)}function se(e){return se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},se(e)}const ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ae(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=se(n);if(o){var r=se(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isAuthorizationSupported",get:function(){return this._platformBridge.isPlayerAuthorizationSupported}},{key:"isAuthorized",get:function(){return this._platformBridge.isPlayerAuthorized}},{key:"id",get:function(){return this._platformBridge.playerId}},{key:"name",get:function(){return this._platformBridge.playerName}},{key:"photos",get:function(){return this._platformBridge.playerPhotos}},{key:"extra",get:function(){return this._platformBridge.playerExtra}},{key:"authorize",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.authorize(t)}return this._platformBridge.authorizePlayer(e)}}])&&oe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Y);function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fe(e,t,r){var n;return n=function(e,t){if("object"!=ce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==ce(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pe=function(e){return new Promise((function(t){var r=document.createElement("script");r.src=e,r.addEventListener("load",t),document.head.appendChild(r)}))};function de(e){var t=document.createElement("div");return t.id=u,t.style.position="absolute",document.body.appendChild(t),"top"===e?(t.style.top="0px",t.style.height="90px",t.style.width="100%"):(t.style.bottom="0px",t.style.height="90px",t.style.width="100%"),t}function he(e){var t=document.createElement("div");return t.id=e,t.style.position="fixed",t.style.inset="0",t.style.zIndex="9999999",document.body.appendChild(t),t}var ye=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length<=0?Promise.resolve():new Promise((function(e){var r=setInterval((function(){for(var n=window,o=0;o<t.length;o++){var i=n[t[o]];if(!i)return;n=i}e(),clearInterval(r)}),100)}))},me=function(e){return/^data:image\/(png|jpeg|jpg|gif|bmp|webp|svg\+xml);base64,[A-Za-z0-9+/]+={0,2}$/.test(e)},ve=function(e,t){return void 0===e[t]?null:e[t]};function _e(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Array.isArray(e)?e.reduce((function(e,n,o){if(e[o]=ve(t,n),r)try{e[o]=JSON.parse(e[o])}catch(e){}return e}),new Array(e.length)):ve(t,e)}function ge(e,t){for(var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),n=Object.keys(t),o=0;o<n.length;o++){var i=n[o];i in e&&t[i]instanceof Object&&e[i]instanceof Object?r[i]=ge(e[i],t[i]):r[i]=t[i]}return r}function be(e){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function Se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Oe(n.key),n)}}function Ee(e,t){return Ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ee(e,t)}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function we(e){return we=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},we(e)}function Ae(e,t,r){return(t=Oe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oe(e){var t=function(e,t){if("object"!=be(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==be(t)?t:String(t)}var ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ee(e,t)}(s,e);var t,r,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=we(o);if(i){var r=we(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pe(e)}(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),Ae(Pe(t=a.call(this,e)),"_currentLoadingProgress",null),Ae(Pe(t),"_loadingProcessCompleted",!1),t._platformBridge.on(n.VISIBILITY_STATE_CHANGED,(function(e){return t.emit(n.VISIBILITY_STATE_CHANGED,e)})),t._platformBridge.options.disableLoadingLogo||function(){var e=document.createElement("style");e.textContent="\n        .fullscreen {\n            background: #242424;\n            width: 100vw;\n            height: 100vh;\n            position: absolute;\n            top: 0px;\n            left: 0px;\n        }\n\n        #loading-overlay {\n            font-size: 20px;\n            z-index: 1;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n        }\n\n        #logo {\n            width: 10%;\n            max-width: 300px;\n            min-width: 120px;\n            overflow: visible;\n        }\n\n        .fill-rect {\n            transform: translateY(100%);\n            transition: transform 0.3s ease-out;\n        }\n\n        #gradientMover {\n            display: none;\n        }\n\n        .gradient-mover {\n            animation: moveGradient 0.4s linear;\n        }\n\n        @keyframes moveGradient {\n            0% { transform: translateX(0); }\n            100% { transform: translateX(-250%); }\n        }\n\n        .logo-fade-out {\n            animation: logoFadeOut 1s linear;\n        }\n\n        .logo-fade-out path {\n            fill: white;\n            stroke: white;\n        }\n\n        @keyframes logoFadeOut {\n            0% { opacity: 1; }\n            50% { opacity: 0; }\n            100% { opacity: 0; }\n        }\n    ",document.head.appendChild(e);var t=document.createElement("div");t.id="loading-overlay",t.className="fullscreen",document.body.appendChild(t);var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("id","logo"),r.setAttribute("viewBox","0 0 633 819"),r.setAttribute("fill","none"),r.setAttribute("xmlns","http://www.w3.org/2000/svg");var n=document.createElementNS(r.namespaceURI,"defs"),o=document.createElementNS(r.namespaceURI,"mask");o.setAttribute("id","logo-mask");var i=document.createElementNS(r.namespaceURI,"rect");i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("fill","black"),o.appendChild(i);var a=["M632 1V632H1V1H632ZM350 125.586V507.414L380.586 538H546V451H478.599L478.308 451.278L454.598 474H443.406L450.944 452.328L451 452.169V187.459L457.369 182H546V95H380.586L350 125.586ZM283 125.586L252.414 95H87V182H175.631L182 187.459V445.54L175.631 451H87V538H252.414L283 507.414V125.586Z","M633 687V660H548V687H560V791H548V819H633V792H601L592 801H587L590 792V752H627V725H590V687H633Z","M533 718V675L518 660H450L435 675V802L450 819H518L533 804V734H482V761H503V788L499 792H476L467 801H462L465 792V691L469 687H499L503 691V718H533Z","M402 660H310V687H322V792H310V819H402L417 804V675L402 660ZM387 788L383 792H363L354 801H349L352 792V687H383L387 691V788Z","M295 687V660H239V687H251V792H239V819H295V792H283V687H295Z","M215 791L200 760H209L224 745V675L209 660H121V687H132V792H121V819H162V760H166L193 819H227V791H215ZM194 729L190 733H173L164 742H159L162 733V687H190L194 691V729Z","M106 724V675L91 660H0V687H12V792H0V819H91L106 804V749L89 744V728L106 724ZM73 788L69 792H53L44 801H39L42 792V752H73V788ZM73 725H53L44 734H39L42 725V687H69L73 691V725Z"];a.forEach((function(e){var t=document.createElementNS(r.namespaceURI,"path");t.setAttribute("d",e),t.setAttribute("fill","white"),o.appendChild(t)})),n.appendChild(o);var s=document.createElementNS(r.namespaceURI,"linearGradient");s.setAttribute("id","shineGradient"),s.setAttribute("x1","1233"),s.setAttribute("y1","0"),s.setAttribute("x2","1866"),s.setAttribute("y2","633"),s.setAttribute("gradientUnits","userSpaceOnUse"),[{offset:"0.235577",color:"#aa76ff"},{offset:"0.240685",color:"white"},{offset:"0.659749",color:"#aa76ff"}].forEach((function(e){var t=e.offset,n=e.color,o=document.createElementNS(r.namespaceURI,"stop");o.setAttribute("offset",t),o.setAttribute("stop-color",n),s.appendChild(o)})),n.appendChild(s),r.appendChild(n);var u=document.createElementNS(r.namespaceURI,"g");u.setAttribute("mask","url(#logo-mask)");var c=document.createElementNS(r.namespaceURI,"rect");c.setAttribute("id","gradientMover"),c.setAttribute("x","0"),c.setAttribute("y","0"),c.setAttribute("width","2532"),c.setAttribute("height","819"),c.setAttribute("fill","url(#shineGradient)"),c.style.transform="translateX(0)",u.appendChild(c),r.appendChild(u);var l=document.createElementNS(r.namespaceURI,"g");l.setAttribute("mask","url(#logo-mask)");var f=document.createElementNS(r.namespaceURI,"rect");f.setAttribute("id","fillRect"),f.setAttribute("class","fill-rect"),f.setAttribute("x","0"),f.setAttribute("y","0"),f.setAttribute("width","100%"),f.setAttribute("height","819"),f.setAttribute("fill","#aa76ff"),l.appendChild(f),r.appendChild(l),a.forEach((function(e){var t=document.createElementNS(r.namespaceURI,"path");t.setAttribute("d",e),t.setAttribute("stroke","#aa76ff"),t.setAttribute("stroke-width","3"),r.appendChild(t)})),t.appendChild(r)}(),t}return t=s,r=[{key:"visibilityState",get:function(){return this._platformBridge.visibilityState}},{key:"setLoadingProgress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(this._loadingProcessCompleted||t&&null!==this._currentLoadingProgress)){var r=document.getElementById("fillRect"),n=document.getElementById("gradientMover"),o=document.getElementById("logo"),i=document.getElementById("loading-overlay");if(r&&n&&o&&i){this._currentLoadingProgress=e;var a=Math.max(0,Math.min(100,e)),s=100-a;r.style.transform="translateY(".concat(s,"%)"),100===a?(this._loadingProcessCompleted=!0,setTimeout((function(){r.style.display="none",n.style.display="block",n.classList.add("gradient-mover")}),400),setTimeout((function(){return o.classList.add("logo-fade-out")}),900),setTimeout((function(){return i.remove()}),1400)):n.classList.remove("gradient-mover")}}}}],r&&Se(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(Y);H().mixin(ke.prototype);const De=ke;function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Re(n.key),n)}}function Re(e){var t=function(e,t){if("object"!=Ie(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ie(t)?t:String(t)}function Le(e,t){return Le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Le(e,t)}function je(e){return je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},je(e)}const Ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Le(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=je(n);if(o){var r=je(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ie(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,r=[{key:"defaultType",get:function(){return this._platformBridge.defaultStorageType}},{key:"isSupported",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.isSupported(t)}return this._platformBridge.isStorageSupported(e)}},{key:"isAvailable",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.isSupported(t)}return this._platformBridge.isStorageAvailable(e)}},{key:"get",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t){var n=t[this._platformBridge.platformId];if(n)return this.get(e,n,r)}var o=t;return o||(o=this.defaultType),this._platformBridge.isStorageAvailable(o)?this._platformBridge.getDataFromStorage(e,o,r):Promise.reject()}},{key:"set",value:function(e,t,r){if(r){var n=r[this._platformBridge.platformId];if(n)return this.set(e,t,n)}var o=r;return o||(o=this.defaultType),this._platformBridge.isStorageAvailable(o)?this._platformBridge.setDataToStorage(e,t,o):Promise.reject()}},{key:"delete",value:function(e,t){if(t){var r=t[this._platformBridge.platformId];if(r)return this.delete(e,r)}var n=t;return n||(n=this.defaultType),this._platformBridge.isStorageAvailable(n)?this._platformBridge.deleteDataFromStorage(e,n):Promise.reject()}}],r&&Te(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Y);function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Be(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ge(n.key),n)}}function Ge(e){var t=function(e,t){if("object"!=Ce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ce(t)?t:String(t)}function Me(e,t){xe(e,t),t.add(e)}function Fe(e,t,r){xe(e,t),t.set(e,r)}function xe(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function He(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Ue(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Ve(e,t,"set"),r),r}function ze(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ve(e,t,"get"))}function Ve(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var We="started",Ye=new WeakMap,Ze=new WeakMap,Je=new WeakMap,Ke=new WeakMap,qe=new WeakSet,Xe=new WeakSet,Qe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Me(this,Xe),Me(this,qe),Fe(this,Ye,{writable:!0,value:0}),Fe(this,Ze,{writable:!0,value:0}),Fe(this,Je,{writable:!0,value:"created"}),Fe(this,Ke,{writable:!0,value:0}),Ue(this,Ye,t)}var t,r;return t=e,(r=[{key:"state",get:function(){return ze(this,Je)}},{key:"start",value:function(){var e=this;ze(this,Je)!==We&&(Ue(this,Ze,ze(this,Ye)),He(this,qe,$e).call(this,We),Ue(this,Ke,setInterval((function(){Ue(e,Ze,ze(e,Ze)-1),e.emit("time_left_changed",ze(e,Ze)),ze(e,Ze)<=0&&(He(e,Xe,et).call(e),He(e,qe,$e).call(e,"completed"))}),1e3)))}},{key:"stop",value:function(){He(this,Xe,et).call(this),ze(this,Je)===We&&He(this,qe,$e).call(this,"stopped")}}])&&Be(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $e(e){Ue(this,Je,e),this.emit("state_changed",ze(this,Je))}function et(){clearInterval(ze(this,Ke)),Ue(this,Ze,0)}H().mixin(Qe.prototype);const tt=Qe;function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function nt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ot(n.key),n)}}function ot(e){var t=function(e,t){if("object"!=rt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==rt(t)?t:String(t)}function it(e,t){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},it(e,t)}function at(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function st(e){return st=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},st(e)}function ut(e,t){lt(e,t),t.add(e)}function ct(e,t,r){lt(e,t),t.set(e,r)}function lt(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ft(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,ht(e,t,"set"),r),r}function pt(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function dt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ht(e,t,"get"))}function ht(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var yt=new WeakMap,mt=new WeakMap,vt=new WeakMap,_t=new WeakMap,gt=new WeakMap,bt=new WeakMap,St=new WeakSet,Et=new WeakSet,Pt=new WeakSet,wt=new WeakSet,At=new WeakSet,Ot=new WeakSet,kt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&it(e,t)}(l,e);var t,r,o,u,c=(o=l,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=st(o);if(u){var r=st(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===rt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return at(e)}(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),ut(at(t=c.call(this,e)),Ot),ut(at(t),At),ut(at(t),wt),ut(at(t),Pt),ut(at(t),Et),ut(at(t),St),ct(at(t),yt,{writable:!0,value:s.HIDDEN}),ct(at(t),mt,{writable:!0,value:i.CLOSED}),ct(at(t),vt,{writable:!0,value:void 0}),ct(at(t),_t,{writable:!0,value:60}),ct(at(t),gt,{writable:!0,value:a.CLOSED}),ct(at(t),bt,{writable:!0,value:null}),t._platformBridge.on(n.BANNER_STATE_CHANGED,(function(e){return pt(at(t),Pt,Tt).call(at(t),e)})),t._platformBridge.on(n.INTERSTITIAL_STATE_CHANGED,(function(e){e===i.CLOSED&&pt(at(t),St,Dt).call(at(t)),pt(at(t),wt,Rt).call(at(t),e)})),t._platformBridge.on(n.REWARDED_STATE_CHANGED,(function(e){return pt(at(t),At,Lt).call(at(t),e)})),t}return t=l,r=[{key:"isBannerSupported",get:function(){return this._platformBridge.isBannerSupported}},{key:"bannerState",get:function(){return dt(this,yt)}},{key:"isInterstitialSupported",get:function(){return this._platformBridge.isInterstitialSupported}},{key:"interstitialState",get:function(){return dt(this,mt)}},{key:"isRewardedSupported",get:function(){return this._platformBridge.isRewardedSupported}},{key:"rewardedPlacement",get:function(){return dt(this,bt)}},{key:"rewardedState",get:function(){return dt(this,gt)}},{key:"minimumDelayBetweenInterstitial",get:function(){return dt(this,_t)}},{key:"setMinimumDelayBetweenInterstitial",value:function(e){var t=rt(e),r=dt(this,_t);switch(t){case"number":r=e;break;case"string":if(r=parseInt(e,10),Number.isNaN(r))return;break;default:return}ft(this,_t,r),dt(this,vt)&&(dt(this,vt).stop(),pt(this,St,Dt).call(this))}},{key:"showBanner",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bottom",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.bannerState!==s.LOADING&&this.bannerState!==s.SHOWN)if(pt(this,Pt,Tt).call(this,s.LOADING),this.isBannerSupported){var n,o=r;o||null!==(n=this._platformBridge.options)&&void 0!==n&&null!==(n=n.advertisement)&&void 0!==n&&null!==(n=n.banner)&&void 0!==n&&n.placementFallback&&(o=this._platformBridge.options.advertisement.banner.placementFallback);var i=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.banner)||void 0===e?void 0:e.placements,a=pt(this,Ot,jt).call(this,o,i);this._platformBridge.showBanner(t,a)}else pt(this,Pt,Tt).call(this,s.FAILED)}},{key:"hideBanner",value:function(){this.bannerState!==s.LOADING&&this.bannerState!==s.HIDDEN&&this.isBannerSupported&&this._platformBridge.hideBanner()}},{key:"preloadInterstitial",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r&&"string"==typeof r||null!==(t=this._platformBridge.options)&&void 0!==t&&null!==(t=t.advertisement)&&void 0!==t&&null!==(t=t.interstitial)&&void 0!==t&&t.placementFallback&&(r=this._platformBridge.options.advertisement.interstitial.placementFallback);var n=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.interstitial)||void 0===e?void 0:e.placements,o=pt(this,Ot,jt).call(this,r,n);this._platformBridge.preloadInterstitial(o)}},{key:"showInterstitial",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!pt(this,Et,It).call(this))if(pt(this,wt,Rt).call(this,i.LOADING),this._platformBridge.isMinimumDelayBetweenInterstitialEnabled&&dt(this,vt)&&dt(this,vt).state===We)pt(this,wt,Rt).call(this,i.FAILED);else{var r,n=t;n||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.interstitial)&&void 0!==r&&r.placementFallback&&(n=this._platformBridge.options.advertisement.interstitial.placementFallback);var o=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.interstitial)||void 0===e?void 0:e.placements,a=pt(this,Ot,jt).call(this,n,o);this._platformBridge.showInterstitial(a)}}},{key:"preloadRewarded",value:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r&&"string"==typeof r||null!==(t=this._platformBridge.options)&&void 0!==t&&null!==(t=t.advertisement)&&void 0!==t&&null!==(t=t.rewarded)&&void 0!==t&&t.placementFallback&&(r=this._platformBridge.options.advertisement.rewarded.placementFallback);var n=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.rewarded)||void 0===e?void 0:e.placements,o=pt(this,Ot,jt).call(this,r,n);this._platformBridge.preloadRewarded(o)}},{key:"showRewarded",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!pt(this,Et,It).call(this)){var r;ft(this,bt,t),dt(this,bt)||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.rewarded)&&void 0!==r&&r.placementFallback&&ft(this,bt,this._platformBridge.options.advertisement.rewarded.placementFallback);var n=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.rewarded)||void 0===e?void 0:e.placements,o=pt(this,Ot,jt).call(this,dt(this,bt),n);pt(this,At,Lt).call(this,a.LOADING),this._platformBridge.showRewarded(o)}}},{key:"checkAdBlock",value:function(){return this._platformBridge.checkAdBlock()}}],r&&nt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(Y);function Dt(){dt(this,_t)>0&&this._platformBridge.isMinimumDelayBetweenInterstitialEnabled&&(ft(this,vt,new tt(dt(this,_t))),dt(this,vt).start())}function It(){var e=[i.LOADING,i.OPENED].includes(dt(this,mt)),t=[a.LOADING,a.OPENED,a.REWARDED].includes(dt(this,gt));return e||t}function Tt(e){dt(this,yt)!==e&&(ft(this,yt,e),this.emit(n.BANNER_STATE_CHANGED,dt(this,yt)))}function Rt(e){dt(this,mt)!==e&&(ft(this,mt,e),this.emit(n.INTERSTITIAL_STATE_CHANGED,dt(this,mt)))}function Lt(e){dt(this,gt)!==e&&(ft(this,gt,e),this.emit(n.REWARDED_STATE_CHANGED,dt(this,gt)))}function jt(e,t){if(!e)return e;if(!t)return e;var r=t.find((function(t){return t.id===e}));return r&&r[this._platformBridge.platformId]?r[this._platformBridge.platformId]:e}H().mixin(kt.prototype);const Nt=kt;function Ct(e){return Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ct(e)}function Bt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Gt(n.key),n)}}function Gt(e){var t=function(e,t){if("object"!=Ct(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ct(t)?t:String(t)}function Mt(e,t){return Mt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Mt(e,t)}function Ft(e){return Ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ft(e)}const xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ft(n);if(o){var r=Ft(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ct(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isInviteFriendsSupported",get:function(){return this._platformBridge.isInviteFriendsSupported}},{key:"isJoinCommunitySupported",get:function(){return this._platformBridge.isJoinCommunitySupported}},{key:"isShareSupported",get:function(){return this._platformBridge.isShareSupported}},{key:"isCreatePostSupported",get:function(){return this._platformBridge.isCreatePostSupported}},{key:"isAddToHomeScreenSupported",get:function(){return this._platformBridge.isAddToHomeScreenSupported}},{key:"isAddToFavoritesSupported",get:function(){return this._platformBridge.isAddToFavoritesSupported}},{key:"isRateSupported",get:function(){return this._platformBridge.isRateSupported}},{key:"isExternalLinksAllowed",get:function(){return this._platformBridge.isExternalLinksAllowed}},{key:"inviteFriends",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.inviteFriends(t)}return this._platformBridge.inviteFriends(e)}},{key:"joinCommunity",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.joinCommunity(t)}return this._platformBridge.joinCommunity(e)}},{key:"share",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.share(t)}return this._platformBridge.share(e)}},{key:"createPost",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.createPost(t)}return this._platformBridge.createPost(e)}},{key:"addToHomeScreen",value:function(){return this._platformBridge.addToHomeScreen()}},{key:"addToFavorites",value:function(){return this._platformBridge.addToFavorites()}},{key:"rate",value:function(){return this._platformBridge.rate()}}])&&Bt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Y);function Ht(e){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ht(e)}function Ut(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zt(n.key),n)}}function zt(e){var t=function(e,t){if("object"!=Ht(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ht(t)?t:String(t)}function Vt(e,t){return Vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vt(e,t)}function Wt(e){return Wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wt(e)}const Yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wt(n);if(o){var r=Wt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ht(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"type",get:function(){return this._platformBridge.deviceType}}])&&Ut(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Y);function Zt(e){return Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zt(e)}function Jt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Kt(n.key),n)}}function Kt(e){var t=function(e,t){if("object"!=Zt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Zt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Zt(t)?t:String(t)}function qt(e,t){return qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qt(e,t)}function Xt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qt(e){return Qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qt(e)}function $t(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function er(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var tr=new WeakSet,rr=new WeakSet;function nr(e){var t;if(!e)return e;var r=null===(t=this._platformBridge.options)||void 0===t?void 0:t.leaderboards;if(!r)return e;var n=r.find((function(t){return t.id===e}));return n&&n[this._platformBridge.platformId]?n[this._platformBridge.platformId]:e}function or(e){var t,r=null===(t=this._platformBridge.options)||void 0===t?void 0:t.leaderboards;if(!r)return!1;var n=r.find((function(t){return t.id===e}));return!!n&&!0===n.isMain}const ir=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Qt(n);if(o){var r=Qt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Zt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Xt(e)}(this,e)});function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return $t(Xt(e=i.call.apply(i,[this].concat(r))),rr),$t(Xt(e),tr),e}return t=a,(r=[{key:"type",get:function(){return this._platformBridge.leaderboardsType}},{key:"setScore",value:function(e,t){var r=er(this,tr,nr).call(this,e),n=er(this,rr,or).call(this,e);return this._platformBridge.leaderboardsSetScore(r,t,n)}},{key:"getEntries",value:function(e){var t=er(this,tr,nr).call(this,e);return this._platformBridge.leaderboardsGetEntries(t)}},{key:"showNativePopup",value:function(e){var t=er(this,tr,nr).call(this,e);return this._platformBridge.leaderboardsShowNativePopup(t)}}])&&Jt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Y);function ar(e){return ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ar(e)}function sr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ur(n.key),n)}}function ur(e){var t=function(e,t){if("object"!=ar(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ar(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ar(t)?t:String(t)}function cr(e,t){return cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cr(e,t)}function lr(e){return lr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lr(e)}const fr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=lr(n);if(o){var r=lr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ar(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isPaymentsSupported}},{key:"purchase",value:function(e,t){return this._platformBridge.paymentsPurchase(e,t)}},{key:"getPurchases",value:function(){return this._platformBridge.paymentsGetPurchases()}},{key:"getCatalog",value:function(){return this._platformBridge.paymentsGetCatalog()}},{key:"consumePurchase",value:function(e){return this._platformBridge.paymentsConsumePurchase(e)}}])&&sr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Y);function pr(e){return pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pr(e)}function dr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hr(n.key),n)}}function hr(e){var t=function(e,t){if("object"!=pr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=pr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pr(t)?t:String(t)}function yr(e,t){return yr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},yr(e,t)}function mr(e){return mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},mr(e)}const vr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=mr(n);if(o){var r=mr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===pr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isRemoteConfigSupported}},{key:"get",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.get(t)}return this._platformBridge.getRemoteConfig(e)}}])&&dr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Y);function _r(e){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_r(e)}function gr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,br(n.key),n)}}function br(e){var t=function(e,t){if("object"!=_r(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=_r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_r(t)?t:String(t)}function Sr(e,t){return Sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Sr(e,t)}function Er(e){return Er=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Er(e)}const Pr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Er(n);if(o){var r=Er(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===_r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isClipboardSupported}},{key:"read",value:function(){return this._platformBridge.clipboardRead()}},{key:"write",value:function(e){return this._platformBridge.clipboardWrite(e)}}])&&gr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Y);function wr(e){return wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wr(e)}function Ar(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Or(n.key),n)}}function Or(e){var t=function(e,t){if("object"!=wr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=wr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==wr(t)?t:String(t)}function kr(e,t){return kr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kr(e,t)}function Dr(e){return Dr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dr(e)}const Ir=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Dr(n);if(o){var r=Dr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===wr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isAchievementsSupported}},{key:"isGetListSupported",get:function(){return this._platformBridge.isGetAchievementsListSupported}},{key:"isNativePopupSupported",get:function(){return this._platformBridge.isAchievementsNativePopupSupported}},{key:"unlock",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.unlock(t)}return this._platformBridge.unlockAchievement(e)}},{key:"getList",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getList(t)}return this._platformBridge.getAchievementsList(e)}},{key:"showNativePopup",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.showNativePopup(t)}return this._platformBridge.showAchievementsNativePopup(e)}}])&&Ar(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Y);function Tr(e){return Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tr(e)}function Rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(r),!0).forEach((function(t){Nr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Cr(n.key),n)}}function Nr(e,t,r){return(t=Cr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cr(e){var t=function(e,t){if("object"!=Tr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Tr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Tr(t)?t:String(t)}function Br(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}var Gr=new WeakMap,Mr=function(){function t(e){var r,n,i,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Nr(this,"_isInitialized",!1),Nr(this,"_platformSdk",null),Nr(this,"_isPlayerAuthorized",!1),Nr(this,"_playerId",null),Nr(this,"_playerName",null),Nr(this,"_playerPhotos",[]),Nr(this,"_playerExtra",{}),Nr(this,"_visibilityState",null),Nr(this,"_localStorage",null),Nr(this,"_defaultStorageType",f.LOCAL_STORAGE),Nr(this,"_platformStorageCachedData",null),Nr(this,"_isBannerSupported",!1),Nr(this,"_paymentsPurchases",[]),i={writable:!0,value:{}},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,n=Gr),n.set(r,i);try{this._localStorage=window.localStorage}catch(e){}this._visibilityState=document.visibilityState,document.addEventListener("visibilitychange",(function(){a._setVisibilityState(document.visibilityState)})),window.addEventListener("blur",(function(){a._setVisibilityState(o.HIDDEN)})),window.addEventListener("focus",(function(){a._setVisibilityState(o.VISIBLE)})),e&&(this._options=Lr({},e))}var r,u;return r=t,(u=[{key:"options",get:function(){return this._options}},{key:"platformId",get:function(){return e.MOCK}},{key:"platformSdk",get:function(){return this._platformSdk}},{key:"platformLanguage",get:function(){var e=navigator.language;return"string"==typeof e?e.substring(0,2).toLowerCase():"en"}},{key:"platformPayload",get:function(){return new URL(window.location.href).searchParams.get("payload")}},{key:"platformTld",get:function(){return null}},{key:"isPlatformGetAllGamesSupported",get:function(){return!1}},{key:"isPlatformGetGameByIdSupported",get:function(){return!1}},{key:"isPlatformAudioEnabled",get:function(){return!0}},{key:"isPlatformPaused",get:function(){return!1}},{key:"visibilityState",get:function(){return this._visibilityState}},{key:"isPlayerAuthorizationSupported",get:function(){return!1}},{key:"isPlayerAuthorized",get:function(){return this._isPlayerAuthorized}},{key:"playerId",get:function(){return this._playerId}},{key:"playerName",get:function(){return this._playerName}},{key:"playerPhotos",get:function(){return this._playerPhotos}},{key:"playerExtra",get:function(){return this._playerExtra}},{key:"defaultStorageType",get:function(){return this._defaultStorageType}},{key:"isBannerSupported",get:function(){return this._isBannerSupported}},{key:"isInterstitialSupported",get:function(){return!1}},{key:"isMinimumDelayBetweenInterstitialEnabled",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!1}},{key:"isInviteFriendsSupported",get:function(){return!1}},{key:"isJoinCommunitySupported",get:function(){return!1}},{key:"isShareSupported",get:function(){return!1}},{key:"isCreatePostSupported",get:function(){return!1}},{key:"isAddToHomeScreenSupported",get:function(){return!1}},{key:"isAddToFavoritesSupported",get:function(){return!1}},{key:"isRateSupported",get:function(){return!1}},{key:"isExternalLinksAllowed",get:function(){return!0}},{key:"deviceType",get:function(){if(navigator&&navigator.userAgent){var e=navigator.userAgent.toLowerCase();if(/android|webos|iphone|ipod|blackberry|iemobile|opera mini/i.test(e))return p.MOBILE;if(/ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP)))/.test(e))return p.TABLET}return p.DESKTOP}},{key:"isPaymentsSupported",get:function(){return!1}},{key:"leaderboardsType",get:function(){return h}},{key:"isRemoteConfigSupported",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!0}},{key:"isAchievementsSupported",get:function(){return!1}},{key:"isGetAchievementsListSupported",get:function(){return!1}},{key:"isAchievementsNativePopupSupported",get:function(){return!1}},{key:"initialize",value:function(){return Promise.resolve()}},{key:"sendMessage",value:function(){return Promise.resolve()}},{key:"getServerTime",value:function(){return new Promise((function(e,t){fetch("https://worldtimeapi.org/api/timezone/Etc/UTC").then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(t){e(1e3*t.unixtime)})).catch((function(){t()}))}))}},{key:"getAllGames",value:function(){return Promise.reject()}},{key:"getGameById",value:function(){return Promise.reject()}},{key:"authorizePlayer",value:function(){return Promise.reject()}},{key:"isStorageSupported",value:function(e){switch(e){case f.LOCAL_STORAGE:return null!==this._localStorage;case f.PLATFORM_INTERNAL:default:return!1}}},{key:"isStorageAvailable",value:function(e){switch(e){case f.LOCAL_STORAGE:return null!==this._localStorage;case f.PLATFORM_INTERNAL:default:return!1}}},{key:"getDataFromStorage",value:function(e,t,r){if(t===f.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var n=[],o=0;o<e.length;o++)n.push(this._getDataFromLocalStorage(e[o],r));return Promise.resolve(n)}var i=this._getDataFromLocalStorage(e,r);return Promise.resolve(i)}return Promise.reject(g)}return Promise.reject(g)}},{key:"setDataToStorage",value:function(e,t,r){if(r===f.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var n=0;n<e.length;n++)this._setDataToLocalStorage(e[n],t[n]);return Promise.resolve()}return this._setDataToLocalStorage(e,t),Promise.resolve()}return Promise.reject(g)}return Promise.reject(g)}},{key:"deleteDataFromStorage",value:function(e,t){if(t===f.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var r=0;r<e.length;r++)this._deleteDataFromLocalStorage(e[r]);return Promise.resolve()}return this._deleteDataFromLocalStorage(e),Promise.resolve()}return Promise.reject(g)}return Promise.reject(g)}},{key:"showBanner",value:function(){this._setBannerState(s.FAILED)}},{key:"hideBanner",value:function(){this._setBannerState(s.HIDDEN)}},{key:"preloadInterstitial",value:function(){}},{key:"showInterstitial",value:function(){this._setInterstitialState(i.FAILED)}},{key:"preloadRewarded",value:function(){}},{key:"showRewarded",value:function(){this._setRewardedState(a.FAILED)}},{key:"checkAdBlock",value:function(){var e=document.createElement("div");e.className="textads banner-ads banner_ads ad-unit ad-zone ad-space adsbox",e.style.position="absolute",e.style.left="-9999px",e.style.width="1px",e.style.height="1px",document.body.appendChild(e);var t={method:"HEAD",mode:"no-cors"};return new Promise((function(r){fetch("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",t).then((function(t){t.redirected?r(t.redirected):window.setTimeout((function(){var t,n=0===e.offsetHeight||"none"===(null===(t=window.getComputedStyle(e))||void 0===t?void 0:t.display);r(n),e.remove()}),100)})).catch((function(){r(!0)}))}))}},{key:"inviteFriends",value:function(){return Promise.reject()}},{key:"joinCommunity",value:function(){return Promise.reject()}},{key:"share",value:function(){return Promise.reject()}},{key:"createPost",value:function(){return Promise.reject()}},{key:"addToHomeScreen",value:function(){return Promise.reject()}},{key:"addToFavorites",value:function(){return Promise.reject()}},{key:"rate",value:function(){return Promise.reject()}},{key:"leaderboardsSetScore",value:function(){return Promise.reject()}},{key:"leaderboardsGetEntries",value:function(){return Promise.reject()}},{key:"leaderboardsShowNativePopup",value:function(){return Promise.reject()}},{key:"paymentsPurchase",value:function(e){if(this.isPaymentsSupported){var t={id:e};return this._paymentsPurchases.push(t),Promise.resolve(t)}return Promise.reject()}},{key:"paymentsConsumePurchase",value:function(e){if(this.isPaymentsSupported){var t=this._paymentsPurchases.findIndex((function(t){return t.id===e}));return t<0?Promise.reject():(this._paymentsPurchases.splice(t,1),Promise.resolve({id:e}))}return Promise.reject()}},{key:"paymentsGetCatalog",value:function(){return this.isPaymentsSupported?Promise.resolve(this._paymentsGetProductsPlatformData()):Promise.reject()}},{key:"paymentsGetPurchases",value:function(){return this.isPaymentsSupported?Promise.resolve(this._paymentsPurchases):Promise.reject()}},{key:"getRemoteConfig",value:function(){return Promise.reject()}},{key:"clipboardRead",value:function(){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.readText():Promise.reject()}},{key:"clipboardWrite",value:function(e){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.writeText(e):Promise.reject()}},{key:"unlockAchievement",value:function(){return Promise.reject()}},{key:"getAchievementsList",value:function(){return Promise.reject()}},{key:"showAchievementsNativePopup",value:function(){return Promise.reject()}},{key:"_getDataFromLocalStorage",value:function(e,t){var r=this._localStorage.getItem(e);if(t&&"string"==typeof r)try{r=JSON.parse(r)}catch(e){}return r}},{key:"_setDataToLocalStorage",value:function(e,t){this._localStorage.setItem(e,"object"===Tr(t)?JSON.stringify(t):t)}},{key:"_deleteDataFromLocalStorage",value:function(e){this._localStorage.removeItem(e)}},{key:"_setVisibilityState",value:function(e){this._visibilityState!==e&&(this._visibilityState=e,this.emit(n.VISIBILITY_STATE_CHANGED,this._visibilityState))}},{key:"_setBannerState",value:function(e){this.emit(n.BANNER_STATE_CHANGED,e)}},{key:"_setInterstitialState",value:function(e){this.emit(n.INTERSTITIAL_STATE_CHANGED,e)}},{key:"_setRewardedState",value:function(e){this.emit(n.REWARDED_STATE_CHANGED,e)}},{key:"_setAudioState",value:function(e){this.emit(n.AUDIO_STATE_CHANGED,e)}},{key:"_setPauseState",value:function(e){this.emit(n.PAUSE_STATE_CHANGED,e)}},{key:"_createPromiseDecorator",value:function(e){var t=new F;return Br(this,Gr)[e]=t,t}},{key:"_getPromiseDecorator",value:function(e){return Br(this,Gr)[e]}},{key:"_resolvePromiseDecorator",value:function(e,t){Br(this,Gr)[e]&&(Br(this,Gr)[e].resolve(t),delete Br(this,Gr)[e])}},{key:"_rejectPromiseDecorator",value:function(e,t){Br(this,Gr)[e]&&(Br(this,Gr)[e].reject(t),delete Br(this,Gr)[e])}},{key:"_paymentsGetProductsPlatformData",value:function(){var e=this;return this._options.payments?this._options.payments.map((function(t){var r=Lr({},t[e.platformId]);return r.platformProductId=r.id,r.id=t.id,r})):[]}},{key:"_paymentsGetProductPlatformData",value:function(e){var t=this._options.payments;if(!t)return null;var r=t.find((function(t){return t.id===e}));if(!r)return null;var n=Lr({},r[this.platformId]);return n.platformProductId=n.id,n.id=r.id,n}},{key:"_paymentsGenerateTransactionId",value:function(e){return"".concat(e,"_").concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,10))}},{key:"_advertisementShowErrorPopup",value:function(e){var t,r=this;return(null===(t=this._options)||void 0===t||null===(t=t.advertisement)||void 0===t?void 0:t.useBuiltInErrorPopup)?function(e){if(!document.getElementById("bridge-info-popup-styles")){var t=document.createElement("style");t.id="bridge-info-popup-styles",t.textContent="\n            #bridge-info-popup-overlay {\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100vw;\n                height: 100vh;\n                background-color: rgba(0, 0, 0, 0.5);\n                z-index: 9998;\n                display: none;\n            }\n\n            #bridge-info-popup {\n                position: fixed;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                background-color: #2E3C75;\n                color: #fff;\n                padding: 20px;\n                z-index: 9999;\n                display: none;\n                border-radius: 10px;\n                box-shadow: 0 0 10px #2E3C75;\n                font-size: 24px;\n                font-family: 'Roboto', sans-serif;\n                text-align: center;\n                min-width: 250px;\n                max-width: 30%;\n                flex-direction: column;\n                justify-content: center;\n                align-items: center;\n            }\n\n            #bridge-info-popup-button {\n                margin-top: 24px;\n                width: 150px;\n                background-color: rgba(255, 255, 255, 0.2);\n                color: #fff;\n                border: none;\n                font-size: 24px;\n                padding: 20px;\n                border-radius: 5px;\n                cursor: pointer;\n                font-family: 'Roboto', sans-serif;\n                display: block;\n            }\n\n            #bridge-info-popup-button:hover {\n                background-color: rgba(255, 255, 255, 0.3);\n            }",document.head.appendChild(t)}var r=document.getElementById("bridge-info-popup-overlay");r||((r=document.createElement("div")).id="bridge-info-popup-overlay",document.body.appendChild(r));var n=document.getElementById("bridge-info-popup");n||((n=document.createElement("div")).id="bridge-info-popup"),n.innerText="Oops! It looks like you closed the ad too early, or it isn't available right now.";var o=document.getElementById("bridge-info-popup-button");return o||((o=document.createElement("button")).id="bridge-info-popup-button",o.innerText="OK",n.appendChild(o)),document.body.appendChild(n),new Promise((function(e){o.onclick=function(){n.style.display="none",r.style.display="none",e()},r.style.display="block",n.style.display="flex"}))}().then((function(){e?r._setRewardedState(a.FAILED):r._setInterstitialState(i.FAILED)})):(e?this._setRewardedState(a.FAILED):this._setInterstitialState(i.FAILED),Promise.resolve())}}])&&jr(r.prototype,u),Object.defineProperty(r,"prototype",{writable:!1}),t}();H().mixin(Mr.prototype);const Fr=Mr;function xr(e){return xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xr(e)}function Hr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Zr(n.key),n)}}function Ur(){return Ur="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wr(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Ur.apply(this,arguments)}function zr(e,t){return zr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},zr(e,t)}function Vr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wr(e){return Wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wr(e)}function Yr(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Zr(e){var t=function(e,t){if("object"!=xr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=xr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xr(t)?t:String(t)}function Jr(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Kr(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,qr(e,t,"get"))}function qr(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Xr=new WeakMap,Qr=new WeakSet;function $r(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"result",i=this._getPromiseDecorator(e);return i||(i=this._createPromiseDecorator(e),this._platformSdk.send(t,n).then((function(t){t[o]?r._resolvePromiseDecorator(e):r._rejectPromiseDecorator(e)})).catch((function(t){r._rejectPromiseDecorator(e,t)}))),i.promise}const en=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zr(e,t)}(l,t);var r,n,o,u,c=(o=l,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wr(o);if(u){var r=Wr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===xr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vr(e)}(this,e)});function l(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return Yr(t=Vr(e=c.call.apply(c,[this].concat(o))),r=Qr),r.add(t),function(e,t,r){(t=Zr(t))in e?Object.defineProperty(e,t,{value:true,enumerable:!0,configurable:!0,writable:!0}):e[t]=true}(Vr(e),"_isBannerSupported"),function(e,t,r){Yr(e,t),t.set(e,{writable:!0,value:void 0})}(Vr(e),Xr),e}return r=l,(n=[{key:"platformId",get:function(){return e.VK}},{key:"platformLanguage",get:function(){var e=new URL(window.location.href);if(e.searchParams.has("language")){var t=e.searchParams.get("language"),r=0;try{r=parseInt(t,10)}catch(e){r=0}switch(r){case 0:default:return"ru";case 1:return"uk";case 2:return"be";case 3:return"en"}}return Ur(Wr(l.prototype),"platformLanguage",this)}},{key:"platformPayload",get:function(){var e=new URL(window.location.href);return e.searchParams.has("hash")?e.searchParams.get("hash"):Ur(Wr(l.prototype),"platformPayload",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(Kr(this,Xr)){case"html5_ios":case"html5_android":case"html5_mobile":return p.MOBILE;case"web":return p.DESKTOP;default:return Ur(Wr(l.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPlayerAuthorized",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return"html5_android"===Kr(this,Xr)}},{key:"isAddToFavoritesSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t,r,n,o=this._getPromiseDecorator(v.INITIALIZE);if(!o){o=this._createPromiseDecorator(v.INITIALIZE);var i=new URL(window.location.href);i.searchParams.has("platform")&&(t=this,r=Xr,n=i.searchParams.get("platform"),function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(t,qr(t,r,"set"),n)),pe("https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js").then((function(){ye("vkBridge").then((function(){e._platformSdk=window.vkBridge,e._platformSdk.send("VKWebAppInit").then((function(){e._platformSdk.send("VKWebAppGetUserInfo").then((function(t){t&&(e._playerId=t.id,e._playerName="".concat(t.first_name," ").concat(t.last_name),t.photo_100&&e._playerPhotos.push(t.photo_100),t.photo_200&&e._playerPhotos.push(t.photo_200),t.photo_max_orig&&e._playerPhotos.push(t.photo_max_orig))})).finally((function(){e._isInitialized=!0,e._defaultStorageType=f.PLATFORM_INTERNAL,e._resolvePromiseDecorator(v.INITIALIZE)}))}))}))}))}return o.promise}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||Ur(Wr(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL||Ur(Wr(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===f.PLATFORM_INTERNAL?new Promise((function(t,o){var i=Array.isArray(e)?e:[e];n._platformSdk.send("VKWebAppStorageGet",{keys:i}).then((function(n){if(Array.isArray(e)){var o=[];return i.forEach((function(e){var t=n.keys.findIndex((function(t){return t.key===e}));if(t<0)o.push(null);else if(""!==n.keys[t].value){var i=n.keys[t].value;if(r)try{i=JSON.parse(n.keys[t].value)}catch(e){}o.push(i)}else o.push(null)})),void t(o)}if(""!==n.keys[0].value){var a=n.keys[0].value;if(r)try{a=JSON.parse(n.keys[0].value)}catch(e){}t(a)}else t(null)})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?o(e.error_data.error_reason):o()}))})):Ur(Wr(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;if(r===f.PLATFORM_INTERNAL){if(Array.isArray(e)){for(var o=[],i=0;i<e.length;i++){var a={key:e[i],value:t[i]};"string"!=typeof t[i]&&(a.value=JSON.stringify(t[i])),o.push(this._platformSdk.send("VKWebAppStorageSet",a))}return Promise.all(o)}var s={key:e,value:t};return"string"!=typeof t&&(s.value=JSON.stringify(t)),new Promise((function(e,t){n._platformSdk.send("VKWebAppStorageSet",s).then((function(){e()})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?t(e.error_data.error_reason):t()}))}))}return Ur(Wr(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){if(t===f.PLATFORM_INTERNAL){if(Array.isArray(e)){for(var r=[],n=0;n<e.length;n++)r.push(this.setDataToStorage(e[n],"",t));return Promise.all(r)}return this.setDataToStorage(e,"",t)}return Ur(Wr(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(e){var t=this;this._platformSdk.send("VKWebAppShowBannerAd",{banner_location:e}).then((function(e){e.result?t._setBannerState(s.SHOWN):t._setBannerState(s.FAILED)})).catch((function(){t._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.send("VKWebAppHideBannerAd").then((function(t){t.result&&e._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"interstitial"}).then((function(t){t.result&&e._setInterstitialState(i.OPENED)})).finally((function(){e._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"interstitial"}).then((function(t){e._setInterstitialState(t.result?i.CLOSED:i.FAILED)})).catch((function(){e._setInterstitialState(i.FAILED)}))}))}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(t){t.result&&e._setRewardedState(a.OPENED)})).finally((function(){e._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(t){t.result?(e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)})).catch((function(){e._setRewardedState(a.FAILED)}))}))}},{key:"inviteFriends",value:function(){return Jr(this,Qr,$r).call(this,v.INVITE_FRIENDS,"VKWebAppShowInviteBox",{},"success")}},{key:"joinCommunity",value:function(e){if(!e||!e.groupId)return Promise.reject();var t=e.groupId;return"string"==typeof t&&(t=parseInt(t,10),Number.isNaN(t))?Promise.reject():Jr(this,Qr,$r).call(this,v.JOIN_COMMUNITY,"VKWebAppJoinGroup",{group_id:t}).then((function(){window.open("https://vk.com/public".concat(t))}))}},{key:"share",value:function(e){var t={};return e&&e.link&&(t.link=e.link),Jr(this,Qr,$r).call(this,v.SHARE,"VKWebAppShare",t,"type")}},{key:"addToHomeScreen",value:function(){return this.isAddToHomeScreenSupported?Jr(this,Qr,$r).call(this,v.ADD_TO_HOME_SCREEN,"VKWebAppAddToHomeScreen"):Promise.reject()}},{key:"addToFavorites",value:function(){return Jr(this,Qr,$r).call(this,v.ADD_TO_FAVORITES,"VKWebAppAddToFavorites")}},{key:"clipboardWrite",value:function(e){return Jr(this,Qr,$r).call(this,v.CLIPBOARD_WRITE,"VKWebAppCopyText",{text:e})}}])&&Hr(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Fr);function tn(e){return tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tn(e)}function rn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=an(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function on(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,an(n.key),n)}}function an(e){var t=function(e,t){if("object"!=tn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=tn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==tn(t)?t:String(t)}function sn(){return sn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ln(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},sn.apply(this,arguments)}function un(e,t){return un=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},un(e,t)}function cn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ln(e){return ln=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ln(e)}function fn(e,t,r){pn(e,t),t.set(e,r)}function pn(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function dn(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function hn(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,mn(e,t,"set"),r),r}function yn(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,mn(e,t,"get"))}function mn(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var vn=new WeakMap,_n=new WeakMap,gn=new WeakMap,bn=new WeakMap,Sn=new WeakSet;function En(){var e=this;return new Promise((function(t){var r=!1;e._options&&e._options.useSignedData&&(r=e._options.useSignedData),e._platformSdk.getPlayer({signed:r}).then((function(t){e._playerId=t.getUniqueID(),e._isPlayerAuthorized=t.isAuthorized(),e._defaultStorageType=e._isPlayerAuthorized?f.PLATFORM_INTERNAL:f.LOCAL_STORAGE;var n=t.getName();""!==n&&(e._playerName=n),e._playerPhotos=[];var o=t.getPhoto("small"),i=t.getPhoto("medium"),a=t.getPhoto("large");return o&&e._playerPhotos.push(o),i&&e._playerPhotos.push(i),a&&e._playerPhotos.push(a),e._playerExtra={payingStatus:t.getPayingStatus()},r&&(e._playerExtra.signature=t.signature),hn(e,_n,t),t.getData()})).then((function(t){e._platformStorageCachedData=t})).finally((function(){t()}))}))}const Pn=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&un(e,t)}(l,t);var r,n,o,u,c=(o=l,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ln(o);if(u){var r=ln(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===tn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return cn(e)}(this,e)});function l(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return pn(t=cn(e=c.call.apply(c,[this].concat(o))),r=Sn),r.add(t),fn(cn(e),vn,{writable:!0,value:!1}),fn(cn(e),_n,{writable:!0,value:null}),fn(cn(e),gn,{writable:!0,value:null}),fn(cn(e),bn,{writable:!0,value:null}),e}return r=l,(n=[{key:"platformId",get:function(){return e.YANDEX}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.lang.toLowerCase():sn(ln(l.prototype),"platformLanguage",this)}},{key:"platformTld",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.tld.toLowerCase():sn(ln(l.prototype),"platformTld",this)}},{key:"isPlatformGetAllGamesSupported",get:function(){return!0}},{key:"isPlatformGetGameByIdSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(this._platformSdk&&this._platformSdk.deviceInfo.type){case p.DESKTOP:return p.DESKTOP;case p.MOBILE:return p.MOBILE;case p.TABLET:return p.TABLET;case p.TV:return p.TV;default:return sn(ln(l.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return yn(this,vn)}},{key:"isRateSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"leaderboardsType",get:function(){return y}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isRemoteConfigSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),pe("/sdk.js").then((function(){ye("YaGames","init").then((function(){window.YaGames.init().then((function(t){var r;e._platformSdk=t,hn(e,bn,dn(e,Sn,En).call(e));var n=null===(r=e._platformSdk.features.PluginEngineDataReporterAPI)||void 0===r?void 0:r.report({engineName:"",engineVersion:"",pluginName:"playgama-bridge",pluginVersion:"1.25.0-preview.1"}),o=e._platformSdk.shortcut.canShowPrompt().then((function(t){hn(e,vn,t.canShow)})),i=new Promise((function(e){setTimeout(e,1e3)})),a=Promise.race([o,i]),u=e._platformSdk.getPayments().then((function(t){hn(e,gn,t)}));e._isBannerSupported=!0;var c=e._platformSdk.adv.getBannerAdvStatus().then((function(t){t.stickyAdvIsShowing&&e._setBannerState(s.SHOWN)}));Promise.all([n,a,u,c]).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)}))}))}))}))),t.promise}},{key:"sendMessage",value:function(e){switch(e){case d.GAME_READY:var t;return null===(t=this._platformSdk.features.LoadingAPI)||void 0===t||t.ready(),Promise.resolve();case d.GAMEPLAY_STARTED:var r;return null===(r=this._platformSdk.features.GameplayAPI)||void 0===r||r.start(),Promise.resolve();case d.GAMEPLAY_STOPPED:var n;return null===(n=this._platformSdk.features.GameplayAPI)||void 0===n||n.stop(),Promise.resolve();default:return sn(ln(l.prototype),"sendMessage",this).call(this,e)}}},{key:"getServerTime",value:function(){var e=this;return new Promise((function(t){t(e._platformSdk.serverTime())}))}},{key:"getAllGames",value:function(){var e=this;return new Promise((function(t,r){e._platformSdk.features.GamesAPI.getAllGames().then((function(e){var r=e.games;t(r)})).catch(r)}))}},{key:"getGameById",value:function(e){var t=this;return null!=e&&e.gameId?new Promise((function(r,n){t._platformSdk.features.GamesAPI.getGameByID(null==e?void 0:e.gameId).then((function(e){var t=e.game,n=e.isAvailable;r(nn(nn({},t),{},{isAvailable:n}))})).catch(n)})):Promise.reject(new Error("Provide gameId"))}},{key:"authorizePlayer",value:function(){var e=this,t=this._getPromiseDecorator(v.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(v.AUTHORIZE_PLAYER),this._isPlayerAuthorized?(hn(this,bn,dn(this,Sn,En).call(this)),yn(this,bn).then((function(){e._resolvePromiseDecorator(v.AUTHORIZE_PLAYER)}))):this._platformSdk.auth.openAuthDialog().then((function(){hn(e,bn,dn(e,Sn,En).call(e)),yn(e,bn).then((function(){e._resolvePromiseDecorator(v.AUTHORIZE_PLAYER)}))})).catch((function(t){e._rejectPromiseDecorator(v.AUTHORIZE_PLAYER,t)}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||sn(ln(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL?this._isPlayerAuthorized:sn(ln(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===f.PLATFORM_INTERNAL?this._isPlayerAuthorized?yn(this,bn).then((function(){return new Promise((function(t){if(Array.isArray(e)){for(var r=[],o=0;o<e.length;o++){var i=void 0===n._platformStorageCachedData[e[o]]?null:n._platformStorageCachedData[e[o]];r.push(i)}t(r)}else t(void 0===n._platformStorageCachedData[e]?null:n._platformStorageCachedData[e])}))})):Promise.reject():sn(ln(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===f.PLATFORM_INTERNAL?this._isPlayerAuthorized?yn(this,bn).then((function(){return new Promise((function(r,o){var i=null!==n._platformStorageCachedData?nn({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;yn(n,_n).setData(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(e){o(e)}))}))})):Promise.reject():sn(ln(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===f.PLATFORM_INTERNAL?this._isPlayerAuthorized?yn(this,bn).then((function(){return new Promise((function(t,n){var o=null!==r._platformStorageCachedData?nn({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];yn(r,_n).setData(o).then((function(){r._platformStorageCachedData=o,t()})).catch((function(e){n(e)}))}))})):Promise.reject():sn(ln(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(){var e=this;this._platformSdk.adv.showBannerAdv().then((function(t){t.stickyAdvIsShowing?e._setBannerState(s.SHOWN):e._setBannerState(s.FAILED)})).catch((function(){e._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.adv.hideBannerAdv().then((function(t){t.stickyAdvIsShowing||e._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.adv.showFullscreenAdv({callbacks:{onOpen:function(){e._setInterstitialState(i.OPENED)},onClose:function(t){t?e._setInterstitialState(i.CLOSED):e._setInterstitialState(i.FAILED)},onError:function(e){console.error(e)}}})}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.adv.showRewardedVideo({callbacks:{onOpen:function(){e._setRewardedState(a.OPENED)},onRewarded:function(){e._setRewardedState(a.REWARDED)},onClose:function(){e._setRewardedState(a.CLOSED)},onError:function(){e._setRewardedState(a.FAILED)}}})}},{key:"checkAdBlock",value:function(){return new Promise((function(e){e(!1)}))}},{key:"addToHomeScreen",value:function(){var e=this;if(!this.isAddToHomeScreenSupported)return Promise.reject();var t=this._getPromiseDecorator(v.ADD_TO_HOME_SCREEN);return t||(t=this._createPromiseDecorator(v.ADD_TO_HOME_SCREEN),this._platformSdk.shortcut.showPrompt().then((function(t){"accepted"!==t.outcome?e._rejectPromiseDecorator(v.ADD_TO_HOME_SCREEN):e._resolvePromiseDecorator(v.ADD_TO_HOME_SCREEN)})).catch((function(t){e._rejectPromiseDecorator(v.ADD_TO_HOME_SCREEN,t)}))),t.promise}},{key:"rate",value:function(){var e=this,t=this._getPromiseDecorator(v.RATE);return t||(t=this._createPromiseDecorator(v.RATE),this._platformSdk.feedback.canReview().then((function(t){t.value?e._platformSdk.feedback.requestReview().then((function(t){t.feedbackSent?e._resolvePromiseDecorator(v.RATE):e._rejectPromiseDecorator(v.RATE)})).catch((function(t){e._rejectPromiseDecorator(v.RATE,t)})):e._rejectPromiseDecorator(v.RATE,t.reason)})).catch((function(t){e._rejectPromiseDecorator(v.RATE,t)}))),t.promise}},{key:"leaderboardsSetScore",value:function(e,t){var r=this;if(!this._isPlayerAuthorized)return Promise.reject();var n=this._getPromiseDecorator(v.LEADERBOARDS_SET_SCORE);return n||(n=this._createPromiseDecorator(v.LEADERBOARDS_SET_SCORE),this._platformSdk.leaderboards.setScore(e,t).then((function(){r._resolvePromiseDecorator(v.LEADERBOARDS_SET_SCORE)})).catch((function(e){r._rejectPromiseDecorator(v.LEADERBOARDS_SET_SCORE,e)}))),n.promise}},{key:"leaderboardsGetEntries",value:function(e){var t=this,r=this._getPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES);if(!r){r=this._createPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES);var n={quantityTop:20};this._isPlayerAuthorized&&(n.includeUser=!0,n.quantityAround=3),this._platformSdk.leaderboards.getEntries(e,n).then((function(e){var r;r=e&&e.entries.length>0?e.entries.map((function(e){return{id:e.player.uniqueID,name:e.player.publicName,score:e.score,rank:e.rank,photo:e.player.getAvatarSrc("large")}})):[],t._resolvePromiseDecorator(v.LEADERBOARDS_GET_ENTRIES,r)})).catch((function(e){t._rejectPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES,e)}))}return r.promise}},{key:"paymentsPurchase",value:function(e){var t=this;if(!yn(this,gn))return Promise.reject();var r=this._paymentsGetProductPlatformData(e);r||(r={id:e});var n=this._getPromiseDecorator(v.PURCHASE);return n||(n=this._createPromiseDecorator(v.PURCHASE),yn(this,gn).purchase(r).then((function(r){var n=nn({id:e},r.purchaseData);delete n.productID,t._paymentsPurchases.push(n),t._resolvePromiseDecorator(v.PURCHASE,n)})).catch((function(e){t._rejectPromiseDecorator(v.PURCHASE,e)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this;if(!yn(this,gn))return Promise.reject();var r=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(v.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(v.CONSUME_PURCHASE),yn(this,gn).consumePurchase(this._paymentsPurchases[r].purchaseToken).then((function(){t._paymentsPurchases.splice(r,1),t._resolvePromiseDecorator(v.CONSUME_PURCHASE,{id:e})})).catch((function(e){t._rejectPromiseDecorator(v.CONSUME_PURCHASE,e)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var e=this;if(!yn(this,gn))return Promise.reject();var t=this._paymentsGetProductsPlatformData(),r=this._getPromiseDecorator(v.GET_CATALOG);return r||(r=this._createPromiseDecorator(v.GET_CATALOG),yn(this,gn).getCatalog().then((function(r){var n=t.map((function(e){var t,n=r.find((function(t){return t.id===e.id}));return{id:e.id,title:n.title,description:n.description,imageURI:n.imageURI,price:n.price,priceCurrencyCode:n.priceCurrencyCode,priceValue:n.priceValue,priceCurrencyImage:null===(t=n.getPriceCurrencyImage)||void 0===t?void 0:t.call(n,"medium")}}));e._resolvePromiseDecorator(v.GET_CATALOG,n)})).catch((function(t){e._rejectPromiseDecorator(v.GET_CATALOG,t)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this;if(!yn(this,gn))return Promise.reject();var t=this._getPromiseDecorator(v.GET_PURCHASES);return t||(t=this._createPromiseDecorator(v.GET_PURCHASES),yn(this,gn).getPurchases().then((function(t){var r=e._paymentsGetProductsPlatformData();e._paymentsPurchases=t.map((function(e){var t=nn({id:r.find((function(t){return t.id===e.productID})).id},e.purchaseData);return delete t.productID,t})),e._resolvePromiseDecorator(v.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(v.GET_PURCHASES,t)}))),t.promise}},{key:"getRemoteConfig",value:function(e){var t=this;if(!this._platformSdk)return Promise.reject();var r=e;r||(r={}),r.clientFeatures||(r.clientFeatures=[]);var n=this._getPromiseDecorator(v.GET_REMOTE_CONFIG);return n||(n=this._createPromiseDecorator(v.GET_REMOTE_CONFIG),this._platformSdk.getFlags(r).then((function(e){t._resolvePromiseDecorator(v.GET_REMOTE_CONFIG,e)})).catch((function(e){t._rejectPromiseDecorator(v.GET_REMOTE_CONFIG,e)}))),n.promise}},{key:"clipboardWrite",value:function(e){var t=this,r=this._getPromiseDecorator(v.CLIPBOARD_WRITE);return r||(r=this._createPromiseDecorator(v.CLIPBOARD_WRITE),this._platformSdk.clipboard.writeText(e).then((function(){t._resolvePromiseDecorator(v.CLIPBOARD_WRITE,!0)})).catch((function(e){t._rejectPromiseDecorator(v.CLIPBOARD_WRITE,e)}))),r.promise}}])&&on(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Fr);function wn(e){return wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wn(e)}function An(){An=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new T(n||[]);return o(a,"_invoke",{value:O(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",m={};function v(){}function _(){}function g(){}var b={};c(b,a,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(R([])));E&&E!==r&&n.call(E,a)&&(b=E);var P=g.prototype=v.prototype=Object.create(b);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,i,a,s){var u=f(e[o],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==wn(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=k(s,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:d,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(wn(t)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=c(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(P),e},t.awrap=function(e){return{__await:e}},w(A.prototype),c(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(P),c(P,u,"Generator"),c(P,a,(function(){return this})),c(P,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function On(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function kn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){On(i,n,o,a,s,"next",e)}function s(e){On(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Dn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function In(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Rn(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Tn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Rn(n.key),n)}}function Rn(e){var t=function(e,t){if("object"!=wn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=wn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==wn(t)?t:String(t)}function Ln(){return Ln="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cn(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Ln.apply(this,arguments)}function jn(e,t){return jn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jn(e,t)}function Nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cn(e){return Cn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Cn(e)}function Bn(e,t){Mn(e,t),t.add(e)}function Gn(e,t,r){Mn(e,t),t.set(e,r)}function Mn(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Fn(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function xn(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Un(e,t,"set"),r),r}function Hn(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Un(e,t,"get"))}function Un(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var zn="https://cdn.xsolla.net/payments-bucket-prod/embed/1.5.0/widget.min.js",Vn="https://store.xsolla.com/api/v2/project/",Wn=new WeakMap,Yn=new WeakMap,Zn=new WeakMap,Jn=new WeakSet,Kn=new WeakSet,qn=new WeakSet,Xn=new WeakSet;function Qn(){var e=this;return Hn(this,Yn)?new Promise((function(t,r){e._platformSdk.user.getUser().then((function(n){n?(e._isPlayerAuthorized=!0,n.username&&(e._playerName=n.username),n.profilePictureUrl&&(e._playerPhotos=[n.profilePictureUrl]),e._playerExtra=n,delete e._playerExtra.username,delete e._playerExtra.profilePictureUrl,e._options.useUserToken?e._platformSdk.user.getUserToken().then((function(t){e._playerExtra.jwt=t})).finally((function(){t()})):t()):r()})).catch((function(e){r(e)}))})):Promise.reject()}function $n(){return eo.apply(this,arguments)}function eo(){return(eo=kn(An().mark((function e(){return An().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.XPayStationWidget){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,pe(zn);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function to(){return ro.apply(this,arguments)}function ro(){return(ro=kn(An().mark((function e(){return An().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._platformSdk.user.getXsollaUserToken();case 2:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function no(e,t,r){return oo.apply(this,arguments)}function oo(){return(oo=kn(An().mark((function e(t,r,n){var o;return An().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Vn,"/").concat(t,"/order/").concat(r),{headers:{Authorization:"Bearer ".concat(n)}});case 2:if((o=e.sent).ok){e.next=5;break}throw new Error("Xsolla order HTTP ".concat(o.status));case 5:return e.abrupt("return",o.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const io=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jn(e,t)}(h,t);var r,n,o,c,l=(o=h,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Cn(o);if(c){var r=Cn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===wn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Nn(e)}(this,e)});function h(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Bn(Nn(e=l.call.apply(l,[this].concat(r))),Xn),Bn(Nn(e),qn),Bn(Nn(e),Kn),Bn(Nn(e),Jn),Gn(Nn(e),Wn,{writable:!0,value:!1}),Gn(Nn(e),Yn,{writable:!0,value:!1}),Gn(Nn(e),Zn,{writable:!0,value:{adStarted:function(){Hn(Nn(e),Wn)?e._setRewardedState(a.OPENED):e._setInterstitialState(i.OPENED)},adFinished:function(){Hn(Nn(e),Wn)?(e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setInterstitialState(i.CLOSED)},adError:function(){Hn(Nn(e),Wn)?e._setRewardedState(a.FAILED):e._setInterstitialState(i.FAILED)}}}),e}return r=h,(n=[{key:"platformId",get:function(){return e.CRAZY_GAMES}},{key:"platformLanguage",get:function(){return Hn(this,Yn)?this._platformSdk.user.systemInfo.countryCode.toLowerCase():Ln(Cn(h.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return Hn(this,Yn)}},{key:"isPaymentsSupported",get:function(){return!0===Hn(this,Yn)}},{key:"deviceType",get:function(){if(Hn(this,Yn)){var e=this._platformSdk.user.systemInfo.device.type.toLowerCase();if([p.DESKTOP,p.MOBILE,p.TABLET].includes(e))return e}return Ln(Cn(h.prototype),"deviceType",this)}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),pe("https://sdk.crazygames.com/crazygames-sdk-v3.js").then((function(){ye("CrazyGames","SDK","init").then((function(){e._platformSdk=window.CrazyGames.SDK,e._defaultStorageType=f.PLATFORM_INTERNAL,e._isBannerSupported=!0,e._platformSdk.init().then((function(){xn(e,Yn,e._platformSdk.user.isUserAccountAvailable);var t=Fn(e,Jn,Qn).call(e);e.options.xsollaProjectId&&Fn(e,Kn,$n).call(e),Promise.all([t]).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)}))}))}))}))),t.promise}},{key:"authorizePlayer",value:function(){var e=this;if(!Hn(this,Yn))return Promise.reject();if(this._isPlayerAuthorized)return Promise.resolve();var t=this._getPromiseDecorator(v.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(v.AUTHORIZE_PLAYER),this._platformSdk.user.showAuthPrompt().then((function(){Fn(e,Jn,Qn).call(e).then((function(){e._resolvePromiseDecorator(v.AUTHORIZE_PLAYER)}))})).catch((function(t){e._rejectPromiseDecorator(v.AUTHORIZE_PLAYER,t)}))),t.promise}},{key:"sendMessage",value:function(e){switch(e){case d.IN_GAME_LOADING_STARTED:return this._platformSdk.game.loadingStart(),Promise.resolve();case d.IN_GAME_LOADING_STOPPED:return this._platformSdk.game.loadingStop(),Promise.resolve();case d.GAMEPLAY_STARTED:return this._platformSdk.game.gameplayStart(),Promise.resolve();case d.GAMEPLAY_STOPPED:return this._platformSdk.game.gameplayStop(),Promise.resolve();case d.PLAYER_GOT_ACHIEVEMENT:return this._platformSdk.game.happytime(),Promise.resolve();default:return Ln(Cn(h.prototype),"sendMessage",this).call(this,e)}}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||Ln(Cn(h.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL||Ln(Cn(h.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===f.PLATFORM_INTERNAL?new Promise((function(t){if(Array.isArray(e)){var o=[];return e.forEach((function(e){var t=n._platformSdk.data.getItem(e);if(r)try{t=JSON.parse(t)}catch(e){}o.push(t)})),void t(o)}var i=n._platformSdk.data.getItem(e);if(r)try{i=JSON.parse(i)}catch(e){}t(i)})):Ln(Cn(h.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===f.PLATFORM_INTERNAL?new Promise((function(r){if(Array.isArray(e)){for(var o=0;o<e.length;o++){var i=t[o];"string"!=typeof t[o]&&(i=JSON.stringify(t[o])),n._platformSdk.data.setItem(e[o],i)}r()}else{var a=t;"string"!=typeof t&&(a=JSON.stringify(t)),n._platformSdk.data.setItem(e,a),r()}})):Ln(Cn(h.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===f.PLATFORM_INTERNAL?Array.isArray(e)?(e.forEach((function(e){return r._platformSdk.data.removeItem(e)})),Promise.resolve()):(this._platformSdk.data.removeItem(e),Promise.resolve()):Ln(Cn(h.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(e){var t=this,r=document.getElementById(u);r||(r=de(e)),r.style.display="block",this._platformSdk.banner.requestResponsiveBanner([u]).then((function(){t._setBannerState(s.SHOWN)})).catch((function(){t._setBannerState(s.FAILED),r.style.display="none"}))}},{key:"hideBanner",value:function(){var e=document.getElementById(u);e&&(e.style.display="none"),this._platformSdk.banner.clearAllBanners(),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(){xn(this,Wn,!1),this._platformSdk.ad.requestAd("midgame",Hn(this,Zn))}},{key:"showRewarded",value:function(){xn(this,Wn,!0),this._platformSdk.ad.requestAd("rewarded",Hn(this,Zn))}},{key:"checkAdBlock",value:function(){var e=this;return new Promise((function(t){e._platformSdk.ad.hasAdblock().then((function(e){t(e)}))}))}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._paymentsGetProductPlatformData(e);r||(r={id:e});var n=r.platformProductId||r.id,o=this._getPromiseDecorator(v.PURCHASE);return o||(o=this._createPromiseDecorator(v.PURCHASE),Fn(this,Kn,$n).call(this).then((function(){return Fn(t,qn,to).call(t)})).then((function(e){var o=window.XPayStationWidget;if(!o)throw new Error("Xsolla Pay Station widget not loaded");o.init({access_token:e,sandbox:t.options.isSandbox||!1,childWindow:{target:"_blank"},settings:{external_id:n}});var i=!1;o.on(o.eventTypes.STATUS,(function(o,a){try{var s=a&&a.paymentInfo||{};if(s.status&&/done|charged|success/i.test(String(s.status))){var u=s.order_id||s.invoice;if(!u)return;Fn(t,Xn,no).call(t,t.options.xsollaProjectId,u,e).then((function(e){t._platformSdk.analytics.trackOrder("xsolla",e);var o=In({id:r.id,sku:n,orderId:u},e);t._paymentsPurchases.push(o),i||(i=!0,t._resolvePromiseDecorator(v.PURCHASE,o))})).catch((function(e){i||t._rejectPromiseDecorator(v.PURCHASE,e)}))}}catch(e){i||t._rejectPromiseDecorator(v.PURCHASE,e)}})),o.on("close",(function(){i||t._rejectPromiseDecorator(v.PURCHASE,new Error("Purchase canceled/closed"))})),o.open()})).catch((function(e){t._rejectPromiseDecorator(v.PURCHASE,e)}))),o.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject(new Error("No platform products available"));var r=this._getPromiseDecorator(v.GET_CATALOG);return r||(r=this._createPromiseDecorator(v.GET_CATALOG),Fn(this,qn,to).call(this).then((function(t){return fetch("".concat(Vn,"/").concat(e.options.xsollaProjectId,"/items?limit=50"),{headers:{Authorization:"Bearer ".concat(t)}})})).then((function(e){if(!e.ok)throw new Error("Xsolla catalog HTTP ".concat(e.status));return e.json()})).then((function(r){var n=new Map((r.items||[]).map((function(e){return[e.sku,e]}))),o=t.map((function(e){var t,r,o,i,a,s,u,c,l,f,p=e.platformProductId||e.id,d=n.get(p);return{id:e.id,name:null!==(t=null!==(r=null==d?void 0:d.name)&&void 0!==r?r:e.name)&&void 0!==t?t:e.id,description:null!==(o=null!==(i=null==d?void 0:d.description)&&void 0!==i?i:e.description)&&void 0!==o?o:"",price:null!==(a=null==d||null===(s=d.price)||void 0===s?void 0:s.amount)&&void 0!==a?a:null,priceCurrencyCode:null!==(u=null==d||null===(c=d.price)||void 0===c?void 0:c.currency)&&void 0!==u?u:null,priceValue:null!==(l=null==d||null===(f=d.price)||void 0===f?void 0:f.amount)&&void 0!==l?l:null}}));e._resolvePromiseDecorator(v.GET_CATALOG,o)})).catch((function(t){e._rejectPromiseDecorator(v.GET_CATALOG,t)}))),r.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(t<0)return Promise.reject(new Error("No such purchase to consume"));var r=this._getPromiseDecorator(v.CONSUME_PURCHASE);if(!r){r=this._createPromiseDecorator(v.CONSUME_PURCHASE);try{this._paymentsPurchases.splice(t,1),this._resolvePromiseDecorator(v.CONSUME_PURCHASE,{id:e})}catch(e){this._rejectPromiseDecorator(v.CONSUME_PURCHASE,e)}}return r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(v.GET_PURCHASES);return t||(t=this._createPromiseDecorator(v.GET_PURCHASES),Fn(this,qn,to).call(this).then((function(t){return fetch("".concat(Vn,"/").concat(e.options.xsollaProjectId,"/user/inventory/items"),{headers:{Authorization:"Bearer ".concat(t)}})})).then((function(e){if(!e.ok)throw new Error("Xsolla inventory HTTP ".concat(e.status));return e.json()})).then((function(t){var r=e._paymentsGetProductsPlatformData()||[];e._paymentsPurchases=(t.items||[]).map((function(e){var t=r.find((function(t){return t.id===e.sku}));return t?In({id:t.id},e):null})).filter(Boolean),e._resolvePromiseDecorator(v.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(v.GET_PURCHASES,t)}))),t.promise}}])&&Tn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),h}(Fr);function ao(e){return ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ao(e)}function so(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function uo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?so(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=lo(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):so(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function co(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lo(n.key),n)}}function lo(e){var t=function(e,t){if("object"!=ao(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ao(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ao(t)?t:String(t)}function fo(){return fo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yo(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},fo.apply(this,arguments)}function po(e,t){return po=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},po(e,t)}function ho(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yo(e){return yo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yo(e)}var mo=new WeakSet;function vo(){var e=this;return this._playerId=this._platformSdk.options.player_id,this._isPlayerAuthorized="false"===this._platformSdk.options.guest,new Promise((function(t){e._platformSdk.getUsers([e._playerId],(function(r){if(r&&1===r.length){var n=r[0];e._playerName=n.full_name,""!==n.avatar&&(e._playerPhotos=[n.avatar])}t()}))}))}const _o=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&po(e,t)}(c,t);var r,n,o,s,u=(o=c,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=yo(o);if(s){var r=yo(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ao(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ho(e)}(this,e)});function c(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=ho(e=u.call.apply(u,[this].concat(o))),r=mo),r.add(t),e}return r=c,(n=[{key:"platformId",get:function(){return e.ABSOLUTE_GAMES}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),pe("https://unpkg.com/@agru/sdk/dist/umd/index.min.js").then((function(){e._platformSdk=new window.AgRuSdk,e._platformSdk.on(window.AgRuSdkMethods.ShowCampaign,(function(t,r){"rewarded"===t.type?null===r?t.status?e._setRewardedState(a.OPENED):(t.reward&&e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED):null===r?t.status?e._setInterstitialState(i.OPENED):e._setInterstitialState(i.CLOSED):e._setInterstitialState(i.FAILED)}));var t=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}(e,mo,vo).call(e);Promise.all([t]).finally((function(){e._isInitialized=!0,e._defaultStorageType=e._isPlayerAuthorized?f.PLATFORM_INTERNAL:f.LOCAL_STORAGE,e._resolvePromiseDecorator(v.INITIALIZE)}))}))),t.promise}},{key:"authorizePlayer",value:function(){var e=this;if(this._isPlayerAuthorized)return Promise.resolve();var t=this._getPromiseDecorator(v.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(v.AUTHORIZE_PLAYER),this._platformSdk.authorize((function(t,r){null===r?e._resolvePromiseDecorator(v.AUTHORIZE_PLAYER):e._rejectPromiseDecorator(v.AUTHORIZE_PLAYER,r)}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||fo(yo(c.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL?this._isPlayerAuthorized:fo(yo(c.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===f.PLATFORM_INTERNAL?new Promise((function(t,r){if(n._platformStorageCachedData){if(Array.isArray(e)){for(var o=[],i=0;i<e.length;i++){var a=void 0===n._platformStorageCachedData[e[i]]?null:n._platformStorageCachedData[e[i]];o.push(a)}return void t(o)}t(void 0===n._platformStorageCachedData[e]?null:n._platformStorageCachedData[e])}else n._isPlayerAuthorized?n._platformSdk.getSaveData((function(o,i){if(null===i){if(n._platformStorageCachedData=o||{},Array.isArray(e)){for(var a=[],s=0;s<e.length;s++){var u=void 0===n._platformStorageCachedData[e[s]]?null:n._platformStorageCachedData[e[s]];a.push(u)}return void t(a)}t(void 0===n._platformStorageCachedData[e]?null:n._platformStorageCachedData[e])}else r(i)})):r()})):fo(yo(c.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===f.PLATFORM_INTERNAL?new Promise((function(r,o){if(n._isPlayerAuthorized){var i=null!==n._platformStorageCachedData?uo({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n._platformSdk.setSaveData(i,(function(e,t){null===t&&(n._platformStorageCachedData=i,r()),o(t)}))}else o()})):fo(yo(c.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===f.PLATFORM_INTERNAL?new Promise((function(t,n){if(r._isPlayerAuthorized){var o=null!==r._platformStorageCachedData?uo({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];r._platformSdk.setSaveData(o,(function(e,i){null===i&&(r._platformStorageCachedData=o,t()),n(i)}))}else n()})):fo(yo(c.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){this._platformSdk.showCampaign("default")}},{key:"showRewarded",value:function(){this._platformSdk.showCampaign("rewarded")}}])&&co(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(Fr);function go(e){return go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},go(e)}function bo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,So(n.key),n)}}function So(e){var t=function(e,t){if("object"!=go(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=go(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==go(t)?t:String(t)}function Eo(e,t){return Eo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Eo(e,t)}function Po(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wo(e){return wo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wo(e)}function Ao(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,ko(e,t,"set"),r),r}function Oo(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ko(e,t,"get"))}function ko(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Do=new WeakMap;const Io=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Eo(e,t)}(p,t);var r,n,o,c,l=(o=p,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=wo(o);if(c){var r=wo(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===go(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Po(e)}(this,e)});function p(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=Po(e=l.call.apply(l,[this].concat(i))),n={writable:!0,value:!1},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r=Do),r.set(t,n),e}return r=p,(n=[{key:"platformId",get:function(){return e.GAME_DISTRIBUTION}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isMinimumDelayBetweenInterstitialEnabled",get:function(){return!1}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(v.INITIALIZE);if(!e)if(e=this._createPromiseDecorator(v.INITIALIZE),this._options&&"string"==typeof this._options.gameId){var t=this;window.GD_OPTIONS={gameId:this._options.gameId,onEvent:function(e){switch(e.name){case"SDK_READY":t._platformSdk=window.gdsdk,t._isInitialized=!0,t.showInterstitial(),t._resolvePromiseDecorator(v.INITIALIZE);break;case"SDK_GAME_START":Oo(t,Do)?(t._setRewardedState(a.CLOSED),t._platformSdk.preloadAd("rewarded")):t._setInterstitialState(i.CLOSED);break;case"SDK_GAME_PAUSE":Oo(t,Do)?t._setRewardedState(a.OPENED):t._setInterstitialState(i.OPENED);break;case"SDK_REWARDED_WATCH_COMPLETE":t._setRewardedState(a.REWARDED)}}},this._defaultStorageType=f.LOCAL_STORAGE,this._isBannerSupported=!0,pe("https://html5.api.gamedistribution.com/main.min.js")}else this._rejectPromiseDecorator(v.INITIALIZE,S);return e.promise}},{key:"showBanner",value:function(e){var t=this,r=document.getElementById(u);r||(r=de(e)),r.style.display="block",this._platformSdk.showAd("display",{containerId:u}).then((function(){t._setBannerState(s.SHOWN)})).catch((function(){t._setBannerState(s.FAILED),r.style.display="none"}))}},{key:"hideBanner",value:function(){var e=document.getElementById(u);e&&(e.style.display="none"),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(){var e=this;Ao(this,Do,!1),this._platformSdk?this._platformSdk.showAd().catch((function(){e._setInterstitialState(i.FAILED)})):this._setInterstitialState(i.FAILED)}},{key:"preloadRewarded",value:function(){this._platformSdk.preloadAd("rewarded")}},{key:"showRewarded",value:function(){var e=this;Ao(this,Do,!0),this._platformSdk?this._platformSdk.showAd("rewarded").catch((function(){e._setRewardedState(a.FAILED)})):this._setRewardedState(a.FAILED)}}])&&bo(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}(Fr);function To(e){return To="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},To(e)}function Ro(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xo(n.key),n)}}function Lo(){return Lo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Co(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Lo.apply(this,arguments)}function jo(e,t){return jo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},jo(e,t)}function No(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Co(e){return Co=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Co(e)}function Bo(e,t){Mo(e,t),t.add(e)}function Go(e,t,r){Mo(e,t),t.set(e,r)}function Mo(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Fo(e,t,r){return(t=xo(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xo(e){var t=function(e,t){if("object"!=To(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=To(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==To(t)?t:String(t)}function Ho(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Uo(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,zo(e,t,"get"))}function zo(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Vo="AUTHORIZED",Wo={VALUABLE_ACCESS:"VALUABLE_ACCESS",PHOTO_CONTENT:"PHOTO_CONTENT"},Yo=new WeakMap,Zo=new WeakMap,Jo=new WeakMap,Ko=new WeakMap,qo=new WeakSet,Xo=new WeakSet,Qo=new WeakSet,$o=new WeakSet,ei=new WeakSet,ti=new WeakSet,ri=new WeakSet,ni=new WeakSet,oi=new WeakSet,ii=new WeakSet,ai=new WeakSet,si=new WeakSet,ui=new WeakSet,ci=new WeakSet,li=new WeakSet,fi=new WeakSet;function pi(){return{userProfile:{fields:"uid,name,pic50x50,pic128x128,pic_base",method:"users.getCurrentUser"},hasAppPermission:function(e){return{method:"users.hasAppPermission",ext_perm:e}}}}function di(){var e=this;return{userProfileCallback:function(t,r,n){return Ho(e,qo,yi).call(e,t,r,n)},hasValueAccessCallback:function(t,r,n){return Ho(e,Qo,vi).call(e,r,n)}}}function hi(){var e=this;return{showPermissions:function(){return Ho(e,$o,_i).call(e)},loadAd:function(t){return Ho(e,ei,gi).call(e,t)},showLoadedAd:function(t,r){return Ho(e,ti,bi).call(e,r)},showAd:function(t,r){return Ho(e,ri,Si).call(e,r)},requestBannerAds:function(t,r){return Ho(e,ni,Ei).call(e,t,r)},showBannerAds:function(t,r){return Ho(e,ii,wi).call(e,r)},hideBannerAds:function(t,r){return Ho(e,oi,Pi).call(e,r)},setBannerFormat:function(t){return Ho(e,ai,Ai).call(e,t)},showInvite:function(t){return Ho(e,si,Oi).call(e,t)},showRatingDialog:function(t,r){return Ho(e,ui,ki).call(e,t,r)},joinGroup:function(t,r){return Ho(e,ci,Di).call(e,t,r)},showLoginSuggestion:function(t,r){return Ho(e,Xo,mi).call(e,t,r)},postMediatopic:function(t,r){return Ho(e,li,Ii).call(e,t,r)},isAdBlockEnabled:function(t,r){return Ho(e,fi,Ti).call(e,t,r)}}}function yi(e,t){"ok"===e&&(this._playerId=t.uid,this._playerName=t.name,this._playerPhotos=[t.pic50x50,t.pic128x128,t.pic_base]),this._isInitialized=!0,this._platformSdk.Client.call(Uo(this,Zo).hasAppPermission(Wo.VALUABLE_ACCESS),Uo(this,Jo).hasValueAccessCallback)}function mi(e,t){if("error"===e)return this._isPlayerAuthorized=!1,void this._rejectPromiseDecorator(v.AUTHORIZE_PLAYER,t);this._isPlayerAuthorized=!0,this._resolvePromiseDecorator(v.AUTHORIZE_PLAYER)}function vi(e){if(this._hasValuableAccessPermission=!!e,this._defaultStorageType=this._hasValuableAccessPermission?f.PLATFORM_INTERNAL:f.LOCAL_STORAGE,this._hasValuableAccessPermission||this._hasValuableAccessPermissionShowed)this._resolvePromiseDecorator(v.INITIALIZE);else{var t=Object.values(Wo).map((function(e){return'"'.concat(e,'"')})).join(",");this._platformSdk.UI.showPermissions("[".concat(t,"]"))}}function _i(){this._hasValuableAccessPermissionShowed=!0,this._platformSdk.Client.call(Uo(this,Zo).hasAppPermission(Wo.VALUABLE_ACCESS),Uo(this,Jo).hasValueAccessCallback)}function gi(e){"error"===e?this._setRewardedState(a.FAILED):(this._setRewardedState(a.OPENED),this._platformSdk.UI.showLoadedAd())}function bi(e){switch(e){case"complete":this._setRewardedState(a.REWARDED),this._setRewardedState(a.CLOSED);break;case"skip":this._setRewardedState(a.CLOSED);break;default:this._setRewardedState(a.FAILED)}}function Si(e){switch(e){case"ready":case"ad_prepared":break;case"ad_shown":this._setInterstitialState(i.OPENED),this._setInterstitialState(i.CLOSED);break;default:this._setInterstitialState(i.FAILED)}}function Ei(e,t){if("error"!==e)switch(t){case"ad_loaded":this._platformSdk.invokeUIMethod("showBannerAds",Uo(this,Yo));break;case"banner_shown":case"ad_shown":this._setBannerState(s.SHOWN);break;case"hidden_by_user":this._setBannerState(s.HIDDEN)}else this._setBannerState(s.FAILED)}function Pi(e){e?this._setBannerState(s.HIDDEN):this._setBannerState(s.FAILED)}function wi(e){e||this._setBannerState(s.FAILED)}function Ai(e){"error"===e?this._setBannerState(s.FAILED):this.showBanner(this._platformBannerOptions)}function Oi(e){"error"===e?this._rejectPromiseDecorator(v.INVITE_FRIENDS):this._resolvePromiseDecorator(v.INVITE_FRIENDS)}function ki(e,t){"error"===e?this._rejectPromiseDecorator(v.RATE,t):this._resolvePromiseDecorator(v.RATE)}function Di(e,t){"error"===e?this._rejectPromiseDecorator(v.JOIN_COMMUNITY,t):this._resolvePromiseDecorator(v.JOIN_COMMUNITY)}function Ii(e,t){"error"===e?this._rejectPromiseDecorator(v.CREATE_POST,t):this._resolvePromiseDecorator(v.CREATE_POST)}function Ti(e,t){"ok"===e?this._resolvePromiseDecorator(v.ADBLOCK_DETECT,"true"===t):this._rejectPromiseDecorator(v.ADBLOCK_DETECT)}const Ri=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jo(e,t)}(c,t);var r,n,o,s,u=(o=c,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Co(o);if(s){var r=Co(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===To(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return No(e)}(this,e)});function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Bo(No(e=u.call.apply(u,[this].concat(r))),fi),Bo(No(e),li),Bo(No(e),ci),Bo(No(e),ui),Bo(No(e),si),Bo(No(e),ai),Bo(No(e),ii),Bo(No(e),oi),Bo(No(e),ni),Bo(No(e),ri),Bo(No(e),ti),Bo(No(e),ei),Bo(No(e),$o),Bo(No(e),Qo),Bo(No(e),Xo),Bo(No(e),qo),Go(No(e),Ko,{get:hi,set:void 0}),Go(No(e),Jo,{get:di,set:void 0}),Go(No(e),Zo,{get:pi,set:void 0}),Fo(No(e),"_hasValuableAccessPermission",!1),Fo(No(e),"_hasValuableAccessPermissionShowed",!1),Fo(No(e),"_platformBannerOptions",{}),Go(No(e),Yo,{writable:!0,value:null}),e}return r=c,(n=[{key:"platformId",get:function(){return e.OK}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isCreatePostSupported",get:function(){return!0}},{key:"isRateSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),pe("//api.ok.ru/js/fapi5.js").then((function(){ye("FAPI").then((function(){e._platformSdk=window.FAPI,window.API_callback=function(t,r,n){return Uo(e,Ko)[t](r,n)};var t=e._platformSdk.Util.getRequestParameters()||{};t.api_server&&t.apiconnection?e._platformSdk.init(t.api_server,t.apiconnection,(function(){var t,r=null===(t=e._platformSdk)||void 0===t?void 0:t.saved_state;e._isPlayerAuthorized=!r||r===Vo,e._isPlayerAuthorized?e._platformSdk.Client.call(Uo(e,Zo).userProfile,Uo(e,Jo).userProfileCallback):(e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE))}),(function(){e._rejectPromiseDecorator(v.INITIALIZE)})):e._rejectPromiseDecorator(v.INITIALIZE,P)}))}))),t.promise}},{key:"authorizePlayer",value:function(){if(this._isPlayerAuthorized)return Promise.resolve();var e=this._getPromiseDecorator(v.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(v.AUTHORIZE_PLAYER),this._platformSdk.UI.showLoginSuggestion(Vo)),e.promise}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||Lo(Co(c.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL?this._hasValuableAccessPermission:Lo(Co(c.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===f.PLATFORM_INTERNAL?this._hasValuableAccessPermission?new Promise((function(t,o){var i=Array.isArray(e)?e:[e],a={method:"storage.get",keys:i,scope:"CUSTOM"};n._platformSdk.Client.call(a,(function(n,a,s){if(a){var u=a.data||{};if(Array.isArray(e)){var c=[];return i.forEach((function(e){if(""!==u[e]&&void 0!==u[e]){var t=u[e];if(r)try{t=JSON.parse(u[e])}catch(e){}c.push(t)}else c.push(null)})),void t(c)}if(""===u[e]||void 0===u[e])return void t(null);var l=u[e];if(r)try{l=JSON.parse(u[e])}catch(e){}t(l)}else o(s)}))})):Promise.reject(b):Lo(Co(c.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;if(r===f.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(b);for(var o=Array.isArray(e)?e:[e],i=Array.isArray(e)?t:[t],a=[],s=function(){var e=o[u],t=i[u];"string"!=typeof t&&(t=JSON.stringify(t));var r={method:"storage.set",key:e,value:t},s=new Promise((function(e,t){n._platformSdk.Client.call(r,(function(r,n){n?e():t()}))}));a.push(s)},u=0;u<o.length;u++)s();return Promise.all(a)}return Lo(Co(c.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;if(t===f.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(b);for(var n=Array.isArray(e)?e:[e],o=[],i=function(){var e={method:"storage.set",key:n[a]},t=new Promise((function(t,n){r._platformSdk.Client.call(e,(function(e,r){r?t():n()}))}));o.push(t)},a=0;a<n.length;a++)i();return Promise.all(o)}return Lo(Co(c.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){try{this._platformSdk.UI.showAd()}catch(e){this._setInterstitialState(i.FAILED)}}},{key:"showRewarded",value:function(){try{this._platformSdk.UI.loadAd()}catch(e){this._setRewardedState(a.FAILED)}}},{key:"showBanner",value:function(e){var t,r;r=e,function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(t=this,zo(t,Yo,"set"),r),this._platformSdk.invokeUIMethod("requestBannerAds")}},{key:"hideBanner",value:function(){this._platformSdk.invokeUIMethod("hideBannerAds")}},{key:"checkAdBlock",value:function(){var e=this._getPromiseDecorator(v.ADBLOCK_DETECT);return e||(e=this._createPromiseDecorator(v.ADBLOCK_DETECT),this._platformSdk.invokeUIMethod("isAdBlockEnabled")),e.promise}},{key:"inviteFriends",value:function(e){var t=(e||{}).text;if(!e||"string"!=typeof t)return Promise.reject();var r=this._getPromiseDecorator(v.INVITE_FRIENDS);return r||(r=this._createPromiseDecorator(v.INVITE_FRIENDS),t.length>120?this._rejectPromiseDecorator(v.INVITE_FRIENDS,O):this._platformSdk.UI.showInvite(t)),r.promise}},{key:"rate",value:function(){var e=this._getPromiseDecorator(v.RATE);return e||(e=this._createPromiseDecorator(v.RATE),this._platformSdk.UI.showRatingDialog()),e.promise}},{key:"createPost",value:function(e){if(!e||null==e||!e.media)return Promise.reject();var t,r=this._getPromiseDecorator(v.CREATE_POST);return r||(r=this._createPromiseDecorator(v.CREATE_POST),this._platformSdk.UI.postMediatopic(e,null!==(t=e.status)&&void 0!==t&&t)),r.promise}},{key:"joinCommunity",value:function(e){if(!e||null==e||!e.groupId)return Promise.reject();var t,r=this._getPromiseDecorator(v.JOIN_COMMUNITY);return r||(r=this._createPromiseDecorator(v.JOIN_COMMUNITY),this._platformSdk.UI.joinGroup(e.groupId,null!==(t=e.enableMessages)&&void 0!==t&&t)),r.promise}}])&&Ro(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(Fr);function Li(e){return Li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Li(e)}function ji(){ji=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new T(n||[]);return o(a,"_invoke",{value:O(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",m={};function v(){}function _(){}function g(){}var b={};c(b,a,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(R([])));E&&E!==r&&n.call(E,a)&&(b=E);var P=g.prototype=v.prototype=Object.create(b);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,i,a,s){var u=f(e[o],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==Li(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=k(s,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:d,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Li(t)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=c(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(P),e},t.awrap=function(e){return{__await:e}},w(A.prototype),c(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(P),c(P,u,"Generator"),c(P,a,(function(){return this})),c(P,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Ni(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Ci(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ci(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Mi(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ci(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Gi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Mi(n.key),n)}}function Mi(e){var t=function(e,t){if("object"!=Li(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Li(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Li(t)?t:String(t)}function Fi(){return Fi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ui(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Fi.apply(this,arguments)}function xi(e,t){return xi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xi(e,t)}function Hi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ui(e){return Ui=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ui(e)}function zi(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Vi(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var Wi=new WeakSet,Yi=new WeakSet;function Zi(){var e=this;return new Promise((function(t){e._platformSdk.userService.getUser().then((function(t){return e._playerId=t.id,e._isPlayerAuthorized=t.isAuthorized,e._playerName=t.name,e._playerPhotos=t.photos,e._playerExtra=t,delete e._playerExtra.isAuthorized,delete e._playerExtra.id,delete e._playerExtra.name,delete e._playerExtra.photos,e._defaultStorageType=e._isPlayerAuthorized?f.PLATFORM_INTERNAL:f.LOCAL_STORAGE,e._isPlayerAuthorized?Vi(e,Yi,Ji).call(e,[]):Promise.resolve()})).finally((function(){t()}))}))}function Ji(e){return Ki.apply(this,arguments)}function Ki(){var e;return e=ji().mark((function e(t){var r,n=arguments;return ji().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.length>1&&void 0!==n[1]&&n[1],this._platformStorageCachedData){e.next=5;break}return e.next=4,this.platformSdk.cloudSaveApi.getState();case 4:this._platformStorageCachedData=e.sent;case 5:return e.abrupt("return",_e(t,this._platformStorageCachedData,r));case 6:case"end":return e.stop()}}),e,this)})),Ki=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Ni(i,n,o,a,s,"next",e)}function s(e){Ni(i,n,o,a,s,"throw",e)}a(void 0)}))},Ki.apply(this,arguments)}const qi=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xi(e,t)}(c,t);var r,n,o,s,u=(o=c,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ui(o);if(s){var r=Ui(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Li(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Hi(e)}(this,e)});function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return zi(Hi(e=u.call.apply(u,[this].concat(r))),Yi),zi(Hi(e),Wi),e}return r=c,(n=[{key:"platformId",get:function(){return e.PLAYGAMA}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"platformLanguage",get:function(){return this._platformSdk.platformService.getLanguage()}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),pe("https://developer.playgama.com/sdk/v1.js").then((function(){ye("PLAYGAMA_SDK").then((function(){e._platformSdk=window.PLAYGAMA_SDK,Vi(e,Wi,Zi).call(e).then((function(){e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)}))}))}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||Fi(Ui(c.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL?this._isPlayerAuthorized:Fi(Ui(c.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){return t===f.PLATFORM_INTERNAL?this._isPlayerAuthorized?Vi(this,Yi,Ji).call(this,e,r):Promise.reject():Fi(Ui(c.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;switch(r){case f.PLATFORM_INTERNAL:return this._isPlayerAuthorized?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?Bi({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n.platformSdk.cloudSaveApi.setItems(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(e){o(e)}))})):Promise.reject();case f.LOCAL_STORAGE:var o={};if(Array.isArray(e))for(var i=0;i<e.length;i++)o[e[i]]="string"!=typeof t[i]?JSON.stringify(t[i]):t[i];else o[e]="string"!=typeof t?JSON.stringify(t):t;return this._platformSdk.storageApi.setItems(o),Fi(Ui(c.prototype),"setDataToStorage",this).call(this,e,t,r);default:return Promise.reject(g)}}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;switch(t){case f.PLATFORM_INTERNAL:return new Promise((function(t,n){var o=null!==r._platformStorageCachedData?Bi({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];r.platformSdk.cloudSaveApi.setItems(o).then((function(){r._platformStorageCachedData=o,t()})).catch((function(e){n(e)}))}));case f.LOCAL_STORAGE:return this._platformSdk.storageApi.deleteItems(Array.isArray(e)?e:[e]),Fi(Ui(c.prototype),"deleteDataFromStorage",this).call(this,e,t);default:return Promise.reject(g)}}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.advService.showInterstitial({onOpen:function(){e._setInterstitialState(i.OPENED)},onEmpty:function(){e._setInterstitialState(i.FAILED)},onClose:function(){e._setInterstitialState(i.CLOSED)},onError:function(){e._setInterstitialState(i.FAILED)}})}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.advService.showRewarded({onOpen:function(){e._setRewardedState(a.OPENED)},onRewarded:function(){e._setRewardedState(a.REWARDED)},onEmpty:function(){e._setRewardedState(a.FAILED)},onClose:function(){e._setRewardedState(a.CLOSED)},onError:function(){e._setRewardedState(a.FAILED)}})}},{key:"authorizePlayer",value:function(e){var t=this,r=this._getPromiseDecorator(v.AUTHORIZE_PLAYER);return r||(r=this._createPromiseDecorator(v.AUTHORIZE_PLAYER),this._isPlayerAuthorized?Vi(this,Wi,Zi).call(this,e).then((function(){t._resolvePromiseDecorator(v.AUTHORIZE_PLAYER)})):this._platformSdk.userService.authorizeUser().then((function(){Vi(t,Wi,Zi).call(t,e).then((function(){t._resolvePromiseDecorator(v.AUTHORIZE_PLAYER)}))})).catch((function(e){t._rejectPromiseDecorator(v.AUTHORIZE_PLAYER,e)}))),r.promise}},{key:"paymentsPurchase",value:function(e,t){var r=this,n=this._paymentsGetProductPlatformData(e);if(!n)return Promise.reject();t&&t.externalId&&(n.externalId=t.externalId),n.externalId||(n.externalId=this._paymentsGenerateTransactionId(e));var o=this._getPromiseDecorator(v.PURCHASE);return o||(o=this._createPromiseDecorator(v.PURCHASE),this._platformSdk.inGamePaymentsApi.purchase(n).then((function(t){if("PAID"===t.status){var n=Bi({id:e},t);r._paymentsPurchases.push(n),r._resolvePromiseDecorator(v.PURCHASE,n)}else r._rejectPromiseDecorator(v.PURCHASE,t.error)})).catch((function(e){r._rejectPromiseDecorator(v.PURCHASE,e)}))),o.promise}},{key:"paymentsGetCatalog",value:function(){var e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var t=e.map((function(e){return{id:e.id,price:"".concat(e.amount," Gam"),priceCurrencyCode:"Gam",priceCurrencyImage:"https://games.playgama.com/assets/gold-fennec-coin-large.webp",priceValue:e.amount}}));return Promise.resolve(t)}}])&&Gi(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(Fr);function Xi(e){return Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xi(e)}function Qi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ia(n.key),n)}}function ea(){return ea="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=na(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},ea.apply(this,arguments)}function ta(e,t){return ta=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ta(e,t)}function ra(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function na(e){return na=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},na(e)}function oa(e,t,r){return(t=ia(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ia(e){var t=function(e,t){if("object"!=Xi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Xi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Xi(t)?t:String(t)}function aa(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function sa(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,ca(e,t,"set"),r),r}function ua(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ca(e,t,"get"))}function ca(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var la=new WeakMap,fa=new WeakMap;const pa=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ta(e,t)}(c,t);var r,n,o,s,u=(o=c,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=na(o);if(s){var r=na(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Xi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ra(e)}(this,e)});function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return aa(ra(e=u.call.apply(u,[this].concat(r))),la,{writable:!0,value:void 0}),aa(ra(e),fa,{writable:!0,value:void 0}),oa(ra(e),"_defaultStorageType",f.PLATFORM_INTERNAL),oa(ra(e),"_isPlayerAuthorized",!0),e}return r=c,n=[{key:"platformId",get:function(){return e.PLAYDECK}},{key:"platformLanguage",get:function(){return ua(this,la)?ua(this,la):ea(na(c.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),window.addEventListener("message",(function t(r){var n=r.data;if(n&&n.playdeck){var o=n.playdeck;if("getUserProfile"===o.method){var i=o.value;e._playerId=i.telegramId,e._playerPhotos=[i.avatar],e._playerName=i.username,sa(e,la,i.locale),sa(e,fa,i.params),window.removeEventListener("message",t),e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)}}})),window.parent.postMessage({playdeck:{method:"getUserProfile"}},"*")),t.promise}},{key:"sendMessage",value:function(e){switch(e){case d.GAME_OVER:return window.parent.postMessage({playdeck:{method:"gameEnd"}},"*"),Promise.resolve();case d.GAME_READY:return window.parent.postMessage({playdeck:{method:"loading",value:100}},"*"),Promise.resolve();default:return ea(na(c.prototype),"sendMessage",this).call(this,e)}}},{key:"showInterstitial",value:function(){var e=this;window.addEventListener("message",(function t(r){var n=r.data,o=null==n?void 0:n.playdeck;if(o)switch(o.method){case"startAd":e._setInterstitialState(i.OPENED);break;case"rewardedAd":case"skipAd":e._setInterstitialState(i.CLOSED),window.removeEventListener("message",t);break;case"errAd":case"notFoundAd":e._setInterstitialState(i.FAILED),window.removeEventListener("message",t)}})),window.parent.postMessage({playdeck:{method:"showAd"}},"*")}},{key:"showRewarded",value:function(){var e=this;window.addEventListener("message",(function t(r){var n=r.data,o=null==n?void 0:n.playdeck;if(o)switch(o.method){case"startAd":e._setRewardedState(a.OPENED);break;case"rewardedAd":e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED),window.removeEventListener("message",t);break;case"skipAd":e._setRewardedState(a.CLOSED),window.removeEventListener("message",t);break;case"errAd":case"notFoundAd":e._setRewardedState(a.FAILED),window.removeEventListener("message",t)}})),window.parent.postMessage({playdeck:{method:"showAd"}},"*")}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||ea(na(c.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL||ea(na(c.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){return t===f.PLATFORM_INTERNAL?new Promise((function(t){var r={},n=Array.isArray(e)?e:[e];window.addEventListener("message",(function o(i){var a=i.data;if(a&&a.playdeck&&"getData"===a.playdeck.method&&n.includes(a.playdeck.key)){var s=a.playdeck;if("getData"===s.method&&(r[s.key]=s.value.data),Object.keys(r).length===n.length){window.removeEventListener("message",o);var u=Array.isArray(e)?e.map((function(e){return r[e]})):r[e];t(u)}}})),n.forEach((function(e){return window.parent.postMessage({playdeck:{method:"getData",key:e}},"*")}))})):ea(na(c.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){return r===f.PLATFORM_INTERNAL?new Promise((function(r){var n=Array.isArray(e)?e:[e],o=(Array.isArray(t)?t:[t]).map((function(e){return"string"!=typeof e?JSON.stringify(e):e}));n.forEach((function(e,t){return window.parent.postMessage({playdeck:{method:"setData",key:e,value:o[t]}},"*")})),r()})):ea(na(c.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){return t===f.PLATFORM_INTERNAL?new Promise((function(t){(Array.isArray(e)?e:[e]).forEach((function(e){return window.parent.postMessage({playdeck:{method:"setData",key:e,value:""}},"*")})),t()})):ea(na(c.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"share",value:function(){var e=this,t=this._getPromiseDecorator(v.SHARE);return t||(t=this._createPromiseDecorator(v.SHARE),window.addEventListener("message",(function t(r){var n=r.data,o=null==n?void 0:n.playdeck;o&&"customShare"===o.method&&(window.removeEventListener("message",t),e._resolvePromiseDecorator(v.SHARE))})),window.parent.postMessage({playdeck:{method:"customShare",value:ua(this,fa)}},"*")),t.promise}},{key:"paymentsPurchase",value:function(e,t){var r=this,n=this._paymentsGetProductPlatformData(e);if(!n)return Promise.reject();t&&t.externalId&&(n.externalId=t.externalId),n.externalId||(n.externalId=this._paymentsGenerateTransactionId(e));var o=this._getPromiseDecorator(v.PURCHASE);return o||(o=this._createPromiseDecorator(v.PURCHASE),window.addEventListener("message",(function e(t){var r=t.data,n=null==r?void 0:r.playdeck;n&&"requestPayment"===n.method&&(window.parent.postMessage({playdeck:{method:"openTelegramLink",value:n.value.url}},"*"),window.removeEventListener("message",e))})),window.addEventListener("message",(function t(n){var o=n.data,i=null==o?void 0:o.playdeck;if(i&&"invoiceClosed"===i.method)if("paid"===i.value.status){window.removeEventListener("message",t);var a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qi(Object(r),!0).forEach((function(t){oa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:e},i.value);r._paymentsPurchases.push(a),r._resolvePromiseDecorator(v.PURCHASE,a)}else"cancelled"!==i.value.status&&"failed"!==i.value.status||(window.removeEventListener("message",t),r._rejectPromiseDecorator(v.PURCHASE,i.value))})),window.parent.postMessage({playdeck:{method:"requestPayment",value:n}},"*")),o.promise}},{key:"paymentsGetCatalog",value:function(){var e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var t=e.map((function(e){return{id:e.id,price:"".concat(e.amount," Stars"),priceCurrencyCode:"Stars",priceValue:e.amount}}));return Promise.resolve(t)}}],n&&$i(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(Fr);function da(e){return da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},da(e)}function ha(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Sa(n.key),n)}}function ya(){return ya="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_a(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},ya.apply(this,arguments)}function ma(e,t){return ma=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ma(e,t)}function va(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _a(e){return _a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_a(e)}function ga(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function ba(e,t,r){return(t=Sa(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sa(e){var t=function(e,t){if("object"!=da(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=da(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==da(t)?t:String(t)}function Ea(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,wa(e,t,"set"),r),r}function Pa(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,wa(e,t,"get"))}function wa(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Aa=new WeakMap,Oa=new WeakMap,ka=new WeakMap,Da=new WeakMap;const Ia=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ma(e,t)}(c,t);var r,n,o,s,u=(o=c,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_a(o);if(s){var r=_a(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===da(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return va(e)}(this,e)});function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ba(va(e=u.call.apply(u,[this].concat(r))),"_defaultStorageType",f.PLATFORM_INTERNAL),ba(va(e),"_isPlayerAuthorized",!0),ga(va(e),Aa,{writable:!0,value:void 0}),ga(va(e),Oa,{writable:!0,value:void 0}),ga(va(e),ka,{writable:!0,value:{onStart:function(){return e._setRewardedState(a.OPENED)},onSkip:function(){return e._setRewardedState(a.CLOSED)},onReward:function(){return e._setRewardedState(a.REWARDED)},onError:function(){return e._setRewardedState(a.FAILED)}}}),ga(va(e),Da,{writable:!0,value:{onStart:function(){return e._setInterstitialState(i.OPENED)},onSkip:function(){return e._setInterstitialState(i.CLOSED)},onError:function(){return e._setInterstitialState(i.FAILED)}}}),e}return r=c,(n=[{key:"platformId",get:function(){return e.TELEGRAM}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.initDataUnsafe.user.language_code:ya(_a(c.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!!Pa(this,Oa)}},{key:"isRewardedSupported",get:function(){return!!Pa(this,Oa)}},{key:"deviceType",get:function(){switch(Pa(this,Aa)){case"android":case"android_x":case"ios":return p.MOBILE;case"tdesktop":case"unigram":case"macos":return p.DESKTOP;default:return ya(_a(c.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),pe("https://telegram.org/js/telegram-web-app.js").then((function(){e._platformSdk=window.Telegram.WebApp;var t=e._platformSdk.initDataUnsafe.user;e._playerId=t.id,e._playerName=[t.first_name,t.last_name].filter(Boolean).join(" "),e._playerPhotos=[t.photo_url],Ea(e,Aa,e._platformSdk.platform),e._isInitialized=!0,e._options&&e._options.adsgramBlockId?pe("https://sad.adsgram.ai/js/sad.min.js").then((function(){Ea(e,Oa,window.Adsgram.init({blockId:e._options.adsgramBlockId}))})).finally((function(){e._resolvePromiseDecorator(v.INITIALIZE)})):e._resolvePromiseDecorator(v.INITIALIZE)}))),t.promise}},{key:"sendMessage",value:function(e){return e===d.GAME_READY?(this._platformSdk.ready(),Promise.resolve()):ya(_a(c.prototype),"sendMessage",this).call(this,e)}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||ya(_a(c.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL||ya(_a(c.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===f.PLATFORM_INTERNAL?new Promise((function(t,o){Array.isArray(e)?n._platformSdk.CloudStorage.getItems(e,(function(n,i){if(n)o(n);else{var a=[];e.forEach((function(e){var t=i[e];if(r&&"string"==typeof t)try{t=JSON.parse(t)}catch(e){}a.push(t)})),t(a)}})):n._platformSdk.CloudStorage.getItem(e,(function(e,n){e&&o(e);var i=n;if(r&&"string"==typeof i)try{i=JSON.parse(i)}catch(e){}t(i)}))})):ya(_a(c.prototype),"getDataFromStorage",this).call(this,e,t)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===f.PLATFORM_INTERNAL?new Promise((function(r){var o=Array.isArray(e)?e:[e],i=(Array.isArray(t)?t:[t]).map((function(e){return"string"!=typeof e?JSON.stringify(e):e}));o.forEach((function(e,t){return n._platformSdk.CloudStorage.setItem(e,i[t])})),r()})):ya(_a(c.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===f.PLATFORM_INTERNAL?new Promise((function(t){(Array.isArray(e)?e:[e]).forEach((function(e){return r._platformSdk.CloudStorage.removeItem(e)})),t()})):ya(_a(c.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){var e=this;Pa(this,Oa)?(Pa(this,Oa).addEventListener("onStart",Pa(this,Da).onStart),Pa(this,Oa).addEventListener("onSkip",Pa(this,Da).onSkip),Pa(this,Oa).addEventListener("onError",Pa(this,Da).onError),Pa(this,Oa).addEventListener("onBannerNotFound",Pa(this,Da).onError),Pa(this,Oa).show().finally((function(){Pa(e,Oa).removeEventListener("onStart",Pa(e,Da).onStart),Pa(e,Oa).removeEventListener("onSkip",Pa(e,Da).onSkip),Pa(e,Oa).removeEventListener("onError",Pa(e,Da).onError),Pa(e,Oa).removeEventListener("onBannerNotFound",Pa(e,Da).onError)}))):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var e=this;Pa(this,Oa)?(Pa(this,Oa).addEventListener("onStart",Pa(this,ka).onStart),Pa(this,Oa).addEventListener("onSkip",Pa(this,ka).onSkip),Pa(this,Oa).addEventListener("onReward",Pa(this,ka).onReward),Pa(this,Oa).addEventListener("onError",Pa(this,ka).onError),Pa(this,Oa).addEventListener("onBannerNotFound",Pa(this,ka).onError),Pa(this,Oa).show().finally((function(){Pa(e,Oa).addEventListener("onStart",Pa(e,ka).onStart),Pa(e,Oa).addEventListener("onSkip",Pa(e,ka).onSkip),Pa(e,Oa).addEventListener("onReward",Pa(e,ka).onReward),Pa(e,Oa).addEventListener("onError",Pa(e,ka).onError),Pa(e,Oa).addEventListener("onBannerNotFound",Pa(e,ka).onError)}))):this._setRewardedState(a.FAILED)}},{key:"clipboardRead",value:function(){var e=this,t=this._getPromiseDecorator(v.CLIPBOARD_READ);return t||(t=this._createPromiseDecorator(v.CLIPBOARD_READ),this._platformSdk.readTextFromClipboard((function(t){t?e._resolvePromiseDecorator(v.CLIPBOARD_READ,t):e._rejectPromiseDecorator(v.CLIPBOARD_READ)}))),t.promise}}])&&ha(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(Fr);var Ta=["player"];function Ra(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function La(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ra(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Ca(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ra(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ja(e){return ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ja(e)}function Na(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ca(n.key),n)}}function Ca(e){var t=function(e,t){if("object"!=ja(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ja(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ja(t)?t:String(t)}function Ba(){return Ba="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fa(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Ba.apply(this,arguments)}function Ga(e,t){return Ga=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ga(e,t)}function Ma(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fa(e){return Fa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fa(e)}function xa(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Ha(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var Ua="userData",za="6129580795478709",Va=new WeakSet,Wa=new WeakSet;function Ya(){var e=this;return new Promise((function(t,r){e._platformStorageCachedData?t(e._platformStorageCachedData):e._platformSdk.api("user_data/retrieve","POST",{key:Ua},(function(n){n.error&&"Key not found"!==n.error&&r(n);var o={};try{n.jsondata&&(o=JSON.parse(n.jsondata))}catch(e){}e._platformStorageCachedData=o,t(o)}))}))}function Za(e){if("ok"===e.status){this._isPlayerAuthorized=!0,this._defaultStorageType=f.PLATFORM_INTERNAL;var t=e.authResponse.details,r=t.pid,n=t.locale,o=t.nickname,i=t.first_name,a=t.last_name,s=t.avatars;r&&(this._playerId=r),this._platformLanguage=n,this._playerName=[i,a].filter((function(e){return!!e})).join(" ")||o,this._playerPhotos=[];var u=s.thumb_url,c=s.medium_url,l=s.large_url;u&&this._playerPhotos.push(u),c&&this._playerPhotos.push(c),l&&this._playerPhotos.push(l)}}const Ja=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ga(e,t)}(c,t);var r,n,o,s,u=(o=c,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Fa(o);if(s){var r=Fa(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ja(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ma(e)}(this,e)});function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return xa(Ma(e=u.call.apply(u,[this].concat(r))),Wa),xa(Ma(e),Va),e}return r=c,(n=[{key:"platformId",get:function(){return e.Y8}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return y}},{key:"isAchievementsSupported",get:function(){return!0}},{key:"isGetAchievementsListSupported",get:function(){return!0}},{key:"isAchievementsNativePopupSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t,r=this._getPromiseDecorator(v.INITIALIZE);return r||(r=this._createPromiseDecorator(v.INITIALIZE),null!==(t=this._options)&&void 0!==t&&t.gameId?pe("https://cdn.y8.com/api/sdk.js").then((function(){ye("ID").then((function(){e._platformSdk=window.ID,e._platformSdk.Event.subscribe("id.init",(function(){var t,r,n,o,i,a;(t={hostId:"ca-host-pub-".concat(za),adsenseId:e._options.channelId?"ca-pub-".concat(za):e._options.adsenseId,channelId:e._options.channelId},r=t.hostId,n=t.adsenseId,o=t.channelId,i=t.adFrequencyHint,a=void 0===i?"180s":i,new Promise((function(e){var t=document.createElement("script");t.setAttribute("data-ad-client",n),o?t.setAttribute("data-ad-channel",o):r&&t.setAttribute("data-ad-host",r),t.setAttribute("data-ad-frequency-hint",a),t.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",t.addEventListener("load",e),document.head.appendChild(t)}))).then((function(){e._showAd=function(e){window.adsbygoogle.push(e)},window.adsbygoogle.push({preloadAdBreaks:"on",sound:"on",onReady:function(){}})})),e._platformSdk.getLoginStatus((function(t){Ha(e,Wa,Za).call(e,t),e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)}))})),e._platformSdk.init({appId:e._options.gameId})}))})):this._rejectPromiseDecorator(v.INITIALIZE,E)),r.promise}},{key:"authorizePlayer",value:function(){var e=this;return this._isPlayerAuthorized?Promise.resolve():new Promise((function(t,r){e._platformSdk.login((function(n){Ha(e,Wa,Za).call(e,n),"ok"===n.status?(e._platformStorageCachedData=null,t()):r()}))}))}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||Ba(Fa(c.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL?this._isPlayerAuthorized:Ba(Fa(c.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===f.PLATFORM_INTERNAL?new Promise((function(t,o){Ha(n,Va,Ya).call(n).then((function(n){var o=(Array.isArray(e)?e:[e]).map((function(e){var t=n[e];return r||"object"!==ja(t)||null===t?null!=t?t:null:JSON.stringify(t)}));t(o)})).catch(o)})):Ba(Fa(c.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===f.PLATFORM_INTERNAL?new Promise((function(r,o){Ha(n,Va,Ya).call(n).then((function(i){var a=La({},i);if(Array.isArray(e))for(var s=0;s<e.length;s++)a[e[s]]=t[s];else a[e]=t;n._platformSdk.api("user_data/submit","POST",{key:Ua,value:JSON.stringify(a)},(function(e){"ok"===e.status?(n._platformStorageCachedData=a,r()):o(e)}))})).catch(o)})):Ba(Fa(c.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===f.PLATFORM_INTERNAL?new Promise((function(t,n){Ha(r,Va,Ya).call(r).then((function(o){var i=La({},o);if(Array.isArray(e))for(var a=0;a<e.length;a++)delete i[e[a]];else delete i[e];r._platformSdk.api("user_data/submit","POST",{key:Ua,value:JSON.stringify(i)},(function(e){"ok"===e.status?(r._platformStorageCachedData=i,t()):n(e)}))})).catch(n)})):Ba(Fa(c.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){var e=this;this._showAd?this._showAd({type:"start",name:"start-game",beforeAd:function(){e._setInterstitialState(i.OPENED)},afterAd:function(){e.interstitialState!==i.FAILED&&e._setInterstitialState(i.CLOSED)},adBreakDone:function(t){"viewed"!==t.breakStatus&&e._setInterstitialState(i.FAILED)}}):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var e=this;this._showAd?this._showAd({type:"reward",name:"rewarded Ad",beforeAd:function(){e._setRewardedState(a.OPENED)},afterAd:function(){e.rewardedState!==a.FAILED&&e._setRewardedState(a.CLOSED)},beforeReward:function(e){e(0)},adDismissed:function(){e._setRewardedState(a.FAILED)},adViewed:function(){e._setRewardedState(a.REWARDED)},adBreakDone:function(t){"frequencyCapped"!==t.breakStatus&&"other"!==t.breakStatus||e._setRewardedState(a.FAILED)}}):this._setRewardedState(a.FAILED)}},{key:"leaderboardsSetScore",value:function(e,t){var r=this;if(!this._isPlayerAuthorized)return Promise.reject();var n=this._getPromiseDecorator(v.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(v.LEADERBOARDS_SET_SCORE);var o={table:e,points:t};this._platformSdk.GameAPI.Leaderboards.save(o,(function(e){var t=e.success,n=e.errormessage;t?r._resolvePromiseDecorator(v.LEADERBOARDS_SET_SCORE):r._rejectPromiseDecorator(v.LEADERBOARDS_SET_SCORE,n)}))}return n.promise}},{key:"leaderboardsGetEntries",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();var r=this._getPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES);if(!r){r=this._createPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES);var n={table:e,mode:"alltime"};this._platformSdk.GameAPI.Leaderboards.listCustom(n,(function(e){var r=e.scores,n=e.success,o=e.errormessage;if(n){var i=r.map((function(e){return{id:e.playerid,name:e.playername,score:e.points,rank:e.rank,photo:null}}));t._resolvePromiseDecorator(v.LEADERBOARDS_GET_ENTRIES,i)}else t._rejectPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES,o)}))}return r.promise}},{key:"unlockAchievement",value:function(e){var t=this;return this._isPlayerAuthorized&&e.achievement&&e.achievementkey?new Promise((function(r){t._platformSdk.GameAPI.Achievements.save(e,(function(e){r(e)}))})):Promise.reject()}},{key:"getAchievementsList",value:function(e){var t=this;return new Promise((function(r,n){t._platformSdk.GameAPI.Achievements.listCustom(e,(function(e){e.success?r(e.achievements.map((function(e){var t=e.player;return La(La({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Ta)),{},{playerid:t.playerid,playername:t.playername,lastupdated:t.lastupdated,date:t.date,rdate:t.rdate})}))):n(new Error(e.errorcode))}))}))}},{key:"showAchievementsNativePopup",value:function(e){return this._platformSdk.GameAPI.Achievements.list(e),Promise.resolve()}}])&&Na(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(Fr);function Ka(e){return Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ka(e)}function qa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xa(n.key),n)}}function Xa(e){var t=function(e,t){if("object"!=Ka(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ka(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ka(t)?t:String(t)}function Qa(){return Qa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=es(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Qa.apply(this,arguments)}function $a(e,t){return $a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$a(e,t)}function es(e){return es=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},es(e)}const ts=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$a(e,t)}(c,t);var r,n,o,s,u=(o=c,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=es(o);if(s){var r=es(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ka(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),u.apply(this,arguments)}return r=c,(n=[{key:"platformId",get:function(){return e.LAGGED}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return m}},{key:"isAchievementsSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),this._options&&this._options.devId&&this._options.publisherId?pe("https://lagged.com/api/rev-share/lagged.js").then((function(){ye("LaggedAPI").then((function(){e._platformSdk=window.LaggedAPI,e._platformSdk.init(e._options.devId,e._options.publisherId),e._platformSdk.User.get((function(t){var r,n=null!==(r=null==t?void 0:t.user)&&void 0!==r?r:{},o=n.id,i=n.name,a=n.avatar;o>0&&(e._playerId=o,e._playerName=i,e._playerPhotos.push(a),e._isPlayerAuthorized=!0),e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)}))}))})):this._rejectPromiseDecorator(v.INITIALIZE,w)),t.promise}},{key:"isStorageSupported",value:function(e){return e!==f.PLATFORM_INTERNAL&&Qa(es(c.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e!==f.PLATFORM_INTERNAL&&Qa(es(c.prototype),"isStorageAvailable",this).call(this,e)}},{key:"showInterstitial",value:function(){var e=this;this._setInterstitialState(i.OPENED),this._platformSdk.APIAds.show((function(){e._setInterstitialState(i.CLOSED)}))}},{key:"showRewarded",value:function(){var e=this;this._setRewardedState(a.OPENED),this._platformSdk.GEvents.reward((function(t,r){t?r():e._setRewardedState(a.FAILED)}),(function(t){t?(e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)}))}},{key:"leaderboardsSetScore",value:function(e,t){var r=this,n=this._getPromiseDecorator(v.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(v.LEADERBOARDS_SET_SCORE);var o={score:t,board:e};this._platformSdk.Scores.save(o,(function(e){e.success?r._resolvePromiseDecorator(v.LEADERBOARDS_SET_SCORE):r._rejectPromiseDecorator(v.LEADERBOARDS_SET_SCORE,e.errormsg)}))}return n.promise}},{key:"unlockAchievement",value:function(e){var t=this;return e.achievement?new Promise((function(r,n){t._platformSdk.Achievements.save(Array.isArray(e.achievement)?e.achievement:[e.achievement],(function(e){e.success?r(e):n(e.errormsg)}))})):Promise.reject()}}])&&qa(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(Fr);function rs(){rs=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new T(n||[]);return o(a,"_invoke",{value:O(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",m={};function v(){}function _(){}function g(){}var b={};c(b,a,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(R([])));E&&E!==r&&n.call(E,a)&&(b=E);var P=g.prototype=v.prototype=Object.create(b);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,i,a,s){var u=f(e[o],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==as(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=k(s,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:d,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(as(t)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=c(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(P),e},t.awrap=function(e){return{__await:e}},w(A.prototype),c(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(P),c(P,u,"Generator"),c(P,a,(function(){return this})),c(P,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function ns(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function os(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function is(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?os(Object(r),!0).forEach((function(t){ys(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):os(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function as(e){return as="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},as(e)}function ss(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function us(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ms(n.key),n)}}function cs(){return cs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ps(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},cs.apply(this,arguments)}function ls(e,t){return ls=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ls(e,t)}function fs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ps(e){return ps=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ps(e)}function ds(e,t){hs(e,t),t.add(e)}function hs(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ys(e,t,r){return(t=ms(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ms(e){var t=function(e,t){if("object"!=as(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=as(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==as(t)?t:String(t)}function vs(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,_s(e,t,"set"),r),r}function _s(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function gs(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var bs=new WeakMap,Ss=new WeakSet,Es=new WeakSet,Ps=new WeakSet,ws=new WeakSet;function As(){var e=this;e._platformSdk.overlayViews.setCustomEventHandler((function(t){if("leaderboard"===t)vs(e,bs,!0);else if("close"===t){if(function(e,t){return t.get?t.get.call(e):t.value}(r=e,_s(r,bs,"get")))return void vs(e,bs,!1);e._overlay&&(document.body.removeChild(document.getElementById(e._overlay.iframeElement.id)),e._overlay.dismissAsync(),e._overlay=null)}var r}))}function Os(e){var t=this;if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this._preloadedInterstitialPromises[e])return this._preloadedInterstitialPromises[e];var r=null;return this._preloadedInterstitialPromises[e]=this._platformSdk.getInterstitialAdAsync(e).then((function(e){return r=e,e.loadAsync()})).then((function(){return r})).catch((function(){return t._preloadedInterstitialPromises[e]=null,Promise.reject()})),this._preloadedInterstitialPromises[e]}function ks(e){var t=this;if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this._preloadedRewardedPromises[e])return this._preloadedRewardedPromises[e];var r=null;return this._preloadedRewardedPromises[e]=this._platformSdk.getRewardedVideoAsync(e).then((function(e){return r=e,e.loadAsync()})).then((function(){return r})).catch((function(){return t._preloadedRewardedPromises[e]=null,Promise.reject()})),this._preloadedRewardedPromises[e]}function Ds(){return Is.apply(this,arguments)}function Is(){var e;return e=rs().mark((function e(){return rs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._platformSdk.player.isSubscribedBotAsync();case 3:if(!e.sent){e.next=6;break}return e.abrupt("return",Promise.resolve());case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(0),"INVALID_OPERATION"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=13;break}e.next=14;break;case 13:throw new Error(e.t0);case 14:return e.prev=15,e.next=18,this._platformSdk.player.canSubscribeBotAsync();case 18:if(!e.sent){e.next=21;break}return e.abrupt("return",this._platformSdk.player.subscribeBotAsync());case 21:e.next=28;break;case 23:if(e.prev=23,e.t1=e.catch(15),"INVALID_OPERATION"!==(null===e.t1||void 0===e.t1?void 0:e.t1.code)){e.next=27;break}return e.abrupt("return",Promise.resolve());case 27:throw new Error(e.t1);case 28:return e.abrupt("return",Promise.resolve());case 29:case"end":return e.stop()}}),e,this,[[0,8],[15,23]])})),Is=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ns(i,n,o,a,s,"next",e)}function s(e){ns(i,n,o,a,s,"throw",e)}a(void 0)}))},Is.apply(this,arguments)}const Ts=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ls(e,t)}(l,t);var r,n,o,u,c=(o=l,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ps(o);if(u){var r=ps(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===as(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fs(e)}(this,e)});function l(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return ds(fs(e=c.call.apply(c,[this].concat(i))),ws),ds(fs(e),Ps),ds(fs(e),Es),ds(fs(e),Ss),ys(fs(e),"_contextId",null),ys(fs(e),"_supportedApis",[]),ys(fs(e),"_preloadedInterstitialPromises",{}),ys(fs(e),"_preloadedRewardedPromises",{}),ys(fs(e),"_defaultStorageType",f.PLATFORM_INTERNAL),ys(fs(e),"_isJoinCommunitySupported",!1),n={writable:!0,value:!1},hs(t=fs(e),r=bs),r.set(t,n),e}return r=l,n=[{key:"platformId",get:function(){return e.FACEBOOK}},{key:"platformLanguage",get:function(){return this._platformLanguage}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(this._platformSdk&&this._platformSdk.getPlatform()){case"IOS":case"ANDROID":case"MOBILE_WEB":return p.MOBILE;case"WEB":return p.DESKTOP;default:return cs(ps(l.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return"native_popup"}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return this._supportedApis.includes("inviteAsync")}},{key:"isJoinCommunitySupported",get:function(){return this._isJoinCommunitySupported}},{key:"isShareSupported",get:function(){return this._supportedApis.includes("shareAsync")}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),pe("https://connect.facebook.net/en_US/fbinstant.8.0.js").then((function(){return ye("FBInstant")})).then((function(){return e._platformSdk=window.FBInstant,e._platformSdk.initializeAsync()})).then((function(){e._isPlayerAuthorized=!0,e._playerId=e._platformSdk.player.getID(),e._contextId=e._platformSdk.context.getID();var t=e._platformSdk.getLocale();return t&&t.length>2&&(e._platformLanguage=t.substring(0,2).toLowerCase()),e._supportedApis=e._platformSdk.getSupportedAPIs(),gs(e,Ss,As).call(e),Promise.allSettled([e._platformSdk.community.canFollowOfficialPageAsync(),e._platformSdk.community.canJoinOfficialGroupAsync()]).then((function(t){var r,n,o=(n=2,function(e){if(Array.isArray(e))return e}(r=t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(r,n)||function(e,t){if(e){if("string"==typeof e)return ss(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ss(e,t):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1],s="fulfilled"===i.status&&i.value,u="fulfilled"===a.status&&a.value;e._isJoinCommunitySupported=!0===s&&!0===u}))})).then((function(){e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)})).catch((function(t){return e._rejectPromiseDecorator(v.INITIALIZE,t)}))),t.promise}},{key:"sendMessage",value:function(e){var t=this;return e===d.GAME_READY?(this._platformSdk.setLoadingProgress(100),this._options.subscribeForNotificationsOnStart&&setTimeout((function(){return gs(t,ws,Ds).call(t)}),0),new Promise((function(e){t._platformSdk.startGameAsync().then(e)}))):cs(ps(l.prototype),"sendMessage",this).call(this,e)}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL?this._supportedApis.includes("player.getDataAsync"):cs(ps(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL?this._isPlayerAuthorized:cs(ps(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===f.PLATFORM_INTERNAL?new Promise((function(t,o){var i=Array.isArray(e)?e:[e];n._platformSdk.player.getDataAsync(i).then((function(e){var n=i.map((function(t){var n=e[t];return r||"object"!==as(n)||null===n?null!=n?n:null:JSON.stringify(n)}));t(n)})).catch(o)})):cs(ps(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===f.PLATFORM_INTERNAL?new Promise((function(r,o){var i={};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n._platformSdk.player.setDataAsync(i).then(r).catch(o)})):cs(ps(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===f.PLATFORM_INTERNAL?new Promise((function(t,n){var o={};if(Array.isArray(e))for(var i=0;i<e.length;i++)o[e[i]]=null;else o[e]=null;r._platformSdk.player.setDataAsync(o).then(t).catch(n)})):cs(ps(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(e,t){var r=this;this._platformSdk.loadBannerAdAsync(t,e).then((function(){r._setBannerState(s.SHOWN)})).catch((function(){r._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.hideBannerAdAsync().then((function(){e._setBannerState(s.HIDDEN)})).catch((function(){e._setBannerState(s.FAILED)}))}},{key:"preloadInterstitial",value:function(e){gs(this,Es,Os).call(this,e)}},{key:"showInterstitial",value:function(e){var t=this;gs(this,Es,Os).call(this,e).then((function(e){return t._setInterstitialState(i.OPENED),e.showAsync()})).then((function(){t._setInterstitialState(i.CLOSED)})).catch((function(){return t._advertisementShowErrorPopup(!1)})).finally((function(){gs(t,Es,Os).call(t,e,!0)}))}},{key:"preloadRewarded",value:function(e){gs(this,Ps,ks).call(this,e)}},{key:"showRewarded",value:function(e){var t=this;gs(this,Ps,ks).call(this,e).then((function(e){return t._setRewardedState(a.OPENED),e.showAsync()})).then((function(){t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)})).catch((function(){return t._advertisementShowErrorPopup(!0)})).finally((function(){gs(t,Ps,ks).call(t,e,!0)}))}},{key:"leaderboardsSetScore",value:function(e,t){var r=this,n=this._getPromiseDecorator(v.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(v.LEADERBOARDS_SET_SCORE);var o="number"==typeof t?t:parseInt(t,10);this._platformSdk.globalLeaderboards.setScoreAsync(e,o).then((function(){r._resolvePromiseDecorator(v.LEADERBOARDS_SET_SCORE)})).catch((function(e){r._rejectPromiseDecorator(v.LEADERBOARDS_SET_SCORE,e)}))}return n.promise}},{key:"leaderboardsShowNativePopup",value:function(e){var t=this,r=this._getPromiseDecorator(v.LEADERBOARDS_SHOW_NATIVE_POPUP);if(!r){r=this._createPromiseDecorator(v.LEADERBOARDS_SHOW_NATIVE_POPUP);var n=function(){var e=document.createElement("div");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100vw",e.style.height="100vh",e.style.backgroundColor="rgba(0, 0, 0, 0.5)",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.zIndex="9999",e.id="loading-overlay";var t=document.createElement("div");return t.style.fontSize="24px",t.style.color="#fff",t.innerText="Loading...",e.appendChild(t),e}();document.body.appendChild(n),this._platformSdk.globalLeaderboards.getTopEntriesAsync(e,20).then((function(e){var r=e.map((function(e){return{score:e.getScore(),sessionID:e.getPlayer().getSessionID()}})),o=t._platformSdk.overlayViews.createOverlayViewWithXMLString('\n    <View style="position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); display: flex; justify-content: center; align-items: center" onTapEvent="close">\n        <View style="position: relative; background-color: #2E3C75;color: #fff;padding: 20px;border-radius: 10px;box-shadow: 0 0 10px #2E3C75;font-size: 24px;text-align: center;min-width: 250px;max-width: 30%;max-height: 80%;overflow: auto;flex-direction: column;justify-content: center;align-items: center;">\n            <View style="display: flex; flex-direction: column; align-items: center; justify-content: center;" onTapEvent="leaderboard">\n                <For source="{{players}}" itemName="player">\n                    <View style="display: flex;align-items: center;justify-content: space-between;width: 100%;gap: 10px;">\n                      <Image src="{{FBInstant.players[{{player.sessionID}}].photo}}" style="width: 50px; height: 50px; border-radius: 50%" />\n                      <Text content="{{FBInstant.players[{{player.sessionID}}].name}}" style="flex: 1; text-align: start;" />\n                      <Text content="{{player.score}}" />\n                    </View>\n                </For>\n            </View>\n        </View>\n    </View>\n',"",{players:r},(function(e){e.showAsync(),t._overlay=e,n.remove(),t._resolvePromiseDecorator(v.LEADERBOARDS_SHOW_NATIVE_POPUP)}),(function(e,r){n.remove(),t._rejectPromiseDecorator(v.LEADERBOARDS_SHOW_NATIVE_POPUP,r)})).iframeElement;o.style.zIndex=9999,o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.height="100vh",o.style.width="100vw",o.style.border=0,o.id=o.name,document.body.appendChild(o)})).catch((function(e){n.remove(),t._rejectPromiseDecorator(v.LEADERBOARDS_SHOW_NATIVE_POPUP,e)}))}return r.promise}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._paymentsGetProductPlatformData(e);r||(r={id:e});var n=this._getPromiseDecorator(v.PURCHASE);return n||(n=this._createPromiseDecorator(v.PURCHASE),this._platformSdk.payments.purchaseAsync({productID:r.platformProductId}).then((function(r){var n=is({id:e},r);delete n.productID,t._paymentsPurchases.push(n),t._resolvePromiseDecorator(v.PURCHASE,n)})).catch((function(e){t._rejectPromiseDecorator(v.PURCHASE,e)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this,r=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(v.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(v.CONSUME_PURCHASE),this._platformSdk.payments.consumePurchaseAsync(this._paymentsPurchases[r].purchaseToken).then((function(){t._paymentsPurchases.splice(r,1),t._resolvePromiseDecorator(v.CONSUME_PURCHASE,{id:e})})).catch((function(e){t._rejectPromiseDecorator(v.CONSUME_PURCHASE,e)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var r=this._getPromiseDecorator(v.GET_CATALOG);return r||(r=this._createPromiseDecorator(v.GET_CATALOG),this._platformSdk.payments.getCatalogAsync().then((function(r){var n=t.map((function(e){var t=r.find((function(t){return t.productID===e.platformProductId}));return{id:e.id,title:t.title,description:t.description,imageURI:t.imageURI,price:t.price,priceCurrencyCode:t.priceCurrencyCode,priceValue:t.priceAmount}}));e._resolvePromiseDecorator(v.GET_CATALOG,n)})).catch((function(t){e._rejectPromiseDecorator(v.GET_CATALOG,t)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(v.GET_PURCHASES);return t||(t=this._createPromiseDecorator(v.GET_PURCHASES),this._platformSdk.payments.getPurchasesAsync().then((function(t){var r=e._paymentsGetProductsPlatformData();e._paymentsPurchases=t.map((function(e){var t=is({id:r.find((function(t){return t.id===e.productID})).id},e);return delete t.productID,t})),e._resolvePromiseDecorator(v.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(v.GET_PURCHASES,t)}))),t.promise}},{key:"inviteFriends",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.image||!t.text)return Promise.reject();if(!me(t.image))return Promise.reject(new Error("Image is not base64"));var r=this._getPromiseDecorator(v.INVITE_FRIENDS);return r||(r=this._createPromiseDecorator(v.INVITE_FRIENDS),this._platformSdk.inviteAsync(t).then((function(){e._resolvePromiseDecorator(v.INVITE_FRIENDS)})).catch((function(t){e._rejectPromiseDecorator(v.INVITE_FRIENDS,t)}))),r.promise}},{key:"joinCommunity",value:function(e){var t=this,r=this._getPromiseDecorator(v.JOIN_COMMUNITY);return r||(r=this._createPromiseDecorator(v.JOIN_COMMUNITY),e&&!0===e.isPage?this._platformSdk.community.followOfficialPageAsync().then((function(e){return t._resolvePromiseDecorator(v.JOIN_COMMUNITY,e)})).catch((function(e){return t._rejectPromiseDecorator(v.JOIN_COMMUNITY,e)})):this._platformSdk.community.joinOfficialGroupAsync().then((function(e){return t._resolvePromiseDecorator(v.JOIN_COMMUNITY,e)})).catch((function(e){return t._rejectPromiseDecorator(v.JOIN_COMMUNITY,e)}))),r.promise}},{key:"share",value:function(e){var t=this;if(!e.image||!e.text)return Promise.reject();if(!me(e.image))return Promise.reject(new Error("Image is not base64"));var r=this._getPromiseDecorator(v.SHARE);return r||(r=this._createPromiseDecorator(v.SHARE),this._platformSdk.shareAsync(is({intent:"REQUEST"},e)).then((function(){t._resolvePromiseDecorator(v.SHARE)})).catch((function(e){t._rejectPromiseDecorator(v.SHARE,e)}))),r.promise}}],n&&us(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Fr);function Rs(e){return Rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rs(e)}function Ls(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,js(n.key),n)}}function js(e){var t=function(e,t){if("object"!=Rs(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Rs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Rs(t)?t:String(t)}var Ns,Cs=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";window.parent&&window.parent.postMessage(e,t)}},{key:"addListener",value:function(e){window.addEventListener("message",e)}},{key:"removeListener",value:function(e){window.removeEventListener("message",e)}},{key:"generateMessageId",value:function(){return"".concat(Date.now(),"-").concat(Math.random())}}],r&&Ls(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Bs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bs(Object(r),!0).forEach((function(t){Ws(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ms(e){return Ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ms(e)}function Fs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ys(n.key),n)}}function xs(e,t){return xs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xs(e,t)}function Hs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Us(e,t){Js(e,t),t.add(e)}function zs(){return zs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vs(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},zs.apply(this,arguments)}function Vs(e){return Vs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Vs(e)}function Ws(e,t,r){return(t=Ys(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ys(e){var t=function(e,t){if("object"!=Ms(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ms(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ms(t)?t:String(t)}function Zs(e,t,r){Js(e,t),t.set(e,r)}function Js(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ks(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function qs(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}var Xs="banner",Qs="get_data_from_storage",$s="get_server_time",eu="clipboard_read",tu="unlock_achievement",ru="get_achievements",nu="get_performance_resources",ou="isStorageInternalSupported",iu="isStorageLocalSupported",au=new WeakMap,su=new WeakMap,uu=new WeakSet,cu=new WeakSet,lu=function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xs(e,t)}(p,r);var n,o,u,c,l=(u=p,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Vs(u);if(c){var r=Vs(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ms(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Hs(e)}(this,e)});function p(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Us(Hs(e=l.call.apply(l,[this].concat(r))),cu),Us(Hs(e),uu),Zs(Hs(e),au,{get:fu,set:void 0}),Zs(Hs(e),su,{writable:!0,value:new Cs}),Ws(Hs(e),"_supportedFeatures",[]),Ws(Hs(e),"_leaderboardsType",null),e}return n=p,(o=[{key:"platformId",get:function(){return e.QA_TOOL}},{key:"platformLanguage",get:function(){return this._supportedFeatures.includes("isGetLanguageSupported")&&qs(this,su).send({type:t.PLATFORM,action:"get_language",options:{language:this._platformLanguage}}),this._platformLanguage}},{key:"platformTld",get:function(){return this._platformTld}},{key:"deviceType",get:function(){return this._deviceType}},{key:"platformPayload",get:function(){return this._platformPayload}},{key:"isInterstitialSupported",get:function(){return this._supportedFeatures.includes("isInterstitialSupported")}},{key:"isRewardedSupported",get:function(){return this._supportedFeatures.includes("isRewardedSupported")}},{key:"isPlayerAuthorizationSupported",get:function(){return this._supportedFeatures.includes("isPlayerAuthorizationSupported")}},{key:"isPaymentsSupported",get:function(){return this._supportedFeatures.includes("isPaymentsSupported")}},{key:"isRemoteConfigSupported",get:function(){return this._supportedFeatures.includes("isRemoteConfigSupported")}},{key:"isInviteFriendsSupported",get:function(){return this._supportedFeatures.includes("isInviteFriendsSupported")}},{key:"isJoinCommunitySupported",get:function(){return this._supportedFeatures.includes("isJoinCommunitySupported")}},{key:"isShareSupported",get:function(){return this._supportedFeatures.includes("isShareSupported")}},{key:"isCreatePostSupported",get:function(){return this._supportedFeatures.includes("isCreatePostSupported")}},{key:"isAddToHomeScreenSupported",get:function(){return this._supportedFeatures.includes("isAddToHomeScreenSupported")}},{key:"isAddToFavoritesSupported",get:function(){return this._supportedFeatures.includes("isAddToFavoritesSupported")}},{key:"isRateSupported",get:function(){return this._supportedFeatures.includes("isRateSupported")}},{key:"leaderboardsType",get:function(){var e;return null!==(e=this._leaderboardsType)&&void 0!==e?e:h}},{key:"isClipboardSupported",get:function(){return this._supportedFeatures.includes("isClipboardSupported")}},{key:"isAchievementsSupported",get:function(){return this._supportedFeatures.includes("isAchievementsSupported")}},{key:"isGetAchievementsListSupported",get:function(){return this._supportedFeatures.includes("isGetAchievementsListSupported")}},{key:"isAchievementsNativePopupSupported",get:function(){return this._supportedFeatures.includes("isAchievementsNativePopupSupported")}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var r=this._getPromiseDecorator(v.INITIALIZE);return r||(r=this._createPromiseDecorator(v.INITIALIZE),this._defaultStorageType=f.PLATFORM_INTERNAL,qs(this,su).addListener((function(r){var n=r.data;if(null!=n&&n.type&&n.type===t.PLATFORM&&(n.action===v.INITIALIZE&&Ks(e,uu,pu).call(e,n),n.action===nu)){var o,i=qs(e,su).generateMessageId(),a=(null==n||null===(o=n.options)||void 0===o?void 0:o.resources)||[];Ks(e,cu,du).call(e,i,a)}})),qs(this,su).send({type:t.PLATFORM,action:v.INITIALIZE})),r.promise}},{key:"authorizePlayer",value:function(e){var r=this,n=this._getPromiseDecorator(v.AUTHORIZE_PLAYER);if(!n){n=this._createPromiseDecorator(v.AUTHORIZE_PLAYER);var o=qs(this,su).generateMessageId();qs(this,su).addListener((function e(n){var i=n.data;if((null==i?void 0:i.type)===t.PLAYER&&i.action===v.AUTHORIZE_PLAYER&&i.id===o){var a=i.player,s=i.auth;"success"===s.status?(r._isPlayerAuthorized=!0,r._playerId=a.userId,r._playerName=a.name,a.profilePictureUrl&&(r._playerPhotos=[a.profilePictureUrl]),r._playerExtra={test:42},r._resolvePromiseDecorator(v.AUTHORIZE_PLAYER)):r._rejectPromiseDecorator(v.AUTHORIZE_PLAYER,s.error),qs(r,su).removeListener(e)}})),qs(this,su).send({type:t.PLAYER,action:v.AUTHORIZE_PLAYER,id:o,options:e})}return n.promise}},{key:"sendMessage",value:function(e){return[d.GAME_READY,d.IN_GAME_LOADING_STARTED,d.IN_GAME_LOADING_STOPPED,d.GAMEPLAY_STARTED,d.GAMEPLAY_STOPPED,d.PLAYER_GOT_ACHIEVEMENT,d.GAME_OVER].includes(e)?(qs(this,su).send({type:t.PLATFORM,action:e}),Promise.resolve()):zs(Vs(p.prototype),"sendMessage",this).call(this,e)}},{key:"getServerTime",value:function(){var e=this;return new Promise((function(r,n){var o,i=qs(e,su).generateMessageId(),a=function a(s){var u=s.data;if((null==u?void 0:u.type)===t.PLATFORM&&u.action===$s&&u.id===i){if(!u.time)return void n(new Error("Invalid server time"));clearTimeout(o),r(u.time),qs(e,su).removeListener(a)}};qs(e,su).addListener(a),qs(e,su).send({type:t.PLATFORM,action:$s,id:i}),o=setTimeout((function(){n(new Error("Server time request timeout")),qs(e,su).removeListener(a)}),5e3)}))}},{key:"isStorageSupported",value:function(e){return qs(this,su).send({type:t.STORAGE,action:"is_storage_supported",options:{storageType:e}}),!(e!==f.PLATFORM_INTERNAL||!this._supportedFeatures.includes(ou))||!(e!==f.LOCAL_STORAGE||!this._supportedFeatures.includes(iu))}},{key:"isStorageAvailable",value:function(e){return qs(this,su).send({type:t.STORAGE,action:"is_storage_available",options:{storageType:e}}),!(e!==f.PLATFORM_INTERNAL||!this._supportedFeatures.includes(ou))||!(e!==f.LOCAL_STORAGE||!this._supportedFeatures.includes(iu))}},{key:"getDataFromStorage",value:function(e,r,n){var o=this;if(r===f.PLATFORM_INTERNAL||r===f.LOCAL_STORAGE&&qs(this,au)){var i=qs(this,su).generateMessageId();return new Promise((function(a){qs(o,su).addListener((function e(r){var n=r.data;if((null==n?void 0:n.type)===t.STORAGE&&n.action===Qs&&n.id===i){var s=Object.values(n.storage);a(s),qs(o,su).removeListener(e)}})),qs(o,su).send({type:t.STORAGE,action:Qs,id:i,options:{key:e,storageType:r,tryParseJson:n}})}))}return qs(this,su).send({type:t.STORAGE,action:Qs,options:{key:e,storageType:r,tryParseJson:n}}),zs(Vs(p.prototype),"getDataFromStorage",this).call(this,e,r,n)}},{key:"setDataToStorage",value:function(e,r,n){return qs(this,su).send({type:t.STORAGE,action:"set_data_to_storage",options:{key:e,value:r,storageType:n}}),n===f.PLATFORM_INTERNAL||n===f.LOCAL_STORAGE&&qs(this,au)?Promise.resolve():zs(Vs(p.prototype),"setDataToStorage",this).call(this,e,r,n)}},{key:"deleteDataFromStorage",value:function(e,r){return qs(this,su).send({type:t.STORAGE,action:"delete_data_from_storage",options:{key:e,storageType:r}}),r===f.PLATFORM_INTERNAL||r===f.LOCAL_STORAGE&&qs(this,au)?Promise.resolve():zs(Vs(p.prototype),"deleteDataFromStorage",this).call(this,e,r)}},{key:"showInterstitial",value:function(e){var r=this;qs(this,su).addListener((function e(n){var o=n.data;if((null==o?void 0:o.type)===t.ADVERTISEMENT)switch(o.payload.status){case"start":r._setInterstitialState(i.LOADING);break;case"open":r._setInterstitialState(i.OPENED);break;case"failed":r._setInterstitialState(i.FAILED);break;case"close":r._setInterstitialState(i.CLOSED),qs(r,su).removeListener(e)}})),qs(this,su).send({type:t.ADVERTISEMENT,action:"interstitial",options:{placement:e}})}},{key:"showRewarded",value:function(e){var r=this;qs(this,su).addListener((function e(n){var o=n.data;if((null==o?void 0:o.type)===t.ADVERTISEMENT)switch(o.payload.status){case"start":r._setRewardedState(a.LOADING);break;case"open":r._setRewardedState(a.OPENED);break;case"failed":r._setRewardedState(a.FAILED);break;case"rewarded":r._setRewardedState(a.REWARDED);break;case"close":r._setRewardedState(a.CLOSED),qs(r,su).removeListener(e)}})),qs(this,su).send({type:t.ADVERTISEMENT,action:"reward",options:{placement:e}})}},{key:"showBanner",value:function(e,r){this._setBannerState(s.SHOWN),qs(this,su).send({type:t.ADVERTISEMENT,action:s.SHOWN,options:{type:Xs,position:e,placement:r}})}},{key:"hideBanner",value:function(){this._setBannerState(s.HIDDEN),qs(this,su).send({type:t.ADVERTISEMENT,action:s.HIDDEN,options:{type:Xs}})}},{key:"checkAdBlock",value:function(){return qs(this,su).send({type:"check_adblock",action:v.ADBLOCK_DETECT}),zs(Vs(p.prototype),"checkAdBlock",this).call(this)}},{key:"inviteFriends",value:function(){var e=this._getPromiseDecorator(v.INVITE_FRIENDS);return e||(e=this._createPromiseDecorator(v.INVITE_FRIENDS),this._resolvePromiseDecorator(v.INVITE_FRIENDS),qs(this,su).send({type:t.SOCIAL,action:v.INVITE_FRIENDS})),e.promise}},{key:"joinCommunity",value:function(){var e=this._getPromiseDecorator(v.JOIN_COMMUNITY);return e||(e=this._createPromiseDecorator(v.JOIN_COMMUNITY),this._resolvePromiseDecorator(v.JOIN_COMMUNITY),qs(this,su).send({type:t.SOCIAL,action:v.JOIN_COMMUNITY})),e.promise}},{key:"share",value:function(){var e=this._getPromiseDecorator(v.SHARE);return e||(e=this._createPromiseDecorator(v.SHARE),this._resolvePromiseDecorator(v.SHARE),qs(this,su).send({type:t.SOCIAL,action:v.SHARE})),e.promise}},{key:"createPost",value:function(){var e=this._getPromiseDecorator(v.CREATE_POST);return e||(e=this._createPromiseDecorator(v.CREATE_POST),this._resolvePromiseDecorator(v.CREATE_POST),qs(this,su).send({type:t.SOCIAL,action:v.CREATE_POST})),e.promise}},{key:"addToHomeScreen",value:function(){var e=this._getPromiseDecorator(v.ADD_TO_HOME_SCREEN);return e||(e=this._createPromiseDecorator(v.ADD_TO_HOME_SCREEN),this._resolvePromiseDecorator(v.ADD_TO_HOME_SCREEN),qs(this,su).send({type:t.SOCIAL,action:v.ADD_TO_HOME_SCREEN})),e.promise}},{key:"addToFavorites",value:function(){var e=this._getPromiseDecorator(v.ADD_TO_FAVORITES);return e||(e=this._createPromiseDecorator(v.ADD_TO_FAVORITES),this._resolvePromiseDecorator(v.ADD_TO_FAVORITES),qs(this,su).send({type:t.SOCIAL,action:v.ADD_TO_FAVORITES})),e.promise}},{key:"rate",value:function(){var e=this._getPromiseDecorator(v.RATE);return e||(e=this._createPromiseDecorator(v.RATE),this._resolvePromiseDecorator(v.RATE),qs(this,su).send({type:t.SOCIAL,action:v.RATE})),e.promise}},{key:"paymentsPurchase",value:function(e){var r=this,n=this._paymentsGetProductPlatformData(e);if(!n)return Promise.reject();var o=this._getPromiseDecorator(v.PURCHASE);if(!o){o=this._createPromiseDecorator(v.PURCHASE);var i=qs(this,su).generateMessageId();qs(this,su).addListener((function n(o){var a=o.data;if((null==a?void 0:a.type)===t.PAYMENTS&&a.action===v.PURCHASE&&a.id===i){var s;if(!a.purchase||"object"!==Ms(a.purchase))return r._rejectPromiseDecorator(v.PURCHASE,new Error("Invalid purchase")),void qs(r,su).removeListener(n);if(null!==(s=a.purchase)&&void 0!==s&&s.status){var u=Gs({id:e},a.purchase.purchaseData);delete u.commonId,r._paymentsPurchases.push(u),r._resolvePromiseDecorator(v.PURCHASE,u)}else{var c;r._rejectPromiseDecorator(v.PURCHASE,(null===(c=a.purchase)||void 0===c?void 0:c.error)||new Error("Unknown purchase error"))}qs(r,su).removeListener(n)}})),qs(this,su).send({type:t.PAYMENTS,action:v.PURCHASE,id:i,options:{product:n}})}return o.promise}},{key:"paymentsConsumePurchase",value:function(e){var r=this,n=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(n<0)return Promise.reject();var o=this._getPromiseDecorator(v.CONSUME_PURCHASE);if(!o){o=this._createPromiseDecorator(v.CONSUME_PURCHASE);var i=qs(this,su).generateMessageId();qs(this,su).addListener((function o(a){var s=a.data;if((null==s?void 0:s.type)===t.PAYMENTS&&s.action===v.CONSUME_PURCHASE&&s.id===i){var u;if(!s.purchase||"object"!==Ms(s.purchase))return r._rejectPromiseDecorator(v.CONSUME_PURCHASE,new Error("Invalid purchase")),void qs(r,su).removeListener(o);if(null!==(u=s.purchase)&&void 0!==u&&u.status){var c=Gs({id:e},s.purchase);r._paymentsPurchases.splice(n,1),r._resolvePromiseDecorator(v.CONSUME_PURCHASE,c)}else{var l;r._rejectPromiseDecorator(v.CONSUME_PURCHASE,(null===(l=s.purchase)||void 0===l?void 0:l.error)||new Error("Unknown consume purchase error"))}qs(r,su).removeListener(o)}})),qs(this,su).send({type:t.PAYMENTS,action:v.CONSUME_PURCHASE,id:i,options:{product:this._paymentsPurchases[n]}})}return o.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,r=this._getPromiseDecorator(v.GET_CATALOG);if(!r){r=this._createPromiseDecorator(v.GET_CATALOG);var n=this._paymentsGetProductsPlatformData(),o=qs(this,su).generateMessageId();qs(this,su).addListener((function r(i){var a=i.data;if((null==a?void 0:a.type)===t.PAYMENTS&&a.action===v.GET_CATALOG&&a.id===o){var s=n.map((function(e){return{id:e.id,price:"".concat(e.amount," Gam"),priceCurrencyCode:"Gam",priceCurrencyImage:"https://games.playgama.com/assets/gold-fennec-coin-large.webp",priceValue:e.amount}}));qs(e,su).removeListener(r),e._resolvePromiseDecorator(v.GET_CATALOG,s)}})),qs(this,su).send({type:t.PAYMENTS,action:v.GET_CATALOG,id:o})}return r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,r=this._getPromiseDecorator(v.GET_PURCHASES);if(!r){r=this._createPromiseDecorator(v.GET_PURCHASES);var n=qs(this,su).generateMessageId();qs(this,su).addListener((function r(o){var i=o.data;if((null==i?void 0:i.type)===t.PAYMENTS&&i.action===v.GET_PURCHASES&&i.id===n){var a=e._paymentsGetProductsPlatformData();e._paymentsPurchases=i.purchases.map((function(e){return Gs({id:a.find((function(t){return t.id===e.id})).id},e.purchaseData)})),qs(e,su).removeListener(r),e._resolvePromiseDecorator(v.GET_PURCHASES,e._paymentsPurchases)}})),qs(this,su).send({type:t.PAYMENTS,action:v.GET_PURCHASES,id:n})}return r.promise}},{key:"getRemoteConfig",value:function(){var e=this,r=this._getPromiseDecorator(v.GET_REMOTE_CONFIG);if(!r){r=this._createPromiseDecorator(v.GET_REMOTE_CONFIG);var n=qs(this,su).generateMessageId();qs(this,su).addListener((function r(o){var i=o.data;(null==i?void 0:i.type)===t.REMOTE_CONFIG&&i.action===v.GET_REMOTE_CONFIG&&i.id===n&&(e._resolvePromiseDecorator(v.GET_REMOTE_CONFIG,i.result),qs(e,su).removeListener(r))})),qs(this,su).send({type:t.REMOTE_CONFIG,action:v.GET_REMOTE_CONFIG,id:n})}return r.promise}},{key:"clipboardWrite",value:function(e){var r=this,n=this._getPromiseDecorator(v.CLIPBOARD_WRITE);if(!n){n=this._createPromiseDecorator(v.CLIPBOARD_WRITE);var o=qs(this,su).generateMessageId();qs(this,su).addListener((function e(n){var i=n.data;(null==i?void 0:i.type)===t.CLIPBOARD&&i.action===v.CLIPBOARD_WRITE&&i.id===o&&(r._resolvePromiseDecorator(v.CLIPBOARD_WRITE,!0),qs(r,su).removeListener(e))})),qs(this,su).send({type:t.CLIPBOARD,action:v.CLIPBOARD_WRITE,id:o,options:{text:e}})}return n.promise}},{key:"clipboardRead",value:function(){var e=this,r=this._getPromiseDecorator(eu);if(!r){r=this._createPromiseDecorator(eu);var n=qs(this,su).generateMessageId();qs(this,su).addListener((function r(o){var i=o.data;if((null==i?void 0:i.type)===t.CLIPBOARD&&i.action===eu&&i.id===n){var a=i.text;e._resolvePromiseDecorator(eu,a),qs(e,su).removeListener(r)}})),qs(this,su).send({type:t.CLIPBOARD,action:eu,id:n,options:{}})}return r.promise}},{key:"leaderboardsSetScore",value:function(e,r){if(this.leaderboardsType===h)return Promise.reject(new Error("Leaderboards are not available"));var n=this._getPromiseDecorator(v.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(v.LEADERBOARDS_SET_SCORE);var o={id:e,score:r};qs(this,su).send({type:t.LEADERBOARDS,action:v.LEADERBOARDS_SET_SCORE,options:o}),this._resolvePromiseDecorator(v.LEADERBOARDS_SET_SCORE)}return n.promise}},{key:"leaderboardsGetEntries",value:function(e){var r=this;if(this.leaderboardsType===h||this.leaderboardsType===m)return Promise.reject(new Error("Leaderboards are not available"));var n=this._getPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES);if(!n){n=this._createPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES);var o=qs(this,su).generateMessageId();qs(this,su).addListener((function e(n){var i=n.data;(null==i?void 0:i.type)===t.LEADERBOARDS&&i.action===v.LEADERBOARDS_GET_ENTRIES&&i.id===o?(r._resolvePromiseDecorator(v.LEADERBOARDS_GET_ENTRIES,i.entries),qs(r,su).removeListener(e)):r._rejectPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES)})),qs(this,su).send({type:t.LEADERBOARDS,action:v.LEADERBOARDS_GET_ENTRIES,id:o,options:{id:e}})}return n.promise}},{key:"unlockAchievement",value:function(e){var r=this;return new Promise((function(n){var o=qs(r,su).generateMessageId();qs(r,su).addListener((function e(i){var a=i.data;(null==a?void 0:a.type)===t.ACHIEVEMENTS&&a.action===tu&&a.id===o&&(n(a.result),qs(r,su).removeListener(e))})),qs(r,su).send({type:t.ACHIEVEMENTS,action:tu,id:o,options:e})}))}},{key:"getAchievementsList",value:function(e){var r=this;return new Promise((function(n){var o=qs(r,su).generateMessageId();qs(r,su).addListener((function e(i){var a=i.data;(null==a?void 0:a.type)===t.ACHIEVEMENTS&&a.action===ru&&a.id===o&&(n(a.result),qs(r,su).removeListener(e))})),qs(r,su).send({type:t.ACHIEVEMENTS,action:ru,id:o,options:e})}))}},{key:"showAchievementsNativePopup",value:function(){return qs(this,su).send({type:t.ACHIEVEMENTS,action:"show_achievements_native_popup"}),Promise.resolve()}},{key:"_paymentsGetProductsPlatformData",value:function(){return this._options.payments?this._options.payments.map((function(e){return Gs({id:e.id},e.playgama)})):[]}},{key:"_paymentsGetProductPlatformData",value:function(e){var t=this._options.payments;if(!t)return null;var r=t.find((function(t){return t.id===e}));return r?Gs({id:r.id},r.playgama):null}}])&&Fs(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),p}(Fr);function fu(){return this._supportedFeatures.includes("isStorageRemoteLocalSupported")}function pu(e){var t,r,n,o,i;this._supportedFeatures=e.supportedFeatures||[],this._isBannerSupported=this._supportedFeatures.includes("isBannerSupported");var a=e.config,s=void 0===a?{}:a;this._deviceType=null!==(t=s.deviceType)&&void 0!==t?t:zs(Vs(Ns.prototype),"deviceType",this),this._platformLanguage=null!==(r=s.platformLanguage)&&void 0!==r?r:zs(Vs(Ns.prototype),"platformLanguage",this),this._platformTld=null!==(n=s.platformTld)&&void 0!==n?n:zs(Vs(Ns.prototype),"platformTld",this),this._platformPayload=null!==(o=s.platformPayload)&&void 0!==o?o:zs(Vs(Ns.prototype),"platformPayload",this),this._leaderboardsType=null!==(i=s.leaderboardsType)&&void 0!==i?i:h,this._paymentsPurchases=e.purchases||[],this._isInitialized=!0,this._resolvePromiseDecorator(v.INITIALIZE),qs(this,su).send({type:"liveness",action:"ping",options:{version:"1.25.0-preview.1"}})}function du(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Array.isArray(r)?r:[],o=performance.getEntriesByType("resource")||[],i=n.length>0?n:["name","initiatorType"],a=o.map((function(e){var t={};return i.forEach((function(r){r in e&&(t[r]=e[r])})),t}));return qs(this,su).send({type:t.PLATFORM,action:nu,id:e,options:{resources:a}}),Promise.resolve(o)}Ns=lu;const hu=lu;function yu(e){return yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yu(e)}function mu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vu(n.key),n)}}function vu(e){var t=function(e,t){if("object"!=yu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=yu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==yu(t)?t:String(t)}function _u(){return _u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bu(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},_u.apply(this,arguments)}function gu(e,t){return gu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},gu(e,t)}function bu(e){return bu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},bu(e)}const Su=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gu(e,t)}(c,t);var r,n,o,s,u=(o=c,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=bu(o);if(s){var r=bu(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===yu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function c(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),u.apply(this,arguments)}return r=c,(n=[{key:"platformId",get:function(){return e.POKI}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),pe("https://game-cdn.poki.com/scripts/v2/poki-sdk.js").then((function(){ye("PokiSDK","init").then((function(){e._platformSdk=window.PokiSDK,e._platformSdk.init().then((function(){e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)}))}))}))),t.promise}},{key:"sendMessage",value:function(e){switch(e){case d.GAME_READY:return this._platformSdk.gameLoadingFinished(),Promise.resolve();case d.GAMEPLAY_STARTED:return this._platformSdk.gameplayStart(),Promise.resolve();case d.GAMEPLAY_STOPPED:return this._platformSdk.gameplayStop(),Promise.resolve();default:return _u(bu(c.prototype),"sendMessage",this).call(this,e)}}},{key:"showInterstitial",value:function(){var e=this,t=!1;this._platformSdk.commercialBreak((function(){t=!0,e._setInterstitialState(i.OPENED)})).then((function(){t?e._setInterstitialState(i.CLOSED):e._setInterstitialState(i.FAILED)})).catch((function(t){e._setInterstitialState(i.FAILED,t)}))}},{key:"showRewarded",value:function(){var e=this,t=!1;this._platformSdk.rewardedBreak((function(){t=!0,e._setRewardedState(a.OPENED)})).then((function(r){t?(r&&e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)})).catch((function(t){e._setRewardedState(a.FAILED,t)}))}}])&&mu(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(Fr);function Eu(e){return Eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eu(e)}function Pu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pu(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Ou(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Au(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ou(n.key),n)}}function Ou(e){var t=function(e,t){if("object"!=Eu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Eu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Eu(t)?t:String(t)}function ku(e,t){return ku=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ku(e,t)}function Du(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Iu(e){return Iu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Iu(e)}function Tu(e,t){Ru(e,t),t.add(e)}function Ru(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Lu(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ju(e,t,"get"))}function ju(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function Nu(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var Cu=new WeakMap,Bu=new WeakSet,Gu=new WeakSet,Mu=new WeakSet;function Fu(){var e=this;return Lu(this,Cu)?new Promise((function(t){Lu(e,Cu).requestOutOfPageAd("interstitial").then((function(r){switch(r.state){case"empty":return void e._advertisementShowErrorPopup(!1).then((function(){return t()}));case"ready":e._setInterstitialState(i.OPENED),r.show()}r.addEventListener("ready",(function(){e._setInterstitialState(i.OPENED),r.show()})),r.addEventListener("empty",(function(){e._advertisementShowErrorPopup(!1).then((function(){return t()}))})),r.addEventListener("closed",(function(){e._setInterstitialState(i.CLOSED),t()}))}))})):this._advertisementShowErrorPopup(!1)}function xu(){var e=this;return Lu(this,Cu)?new Promise((function(t){Lu(e,Cu).requestOutOfPageAd("rewarded").then((function(r){switch(r.state){case"empty":return void e._advertisementShowErrorPopup(!0).then((function(){return t()}));case"ready":e._setRewardedState(a.OPENED),r.show()}r.addEventListener("ready",(function(){e._setRewardedState(a.OPENED),r.show()})),r.addEventListener("rewarded",(function(){e._setRewardedState(a.REWARDED)})),r.addEventListener("empty",(function(){e._advertisementShowErrorPopup(!0).then((function(){return t()}))})),r.addEventListener("closed",(function(){e._setRewardedState(a.CLOSED),t()}))}))})):this._advertisementShowErrorPopup(!0)}function Hu(e){e.playerId&&(this._isPlayerAuthorized=!0,this._playerId=e.playerId,this._playerName=e.playerDisplayName,this._playerExtra=e,delete this._playerExtra.playerId,delete this._playerExtra.playerDisplayName)}const Uu=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ku(e,t)}(l,t);var r,n,o,u,c=(o=l,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Iu(o);if(u){var r=Iu(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Eu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Du(e)}(this,e)});function l(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return Tu(Du(e=c.call.apply(c,[this].concat(i))),Mu),Tu(Du(e),Gu),Tu(Du(e),Bu),n={writable:!0,value:null},Ru(t=Du(e),r=Cu),r.set(t,n),e}return r=l,(n=[{key:"platformId",get:function(){return e.MSN}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return m}},{key:"isBannerSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);if(!t){var r;t=this._createPromiseDecorator(v.INITIALIZE),pe("https://assets.msn.com/staticsb/statics/latest/msstart-games-sdk/msstart-v1.0.0-rc.20.min.js").then((function(){return ye("$msstart")})).then((function(){e._platformSdk=window.$msstart,e._platformSdk.getSignedInUserAsync().then((function(t){Nu(e,Mu,Hu).call(e,t)})).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)}))}));var n=null===(r=this._options)||void 0===r||null===(r=r.advertisement)||void 0===r?void 0:r.backfillId;n&&pe("https://playgama.com/ads/msn.v0.1.js").then((function(){return ye("pgAds")})).then((function(){window.pgAds.init(n).then((function(){var t,r,n;t=e,r=Cu,n=window.pgAds,function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(t,ju(t,r,"set"),n);var o=e._options.gameId;Lu(e,Cu).updateTargeting({gameId:o})}))}))}return t.promise}},{key:"authorizePlayer",value:function(){var e=this;return this._isPlayerAuthorized?Promise.resolve():new Promise((function(t,r){e._platformSdk.signInAsync().then((function(r){Nu(e,Mu,Hu).call(e,r),t()})).catch((function(e){r(e)}))}))}},{key:"share",value:function(e){var t=this;return new Promise((function(r,n){t._platformSdk.shareAsync(e).then(r).catch(n)}))}},{key:"leaderboardsSetScore",value:function(e,t){var r=this;return new Promise((function(e,n){r._platformSdk.submitGameResultsAsync(t).then(e).catch(n)}))}},{key:"showBanner",value:function(e){var t,r=this;t="top"===e?"top:728x90":"bottom:320x50",this._platformSdk.showDisplayAdsAsync([t]).then((function(){r._setBannerState(s.SHOWN)})).catch((function(){r._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.hideDisplayAdsAsync().then((function(){e._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.loadAdsAsync(!1).then((function(t){return e._platformSdk.showAdsAsync(t.instanceId)})).then((function(t){return e._setInterstitialState(i.OPENED),t.showAdsCompletedAsync})).then((function(){return e._setInterstitialState(i.CLOSED)})).catch((function(){return Nu(e,Bu,Fu).call(e)}))}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.loadAdsAsync(!0).then((function(t){return e._platformSdk.showAdsAsync(t.instanceId)})).then((function(t){return e._setRewardedState(a.OPENED),t.showAdsCompletedAsync})).then((function(){e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)})).catch((function(){return Nu(e,Gu,xu).call(e)}))}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._paymentsGetProductPlatformData(e);if(!r)return Promise.reject();var n=this._getPromiseDecorator(v.PURCHASE);return n||(n=this._createPromiseDecorator(v.PURCHASE),this._platformSdk.iap.purchaseAsync({productId:r.platformProductId}).then((function(r){if("IAP_PURCHASE_FAILURE"!==r.code){var n=wu(wu({id:e},r.receipt),{},{receiptSignature:r.receiptSignature});delete n.productId,t._paymentsPurchases.push(n),t._resolvePromiseDecorator(v.PURCHASE,n)}else t._rejectPromiseDecorator(v.PURCHASE,r.description)})).catch((function(e){t._rejectPromiseDecorator(v.PURCHASE,e)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this,r=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(v.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(v.CONSUME_PURCHASE),this._platformSdk.iap.consumeAsync({productId:this._paymentsPurchases[r].id}).then((function(n){if("IAP_CONSUME_FAILURE"!==n.code){t._paymentsPurchases.splice(r,1);var o=wu(wu({id:e},n.consumptionReceipt),{},{consumptionSignature:n.consumptionSignature});delete o.productId,t._resolvePromiseDecorator(v.CONSUME_PURCHASE,o)}else t._rejectPromiseDecorator(v.CONSUME_PURCHASE,n.description)})).catch((function(e){t._rejectPromiseDecorator(v.CONSUME_PURCHASE,e)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var r=this._getPromiseDecorator(v.GET_CATALOG);return r||(r=this._createPromiseDecorator(v.GET_CATALOG),this._platformSdk.iap.getAllAddOnsAsync({productId:this._options.gameId}).then((function(r){if("IAP_GET_ALL_ADD_ONS_FAILURE"!==r.code){var n=t.map((function(e){var t=r.find((function(t){return t.productId===e.platformProductId}));return{id:e.id,title:t.title,description:t.description,publisherName:t.publisherName,inAppOfferToken:t.inAppOfferToken,isConsumable:t.isConsumable,price:"".concat(t.price.listPrice," ").concat(t.price.currencyCode," "),priceCurrencyCode:t.price.currencyCode,priceValue:t.price.listPrice}}));e._resolvePromiseDecorator(v.GET_CATALOG,n)}else e._rejectPromiseDecorator(v.GET_CATALOG,r.description)})).catch((function(t){e._rejectPromiseDecorator(v.GET_CATALOG,t)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(v.GET_PURCHASES);return t||(t=this._createPromiseDecorator(v.GET_PURCHASES),this._platformSdk.iap.getAllPurchasesAsync({productId:this._options.gameId}).then((function(t){if("IAP_GET_ALL_PURCHASES_FAILURE"!==t.code){var r=e._paymentsGetProductsPlatformData();e._paymentsPurchases=t.receipts.map((function(e){var n=wu(wu({id:r.find((function(t){return t.id===e.productId})).id},e),{},{receiptSignature:t.receiptSignature});return delete n.productId,n})),e._resolvePromiseDecorator(v.GET_PURCHASES,e._paymentsPurchases)}else e._rejectPromiseDecorator(v.GET_PURCHASES,t.description)})).catch((function(t){e._rejectPromiseDecorator(v.GET_PURCHASES,t)}))),t.promise}}])&&Au(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}(Fr);function zu(e){return zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zu(e)}function Vu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vu(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=qu(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Yu(){Yu=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new T(n||[]);return o(a,"_invoke",{value:O(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",m={};function v(){}function _(){}function g(){}var b={};c(b,a,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(R([])));E&&E!==r&&n.call(E,a)&&(b=E);var P=g.prototype=v.prototype=Object.create(b);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,i,a,s){var u=f(e[o],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==zu(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=k(s,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:d,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function k(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,k(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(zu(t)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=c(g,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(P),e},t.awrap=function(e){return{__await:e}},w(A.prototype),c(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(P),c(P,u,"Generator"),c(P,a,(function(){return this})),c(P,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Zu(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function Ju(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Zu(i,n,o,a,s,"next",e)}function s(e){Zu(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Ku(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qu(n.key),n)}}function qu(e){var t=function(e,t){if("object"!=zu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=zu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==zu(t)?t:String(t)}function Xu(){return Xu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ec(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Xu.apply(this,arguments)}function Qu(e,t){return Qu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qu(e,t)}function $u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ec(e){return ec=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ec(e)}var tc=new WeakSet;function rc(){var e=this,t={loading:a.LOADING,opened:a.OPENED,closed:a.CLOSED,failed:a.FAILED,rewarded:a.REWARDED},r={loading:i.LOADING,opened:i.OPENED,closed:i.CLOSED,failed:i.FAILED},n={loading:s.LOADING,shown:s.SHOWN,hidden:s.HIDDEN,failed:s.FAILED};this._platformSdk.advertisement.on("REWARDED_STATE_CHANGED",(function(r){var n=t[r];n&&(e._setRewardedState(n),n===a.REWARDED&&e._setRewardedState(a.CLOSED))})),this._platformSdk.advertisement.on("INTERSTITIAL_STATE_CHANGED",(function(t){var n=r[t];n&&e._setInterstitialState(n)})),this._platformSdk.advertisement.on("BANNER_STATE_CHANGED",(function(t){var r=n[t];r&&e._setBannerState(r)}))}const nc=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qu(e,t)}(c,t);var r,n,o,i,a,s,u=(a=c,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ec(a);if(s){var r=ec(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===zu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $u(e)}(this,e)});function c(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=$u(e=u.call.apply(u,[this].concat(o))),r=tc),r.add(t),e}return r=c,n=[{key:"platformId",get:function(){return e.BITQUEST}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return y}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),pe("https://app.bitquest.games/bqsdk.min.js").then((function(){ye("bq").then((function(){e._platformSdk=window.bq,e._platformSdk.initialize().then((function(){e._platformSdk.platform.sendMessage("game_ready");var t=e._platformSdk.player,r=t.id,n=void 0===r?null:r,o=t.name,i=void 0===o?"":o;e._playerId=n,e._playerName=i,e._isPlayerAuthorized=!0,e._defaultStorageType=f.PLATFORM_INTERNAL,e._playerExtra=t,delete e._playerExtra.id,delete e._playerExtra.name,function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}(e,tc,rc).call(e),e.showPreRoll(),e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)})).catch((function(t){e._rejectPromiseDecorator(v.INITIALIZE,t)}))}))}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||Xu(ec(c.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL||Xu(ec(c.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;if(t===f.PLATFORM_INTERNAL){if(Array.isArray(e)){var o=e.map((function(e){return n._platformSdk.storage.get(e,"platform_internal").then((function(e){var t=e;if(r&&"string"==typeof e)try{t=JSON.parse(e)}catch(e){}return t}))}));return Promise.all(o)}return this._platformSdk.storage.get(e,"platform_internal").then((function(e){var t=e;if(r&&"string"==typeof e)try{t=JSON.parse(e)}catch(e){}return t}))}return Xu(ec(c.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:(i=Ju(Yu().mark((function e(t,r,n){return Yu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n!==f.PLATFORM_INTERNAL){e.next=12;break}if(!Array.isArray(t)){e.next=9;break}if(Array.isArray(r)){e.next=4;break}throw new Error("Value must be an array if key is an array");case 4:if(t.length===r.length){e.next=6;break}throw new Error("Key and value arrays must have the same length");case 6:return e.next=8,this._platformSdk.storage.set(t,r,"platform_internal");case 8:case 11:return e.abrupt("return");case 9:return e.next=11,this._platformSdk.storage.set(t,r,"platform_internal");case 12:return e.next=14,Xu(ec(c.prototype),"setDataToStorage",this).call(this,t,r,n);case 14:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return i.apply(this,arguments)})},{key:"deleteDataFromStorage",value:(o=Ju(Yu().mark((function e(t,r){var n;return Yu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r!==f.PLATFORM_INTERNAL){e.next=13;break}if(!Array.isArray(t)){e.next=10;break}n=0;case 3:if(!(n<t.length)){e.next=9;break}return e.next=6,this._platformSdk.storage.delete(t[n],"platform_internal");case 6:n++,e.next=3;break;case 9:return e.abrupt("return");case 10:return e.next=12,this._platformSdk.storage.delete(t,"platform_internal");case 12:return e.abrupt("return");case 13:return e.next=15,Xu(ec(c.prototype),"deleteDataFromStorage",this).call(this,t,r);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"showRewarded",value:function(){this._platformSdk.advertisement.showRewarded()}},{key:"showInterstitial",value:function(){this._platformSdk.advertisement.showInterstitial()}},{key:"showPreRoll",value:function(){this._platformSdk.advertisement.showPreRoll()}},{key:"showBanner",value:function(){this._platformSdk.advertisement.showBanner()}},{key:"hideBanner",value:function(){this._platformSdk.advertisement.hideBanner()}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._getPromiseDecorator(v.PURCHASE);return r||(r=this._createPromiseDecorator(v.PURCHASE),this._platformSdk.payment.purchase(e).then((function(r){var n=Wu({id:e},r.purchaseData);delete n.productID,t._paymentsPurchases.push(n),t._resolvePromiseDecorator(v.PURCHASE,n)})).catch((function(e){t._rejectPromiseDecorator(v.PURCHASE,e)}))),r.promise}},{key:"paymentsGetCatalog",value:function(){var e,t=this,r=this._paymentsGetProductsPlatformData();if(!r||!Array.isArray(r)||0===r.length)return Promise.reject(new Error("No platform products available"));if(!this._isInitialized||null===(e=this._platformSdk)||void 0===e||!e.payment)return Promise.reject(new Error("SDK not initialized or payment not available"));var n=this._getPromiseDecorator(v.GET_CATALOG);return n||(n=this._createPromiseDecorator(v.GET_CATALOG),this._platformSdk.payment.getCatalog().then((function(e){if(!Array.isArray(e))throw new Error("Catalog response is not an array");var n=r.map((function(t){var r=e.find((function(e){return e.purchaseId===t.id}));return r?{id:t.id,name:r.name,description:r.description,price:r.priceValue,priceCurrencyCode:r.currencyCode,priceValue:r.price}:null})).filter(Boolean);t._resolvePromiseDecorator(v.GET_CATALOG,n)})).catch((function(e){t._rejectPromiseDecorator(v.GET_CATALOG,e)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this,r=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(v.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(v.CONSUME_PURCHASE),this._platformSdk.payment.consumePurchase(e).then((function(){t._paymentsPurchases.splice(r,1),t._resolvePromiseDecorator(v.CONSUME_PURCHASE,{id:e})})).catch((function(e){t._rejectPromiseDecorator(v.CONSUME_PURCHASE,e)}))),n.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(v.GET_PURCHASES);return t||(t=this._createPromiseDecorator(v.GET_PURCHASES),this._platformSdk.payment.getPurchases().then((function(t){var r=null==t?void 0:t.purchases,n=e._paymentsGetProductsPlatformData();e._paymentsPurchases=r.map((function(e){var t=n.find((function(t){return t.id===e.purchaseId}));if(!t)return null;var r=Wu({id:t.id},e);return delete r.purchaseId,r})).filter(Boolean),e._resolvePromiseDecorator(v.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(v.GET_PURCHASES,t)}))),t.promise}},{key:"leaderboardsSetScore",value:function(e,t){var r=this;if(!this._isPlayerAuthorized)return Promise.reject();var n=this._getPromiseDecorator(v.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(v.LEADERBOARDS_SET_SCORE);var o="number"==typeof t?t:parseInt(t,10);this._platformSdk.leaderboard.setScore(e,o).then((function(){r._resolvePromiseDecorator(v.LEADERBOARDS_SET_SCORE)})).catch((function(e){r._rejectPromiseDecorator(v.LEADERBOARDS_SET_SCORE,e)}))}return n.promise}},{key:"leaderboardsGetEntries",value:function(e){var t=this,r=this._getPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES);return r||(r=this._createPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES),this._platformSdk.leaderboard.getEntries(e).then((function(e){var r=Array.isArray(e)?e:e.entries||e.data||[];t._resolvePromiseDecorator(v.LEADERBOARDS_GET_ENTRIES,r)})).catch((function(e){t._rejectPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES,e)}))),r.promise}},{key:"getServerTime",value:function(){var e=this;return new Promise((function(t){t(e._platformSdk.platform.getServerTime())}))}}],n&&Ku(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}(Fr);function oc(e){return oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oc(e)}function ic(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lc(n.key),n)}}function ac(e,t){return ac=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ac(e,t)}function sc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uc(e){return uc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},uc(e)}function cc(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function lc(e){var t=function(e,t){if("object"!=oc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=oc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==oc(t)?t:String(t)}function fc(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var pc=new WeakSet,dc=new WeakSet,hc=new WeakSet;function yc(){var e=this;this._platformSdk.ads.on("rewarded:start",(function(){e._setRewardedState(a.OPENED)})),this._platformSdk.ads.on("rewarded:close",(function(t){t||e._setRewardedState(a.FAILED)})),this._platformSdk.ads.on("rewarded:reward",(function(){e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)}))}function mc(){var e=this;this._platformSdk.ads.on("fullscreen:start",(function(){e._setInterstitialState(i.OPENED)})),this._platformSdk.ads.on("fullscreen:close",(function(){e._setInterstitialState(i.CLOSED)}))}function vc(){var e=this;this._platformSdk.ads.on("sticky:render",(function(){e._setBannerState(s.SHOWN)})),this._platformSdk.ads.on("sticky:close",(function(){e._setBannerState(s.HIDDEN)}))}const _c=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ac(e,t)}(u,t);var r,n,o,i,s=(o=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=uc(o);if(i){var r=uc(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===oc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sc(e)}(this,e)});function u(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return cc(sc(e=s.call.apply(s,[this].concat(o))),hc),cc(sc(e),dc),cc(sc(e),pc),t=sc(e),!0,(r=lc(r="_isBannerSupported"))in t?Object.defineProperty(t,r,{value:true,enumerable:!0,configurable:!0,writable:!0}):t[r]=true,e}return r=u,(n=[{key:"platformId",get:function(){return e.GAMEPUSH}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);if(!t)if(t=this._createPromiseDecorator(v.INITIALIZE),this._options&&this._options.projectId&&this._options.publicToken){var r="https://gamepush.com/sdk/game-score.js?projectId=".concat(this._options.projectId,"&publicToken=").concat(this._options.publicToken);pe(r).then((function(){ye("GamePush").then((function(){var t;e._platformSdk=window.GamePush;var r=null===(t=e._platformSdk)||void 0===t?void 0:t.player;if(r){var n=r.id,o=void 0===n?null:n,i=r.name,a=void 0===i?"":i,s=r.avatar,u=void 0===s?"":s;e._isPlayerAuthorized=!0,e._playerId=o,e._playerName=a,u&&e._playerPhotos.push(u)}e._isInitialized=!0,fc(e,dc,mc).call(e),fc(e,pc,yc).call(e),fc(e,hc,vc).call(e),e._resolvePromiseDecorator(v.INITIALIZE)}))}))}else this._rejectPromiseDecorator(v.INITIALIZE,A);return t.promise}},{key:"showInterstitial",value:function(){this._platformSdk.ads.showFullscreen()}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.ads.showRewardedVideo().catch((function(){e._setRewardedState(a.FAILED)}))}},{key:"showBanner",value:function(){this._platformSdk.ads.showSticky()}},{key:"hideBanner",value:function(){this._platformSdk.ads.closeSticky()}},{key:"checkAdBlock",value:function(){var e=this;return new Promise((function(t){e._platformSdk.ads.isAdblockEnabled().then((function(e){t(e)}))}))}}])&&ic(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}(Fr);function gc(e){return gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gc(e)}function bc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bc(Object(r),!0).forEach((function(t){Oc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ec(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kc(n.key),n)}}function Pc(e,t){return Pc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pc(e,t)}function wc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ac(e){return Ac=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ac(e)}function Oc(e,t,r){return(t=kc(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kc(e){var t=function(e,t){if("object"!=gc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=gc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==gc(t)?t:String(t)}const Dc=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pc(e,t)}(s,t);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ac(o);if(i){var r=Ac(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===gc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wc(e)}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Oc(wc(e=a.call.apply(a,[this].concat(r))),"_appId",null),Oc(wc(e),"_accessToken",null),Oc(wc(e),"_platformLanguage","en"),e}return r=s,(n=[{key:"platformId",get:function(){return e.DISCORD}},{key:"platformLanguage",get:function(){return this._platformLanguage}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t,r=this._getPromiseDecorator(v.INITIALIZE);return r||(r=this._createPromiseDecorator(v.INITIALIZE),null!==(t=this._options)&&void 0!==t&&t.appId?(this._appId=this._options.appId,pe("/cdn/discord/discord-v2.0.0.min.js").then((function(){ye("discord","DiscordSDK").then((function(){return e._platformSdk=new window.discord.DiscordSDK(e._appId),e._platformSdk.ready()})).then((function(){e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)}))}))):this._rejectPromiseDecorator(v.INITIALIZE,k)),r.promise}},{key:"authorizePlayer",value:function(){var e=this,t=this._getPromiseDecorator(v.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(v.AUTHORIZE_PLAYER),this._platformSdk.commands.authorize({client_id:this._appId,response_type:"code",state:"",prompt:"none",scope:["identify"]}).then((function(e){var t=e.code;return fetch("".concat("/api","/token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t})})})).then((function(e){return e.json()})).then((function(t){return e._accessToken=t.access_token,e._platformSdk.commands.authenticate({access_token:e._accessToken})})).then((function(t){if(null===t)throw new Error("Authorization failed");return e._isPlayerAuthorized=!0,e._resolvePromiseDecorator(v.AUTHORIZE_PLAYER),fetch("/users/@me",{method:"GET",headers:{Authorization:"Bearer ".concat(e._accessToken),"Content-Type":"application/json"}})})).then((function(e){return e.json()})).then((function(t){e._playerId=t.id,e._playerName=t.username,t.avatar&&e._playerPhotos.push("https://cdn.discordapp.com/avatars/".concat(t.id,"/").concat(t.avatar,".png")),e._playerExtra=t,delete e._playerExtra.id,delete e._playerExtra.username,delete e._playerExtra.avatar})).catch((function(t){e._accessToken=null,e._rejectPromiseDecorator(v.AUTHORIZE_PLAYER,t)}))),t.promise}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._paymentsGetProductPlatformData(e);if(!r)return Promise.reject();var n=this._getPromiseDecorator(v.PURCHASE);return n||(n=this._createPromiseDecorator(v.PURCHASE),this._platformSdk.commands.startPurchase({sku_id:r.platformProductId}).then((function(r){if(!r)throw new Error("Purchase failed");var n=Sc({id:e},r);t._paymentsPurchases.push(n),t._resolvePromiseDecorator(v.PURCHASE,n)})).catch((function(e){t._rejectPromiseDecorator(v.PURCHASE,e)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this,r=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(v.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(v.CONSUME_PURCHASE),fetch("/applications/".concat(this._appId,"/entitlements/").concat(this._paymentsPurchases[r].purchaseToken,"/consume"),{method:"POST",headers:{Authorization:"Bearer ".concat(this._accessToken),"Content-Type":"application/json"},body:JSON.stringify({})}).then((function(){t._paymentsPurchases.splice(r,1),t._resolvePromiseDecorator(v.CONSUME_PURCHASE,{id:e})})).catch((function(e){t._rejectPromiseDecorator(v.CONSUME_PURCHASE,e)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var r=this._getPromiseDecorator(v.GET_CATALOG);return r||(r=this._createPromiseDecorator(v.GET_CATALOG),this._platformSdk.commands.getSkus().then((function(r){var n=r.skus,o=t.map((function(e){var t=n.find((function(t){return t.id===e.platformProductId})),r=t.price.currency_exponent?t.price.amount/Math.pow(10,t.price.currency_exponent):t.price.amount;return{id:e.id,title:t.name,price:"".concat(r," ").concat(t.price.currency),priceCurrencyCode:t.price.currency,priceValue:r}}));e._resolvePromiseDecorator(v.GET_CATALOG,o)})).catch((function(t){e._rejectPromiseDecorator(v.GET_CATALOG,t)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(v.GET_PURCHASES);return t||(t=this._createPromiseDecorator(v.GET_PURCHASES),this._platformSdk.commands.getEntitlements().then((function(t){var r=e._paymentsGetProductsPlatformData();e._paymentsPurchases=t.entitlements.map((function(e){return Sc({id:r.find((function(t){return t.id===e.id})).id},e)})),e._resolvePromiseDecorator(v.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(v.GET_PURCHASES,t)}))),t.promise}},{key:"inviteFriends",value:function(){var e=this,t=this._getPromiseDecorator(v.INVITE_FRIENDS);return t||(t=this._createPromiseDecorator(v.INVITE_FRIENDS),this._platformSdk.commands.openInviteDialog().then((function(){e._resolvePromiseDecorator(v.INVITE_FRIENDS)})).catch((function(t){e._rejectPromiseDecorator(v.INVITE_FRIENDS,t)}))),t.promise}},{key:"share",value:function(e){var t=this;if(!e.mediaUrl)return Promise.reject();var r=this._getPromiseDecorator(v.SHARE);return r||(r=this._createPromiseDecorator(v.SHARE),this._platformSdk.commands.openShareMomentDialog({mediaUrl:e.mediaUrl}).then((function(){t._resolvePromiseDecorator(v.SHARE)})).catch((function(e){t._rejectPromiseDecorator(v.SHARE,e)}))),r.promise}}])&&Ec(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(Fr);function Ic(e){return Ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ic(e)}function Tc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tc(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=jc(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Lc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jc(n.key),n)}}function jc(e){var t=function(e,t){if("object"!=Ic(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ic(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ic(t)?t:String(t)}function Nc(){return Nc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gc(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Nc.apply(this,arguments)}function Cc(e,t){return Cc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Cc(e,t)}function Bc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gc(e){return Gc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gc(e)}function Mc(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function Fc(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Hc(e,t,"set"),r),r}function xc(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Hc(e,t,"get"))}function Hc(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Uc=new WeakMap,zc=new WeakMap,Vc=new WeakMap;const Wc=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cc(e,t)}(s,t);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Gc(o);if(i){var r=Gc(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ic(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bc(e)}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Mc(Bc(e=a.call.apply(a,[this].concat(r))),Uc,{writable:!0,value:void 0}),Mc(Bc(e),zc,{writable:!0,value:!0}),Mc(Bc(e),Vc,{writable:!0,value:!1}),e}return r=s,(n=[{key:"platformId",get:function(){return e.YOUTUBE}},{key:"platformLanguage",get:function(){return xc(this,Uc)?xc(this,Uc):Nc(Gc(s.prototype),"platformLanguage",this)}},{key:"isPlatformAudioEnabled",get:function(){return xc(this,zc)}},{key:"isPlatformPaused",get:function(){return xc(this,Vc)}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"leaderboardsType",get:function(){return m}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),pe("https://www.youtube.com/game_api/v1").then((function(){ye("ytgame").then((function(){e._platformSdk=window.ytgame,e._defaultStorageType=f.PLATFORM_INTERNAL,Fc(e,zc,e._platformSdk.system.isAudioEnabled());var t=e._platformSdk.system.getLanguage().then((function(t){Fc(e,Uc,t.length>2?t.slice(0,2):t)}));e._platformStorageCachedData={};var r=e._platformSdk.game.loadData().then((function(t){"string"==typeof t&&""!==t&&(e._platformStorageCachedData=JSON.parse(t))}));e._platformSdk.system.onAudioEnabledChange((function(t){Fc(e,zc,t),e._setAudioState(t)})),e._platformSdk.system.onPause((function(){Fc(e,Vc,!0),e._setPauseState(xc(e,Vc))})),e._platformSdk.system.onResume((function(){Fc(e,Vc,!1),e._setPauseState(xc(e,Vc))})),Promise.all([t,r]).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE),e._platformSdk.game.firstFrameReady()}))}))}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||Nc(Gc(s.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL||Nc(Gc(s.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===f.PLATFORM_INTERNAL?new Promise((function(t,o){n._platformSdk.game.loadData().then((function(o){if("string"==typeof o&&""!==o&&(n._platformStorageCachedData=JSON.parse(o)),Array.isArray(e)){for(var i=[],a=0;a<e.length;a++){var s=void 0===n._platformStorageCachedData[e[a]]?null:n._platformStorageCachedData[e[a]];if("string"==typeof s&&r)try{s=JSON.parse(s)}catch(e){}i.push(s)}t(i)}else{var u=void 0===n._platformStorageCachedData[e]?null:n._platformStorageCachedData[e];if("string"==typeof u&&r)try{u=JSON.parse(u)}catch(e){}t(u)}})).catch((function(){o()}))})):Nc(Gc(s.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===f.PLATFORM_INTERNAL?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?Rc({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n._platformSdk.game.saveData(JSON.stringify(i)).then((function(){n._platformStorageCachedData=i,r()})).catch((function(e){o(e)}))})):Nc(Gc(s.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===f.PLATFORM_INTERNAL?new Promise((function(t,n){var o=null!==r._platformStorageCachedData?Rc({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];r._platformSdk.game.saveData(JSON.stringify(o)).then((function(){r._platformStorageCachedData=o,t()})).catch((function(e){n(e)}))})):Nc(Gc(s.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"sendMessage",value:function(e){return e===d.GAME_READY?(this._platformSdk.game.gameReady(),Promise.resolve()):Nc(Gc(s.prototype),"sendMessage",this).call(this,e)}},{key:"leaderboardsSetScore",value:function(e,t,r){var n=this;if(!r)return Promise.reject();var o=this._getPromiseDecorator(v.LEADERBOARDS_SET_SCORE);if(!o){o=this._createPromiseDecorator(v.LEADERBOARDS_SET_SCORE);var i="string"==typeof t?parseInt(t,10):t;this._platformSdk.engagement.sendScore({value:i}).then((function(){n._resolvePromiseDecorator(v.LEADERBOARDS_SET_SCORE)})).catch((function(e){n._rejectPromiseDecorator(v.LEADERBOARDS_SET_SCORE,e)}))}return o.promise}}])&&Lc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(Fr);function Yc(e){return Yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yc(e)}function Zc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zc(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Xc(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Kc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xc(n.key),n)}}function Xc(e){var t=function(e,t){if("object"!=Yc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Yc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Yc(t)?t:String(t)}function Qc(e,t){return Qc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qc(e,t)}function $c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function el(e){return el=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},el(e)}function tl(e,t){nl(e,t),t.add(e)}function rl(e,t,r){nl(e,t),t.set(e,r)}function nl(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ol(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,sl(e,t,"get"))}function il(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function al(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,sl(e,t,"set"),r),r}function sl(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var ul=new WeakMap,cl=new WeakMap,ll=new WeakMap,fl=new WeakMap,pl=new WeakMap,dl=new WeakMap,hl=new WeakMap,yl=new WeakSet,ml=new WeakSet;function vl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=document.createElement("ins");return r.setAttribute("data-adspot-key",e),r.setAttribute("data-source",ol(this,ul)),Object.entries(t).forEach((function(e){var t,n,o=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Kc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Kc(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];return r.setAttribute(i,String(a))})),r}function _l(e){var t=this;this._platformSdk.setConfiguration(Jc(Jc({},e),{},{reqType:"prod",logLevel:1,adRequestTimeout:6e3,adRenderingTimeout:5e3})),this._platformSdk.onAdPrepared=function(e){e===ol(t,cl)?t._setBannerState(s.SHOWN):e===ol(t,fl)?t._setInterstitialState(i.OPENED):e===ol(t,dl)&&t._setRewardedState(a.OPENED)},this._platformSdk.onAdFailedToLoad=function(e,r){var n;if(console.error(JSON.stringify(r)),e===ol(t,cl))null===(n=ol(t,ll))||void 0===n||n.remove(),al(t,ll,null),t._setBannerState(s.FAILED);else if(e===ol(t,fl)){var o;null===(o=ol(t,pl))||void 0===o||o.remove(),al(t,pl,null),t._setInterstitialState(i.FAILED)}else if(e===ol(t,dl)){var u;null===(u=ol(t,hl))||void 0===u||u.remove(),al(t,hl,null),t._setRewardedState(a.FAILED)}},this._platformSdk.onAdClosed=function(e,r,n){var o;if(e===ol(t,fl))t._setInterstitialState(i.CLOSED),null===(o=ol(t,pl))||void 0===o||o.remove(),al(t,pl,null);else if(e===ol(t,dl)){var s;n&&r&&t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED),null===(s=ol(t,hl))||void 0===s||s.remove(),al(t,hl,null)}}}const gl=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qc(e,t)}(f,t);var r,n,o,i,a=(o=f,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=el(o);if(i){var r=el(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Yc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $c(e)}(this,e)});function f(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return tl($c(e=a.call.apply(a,[this].concat(r))),ml),tl($c(e),yl),rl($c(e),ul,{writable:!0,value:null}),rl($c(e),cl,{writable:!0,value:null}),rl($c(e),ll,{writable:!0,value:null}),rl($c(e),fl,{writable:!0,value:null}),rl($c(e),pl,{writable:!0,value:null}),rl($c(e),dl,{writable:!0,value:null}),rl($c(e),hl,{writable:!0,value:null}),e}return r=f,(n=[{key:"platformId",get:function(){return e.JIO_GAMES}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return m}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),this._options&&this._options.packageName?pe("https://jioadsweb.akamaized.net/jioads/websdk/default/stable/v2/jioAds.js").then((function(){ye("JioAds").then((function(){var t=e;al(e,ul,e._options.packageName),e._platformSdk=window.JioAds,window.DroidHandler?(window.DroidHandler.getUserProfile(),window.DroidHandler.postMessage(JSON.stringify({key:"getUserProperties"}))):window.onUserPropertiesResponse({detail:{uid:"",ifa:""}}),window.onUserProfileResponse=function(e){var r=JSON.parse(e);t.playerId=r.gamer_id||null,t.playerName=r.gamer_name||null,r.gamer_avatar_url&&t.playerPhotos.push(r.gamer_avatar_url),t._isPlayerAuthorized=!0},window.onUserPropertiesResponse=function(e){il(t,ml,_l).call(t,e)},e._platformSdk.onInitialised=function(){e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)}}))})):this._rejectPromiseDecorator(v.INITIALIZE,D)),t.promise}},{key:"showBanner",value:function(e,t){if(!ol(this,ll)){al(this,cl,t),al(this,ll,de(e));var r=il(this,yl,vl).call(this,t,{"data-container-id":u});ol(this,ll).appendChild(r)}}},{key:"hideBanner",value:function(){var e;null===(e=ol(this,ll))||void 0===e||e.remove(),al(this,ll,null),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(e){if(!ol(this,pl)){al(this,fl,e),al(this,pl,he(c));var t=il(this,yl,vl).call(this,e,{"data-container-id":c});ol(this,pl).appendChild(t)}}},{key:"showRewarded",value:function(e){if(!ol(this,hl)){al(this,dl,e),al(this,hl,he(l));var t=il(this,yl,vl).call(this,e,{"data-container-id":l});ol(this,hl).appendChild(t)}}},{key:"leaderboardsSetScore",value:function(e,t,r){if(!r||!window.DroidHandler)return Promise.reject();var n="string"==typeof t?parseInt(t,10):t;return window.DroidHandler.postScore(n),Promise.resolve()}}])&&qc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),f}(Fr);function bl(e){return bl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bl(e)}function Sl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function El(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Sl(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=wl(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wl(n.key),n)}}function wl(e){var t=function(e,t){if("object"!=bl(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=bl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==bl(t)?t:String(t)}function Al(e,t){kl(e,t),t.add(e)}function Ol(e,t,r){kl(e,t),t.set(e,r)}function kl(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Dl(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Rl(e,t,"set"),r),r}function Il(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Tl(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Rl(e,t,"get"))}function Rl(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Ll=new WeakMap,jl=new WeakMap,Nl=new WeakMap,Cl=new WeakMap,Bl=new WeakSet,Gl=new WeakSet,Ml=new WeakSet;function Fl(t){var r,n=e.MOCK,o=new URL(window.location.href);if(t.forciblySetPlatformId)n=Il(this,Gl,xl).call(this,t.forciblySetPlatformId.toLowerCase());else{var i=["y","a","n","d","e","x",".","n","e","t"].join("");o.searchParams.has("platform_id")?n=Il(this,Gl,xl).call(this,o.searchParams.get("platform_id").toLowerCase()):o.hostname.includes(i)||o.hash.includes("yandex")?n=e.YANDEX:o.hostname.includes("crazygames.")||o.hostname.includes("1001juegos.com")?n=e.CRAZY_GAMES:o.hostname.includes("gamedistribution.com")?n=e.GAME_DISTRIBUTION:o.hostname.includes("lagged.")?n=e.LAGGED:o.searchParams.has("api_id")&&o.searchParams.has("viewer_id")&&o.searchParams.has("auth_key")||o.searchParams.has("vk_app_id")?n=e.VK:o.searchParams.has("app_id")&&o.searchParams.has("player_id")&&o.searchParams.has("game_sid")&&o.searchParams.has("auth_key")?n=e.ABSOLUTE_GAMES:o.searchParams.has("playdeck")?n=e.PLAYDECK:o.hash.includes("tgWebAppData")?n=e.TELEGRAM:o.hostname.includes("y8")?n=e.Y8:o.hostname.includes("fbsbx")?n=e.FACEBOOK:o.hostname.includes("poki-gdn")||o.hostname.includes("poki-user-content")?n=e.POKI:o.hostname.includes("msn.")||o.hostname.includes("msnfun.")||o.hostname.includes("start.gg")?n=e.MSN:o.hash.includes("customUrl_")||document.referrer.includes("bitquest")?n=e.BITQUEST:o.hostname.includes("eponesh.")?n=e.GAMEPUSH:o.hostname.includes("discordsays.com")?n=e.DISCORD:o.hostname.includes("usercontent.goog")&&(n=e.YOUTUBE)}var a=t;switch(null!==(r=a.platforms)&&void 0!==r&&r[n]&&(a=ge(a,a.platforms[n])),delete a.platforms,n){case e.VK:Dl(this,Nl,new en(a));break;case e.YANDEX:Dl(this,Nl,new Pn(a));break;case e.CRAZY_GAMES:Dl(this,Nl,new io(a));break;case e.ABSOLUTE_GAMES:Dl(this,Nl,new _o(a));break;case e.GAME_DISTRIBUTION:Dl(this,Nl,new Io(a));break;case e.OK:Dl(this,Nl,new Ri(a));break;case e.PLAYGAMA:Dl(this,Nl,new qi(a));break;case e.PLAYDECK:Dl(this,Nl,new pa(a));break;case e.TELEGRAM:Dl(this,Nl,new Ia(a));break;case e.Y8:Dl(this,Nl,new Ja(a));break;case e.LAGGED:Dl(this,Nl,new ts(a));break;case e.FACEBOOK:Dl(this,Nl,new Ts(a));break;case e.POKI:Dl(this,Nl,new Su(a));break;case e.QA_TOOL:Dl(this,Nl,new hu(a));break;case e.MSN:Dl(this,Nl,new Uu(a));break;case e.BITQUEST:Dl(this,Nl,new nc(a));break;case e.GAMEPUSH:Dl(this,Nl,new _c(a));break;case e.DISCORD:Dl(this,Nl,new Dc(a));break;case e.YOUTUBE:Dl(this,Nl,new Wc(a));break;case e.JIO_GAMES:Dl(this,Nl,new gl(a));break;default:Dl(this,Nl,new Fr(a))}}function xl(t){for(var r=Object.values(e),n=0;n<r.length;n++)if(t===r[n])return t;return e.MOCK}function Hl(e){return Tl(this,Ll)||console.error(_),Tl(this,Cl)[e]}const Ul=function(){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),Al(this,Ml),Al(this,Gl),Al(this,Bl),Ol(this,Ll,{writable:!0,value:!1}),Ol(this,jl,{writable:!0,value:null}),Ol(this,Nl,{writable:!0,value:null}),Ol(this,Cl,{writable:!0,value:{}})}var u,c;return u=r,(c=[{key:"version",get:function(){return"1.25.0-preview.1"}},{key:"isInitialized",get:function(){return Tl(this,Ll)}},{key:"options",get:function(){return Tl(this,Nl).options}},{key:"platform",get:function(){return Il(this,Ml,Hl).call(this,t.PLATFORM)}},{key:"player",get:function(){return Il(this,Ml,Hl).call(this,t.PLAYER)}},{key:"game",get:function(){return Il(this,Ml,Hl).call(this,t.GAME)}},{key:"storage",get:function(){return Il(this,Ml,Hl).call(this,t.STORAGE)}},{key:"advertisement",get:function(){return Il(this,Ml,Hl).call(this,t.ADVERTISEMENT)}},{key:"social",get:function(){return Il(this,Ml,Hl).call(this,t.SOCIAL)}},{key:"device",get:function(){return Il(this,Ml,Hl).call(this,t.DEVICE)}},{key:"leaderboard",get:function(){return Il(this,Ml,Hl).call(this,t.LEADERBOARDS)}},{key:"leaderboards",get:function(){return Il(this,Ml,Hl).call(this,t.LEADERBOARDS)}},{key:"payments",get:function(){return Il(this,Ml,Hl).call(this,t.PAYMENTS)}},{key:"achievements",get:function(){return Il(this,Ml,Hl).call(this,t.ACHIEVEMENTS)}},{key:"remoteConfig",get:function(){return Il(this,Ml,Hl).call(this,t.REMOTE_CONFIG)}},{key:"clipboard",get:function(){return Il(this,Ml,Hl).call(this,t.CLIPBOARD)}},{key:"PLATFORM_ID",get:function(){return e}},{key:"PLATFORM_MESSAGE",get:function(){return d}},{key:"MODULE_NAME",get:function(){return t}},{key:"EVENT_NAME",get:function(){return n}},{key:"INTERSTITIAL_STATE",get:function(){return i}},{key:"REWARDED_STATE",get:function(){return a}},{key:"BANNER_STATE",get:function(){return s}},{key:"STORAGE_TYPE",get:function(){return f}},{key:"VISIBILITY_STATE",get:function(){return o}},{key:"DEVICE_TYPE",get:function(){return p}},{key:"initialize",value:function(e){var r=this;if(Tl(this,Ll))return Promise.resolve();if(!Tl(this,jl)){Dl(this,jl,new F);var n,o="./playgama-bridge-config.json";e&&e.configFilePath&&(o=e.configFilePath),fetch(o).then((function(e){return e.json()})).then((function(e){n=El({},e)})).catch((function(t){console.error("Config parsing error.",t),n=El({},e)})).finally((function(){Il(r,Bl,Fl).call(r,n),Tl(r,Cl)[t.PLATFORM]=new re(Tl(r,Nl)),Tl(r,Cl)[t.PLAYER]=new ue(Tl(r,Nl)),Tl(r,Cl)[t.GAME]=new De(Tl(r,Nl)),Tl(r,Cl)[t.STORAGE]=new Ne(Tl(r,Nl)),Tl(r,Cl)[t.ADVERTISEMENT]=new Nt(Tl(r,Nl)),Tl(r,Cl)[t.SOCIAL]=new xt(Tl(r,Nl)),Tl(r,Cl)[t.DEVICE]=new Yt(Tl(r,Nl)),Tl(r,Cl)[t.LEADERBOARDS]=new ir(Tl(r,Nl)),Tl(r,Cl)[t.PAYMENTS]=new fr(Tl(r,Nl)),Tl(r,Cl)[t.REMOTE_CONFIG]=new vr(Tl(r,Nl)),Tl(r,Cl)[t.CLIPBOARD]=new Pr(Tl(r,Nl)),Tl(r,Cl)[t.ACHIEVEMENTS]=new Ir(Tl(r,Nl)),Tl(r,Nl).initialize().then((function(){var e,n;if(Dl(r,Ll,!0),console.info("%c PlaygamaBridge v.".concat(r.version," initialized. "),"background: #01A5DA; color: white"),Tl(r,jl)&&(Tl(r,jl).resolve(),Dl(r,jl,null)),null!==(e=Tl(r,Nl).options)&&void 0!==e&&null!==(e=e.advertisement)&&void 0!==e&&null!==(e=e.interstitial)&&void 0!==e&&e.preloadOnStart){var o=Tl(r,Nl).options.advertisement.interstitial.preloadOnStart;Tl(r,Cl)[t.ADVERTISEMENT].preloadInterstitial(o)}if(null!==(n=Tl(r,Nl).options)&&void 0!==n&&null!==(n=n.advertisement)&&void 0!==n&&null!==(n=n.rewarded)&&void 0!==n&&n.preloadOnStart){var i=Tl(r,Nl).options.advertisement.rewarded.preloadOnStart;Tl(r,Cl)[t.ADVERTISEMENT].preloadRewarded(i)}})).finally((function(){setTimeout((function(){return Tl(r,Cl)[t.GAME].setLoadingProgress(100,!0)}),700)}))}))}return Tl(this,jl).promise}}])&&Pl(u.prototype,c),Object.defineProperty(u,"prototype",{writable:!1}),r}();window.bridge=new Ul,window.playgamaBridge=window.bridge})()})();
